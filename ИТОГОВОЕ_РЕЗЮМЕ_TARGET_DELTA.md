# üéØ –ò–¢–û–ì–û–í–û–ï –†–ï–ó–Æ–ú–ï: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ XRP

## üö® –ù–ê–ô–î–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–°–∏–º–ø—Ç–æ–º:**
- XRP —Ü–∏–∫–ª –∞–∫—Ç–∏–≤–µ–Ω (step 0)
- –¢–µ–∫—É—â–∏–π —Ä–æ—Å—Ç: **1.39%**
- –£—Å–ª–æ–≤–∏–µ –ø—Ä–æ–¥–∞–∂–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- **–ù–û –ü–†–û–î–ê–ñ–ê –ù–ï –ü–†–û–ò–°–•–û–î–ò–¢**

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
```python
# –°–¢–ê–†–´–ô –ö–û–î (—Å—Ç—Ä–æ–∫–∞ 1224 –≤ autotrader_v2.py):
required_growth_pct = float(params_row.get('breakeven_pct', 0))
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–ª—è –ø–µ—Ä–≤–æ–≥–æ —à–∞–≥–∞ (step 0) –≤ —Ç–∞–±–ª–∏—Ü–µ: `breakeven_pct = 0.0`, `target_delta_pct = 0.45`
- –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª **breakeven_pct** (0.0%) –≤–º–µ—Å—Ç–æ **target_delta_pct** (0.45%)
- –ü–æ—Ä–æ–≥ 0% –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω –∏–∑-–∑–∞ –∫–æ–º–∏—Å—Å–∏–π –±–∏—Ä–∂–∏ (~0.2%)
- **–†–ï–ó–£–õ–¨–¢–ê–¢:** –ü–µ—Ä–≤—ã–π —à–∞–≥ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ–¥–∞–≤–∞–ª—Å—è!

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

**–§–∞–π–ª:** `c:\Users\–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä\Documents\bGate.mTrade\autotrader_v2.py`

**–°—Ç—Ä–æ–∫–∞:** ~1224 (–≤ –º–µ—Ç–æ–¥–µ `_try_sell`)

**–ë–´–õ–û:**
```python
required_growth_pct = float(params_row.get('breakeven_pct', 0))
```

**–°–¢–ê–õ–û:**
```python
# –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ò—Å–ø–æ–ª—å–∑—É–µ–º target_delta_pct –≤–º–µ—Å—Ç–æ breakeven_pct
# –î–ª—è –ø–µ—Ä–≤–æ–≥–æ —à–∞–≥–∞ breakeven_pct=0, –Ω–æ target_delta_pct —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ü–µ–ª–µ–≤–æ–π —Ä–æ—Å—Ç
required_growth_pct = float(params_row.get('target_delta_pct', params_row.get('breakeven_pct', 0)))
```

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|----------|----------------|-------------------|
| **Required growth** | 0.0000% ‚ùå | 0.4500% ‚úÖ |
| **Current growth** | 1.3903% | 1.3903% |
| **–£—Å–ª–æ–≤–∏–µ** | 1.39% >= 0.00% (–Ω–æ –∫–æ–º–∏—Å—Å–∏–∏!) | 1.39% >= 0.45% ‚úÖ |
| **–ü—Ä–æ–¥–∞–∂–∞** | –ù–ï –ü–†–û–ò–°–•–û–î–ò–¢ ‚ùå | –î–û–õ–ñ–ù–ê –ü–†–û–ò–ó–û–ô–¢–ò ‚úÖ |

## üéØ –í–õ–ò–Ø–ù–ò–ï

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –∞–∫—Ç–∏–≤—ã:**
- ‚úÖ **XRP** - —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–¥–∞—ë—Ç—Å—è –Ω–∞ step 0 –ø—Ä–∏ —Ä–æ—Å—Ç–µ ‚â•0.45%
- ‚úÖ **–í—Å–µ –∞–∫—Ç–∏–≤—ã** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —à–∞–≥–æ–≤

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —à–∞–≥–∏:**
- ‚úÖ **Step 0** (–ø–µ—Ä–≤—ã–π —à–∞–≥) - –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ **Step 1+** - —É–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–æ–ª–µ–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)

## üìã –ß–¢–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï

### 1Ô∏è‚É£ –ü–ï–†–ï–ó–ê–ü–£–°–¢–ò–¢–ï –ê–í–¢–û–¢–†–ï–ô–î–ï–†
```powershell
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å
Ctrl+C

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
python autotrader_v2.py
```

### 2Ô∏è‚É£ –ü–†–û–í–ï–†–¨–¢–ï –õ–û–ì–ò
–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—Ç—Ä–æ–∫–∞–º–∏:
```
[XRP] _try_sell –≤—ã–∑–≤–∞–Ω
[XRP] üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è –ø—Ä–æ–¥–∞–∂–∏:
[XRP]   Required growth: 0.4500%  ‚Üê –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.45%, –∞ –ù–ï 0.0%!
[XRP] ‚úÖ –£—Å–ª–æ–≤–∏–µ –ø—Ä–æ–¥–∞–∂–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!
[XRP] üí∞ –°–æ–∑–¥–∞–Ω–∏–µ LIMIT FOK SELL...
```

### 3Ô∏è‚É£ –ï–°–õ–ò FOK –û–†–î–ï–† –û–¢–ö–õ–û–ù–Ø–ï–¢–°–Ø

**–ü—Ä–∏–∑–Ω–∞–∫–∏:**
```
[XRP] [WARN] FOK –æ—Ä–¥–µ—Ä –æ—Ç–∫–ª–æ–Ω—ë–Ω –±–∏—Ä–∂–µ–π
[XRP] ‚è∞ –°–æ—Ö—Ä–∞–Ω—è–µ–º pending.sell –¥–ª—è –ø–æ–≤—Ç–æ—Ä–∞
```

**–†–µ—à–µ–Ω–∏–µ:**
–í `config.json` –∏–∑–º–µ–Ω–∏—Ç–µ:
```json
{
  "orderbook_level": 1,  // –ü–æ–ø—Ä–æ–±—É–π—Ç–µ 2-3 –¥–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–π —Ü–µ–Ω—ã
  
  // –ò–õ–ò –∏–∑–º–µ–Ω–∏—Ç–µ —Ç–∏–ø –æ—Ä–¥–µ—Ä–∞ –≤ autotrader_v2.py:
  // time_in_force='ioc'   // –≤–º–µ—Å—Ç–æ 'fok'
  // order_type='market'    // –≤–º–µ—Å—Ç–æ 'limit'
}
```

### 4Ô∏è‚É£ –ï–°–õ–ò –ü–†–û–î–ê–ñ–ê –í–°–Å –ï–©–Å –ù–ï –ü–†–û–ò–°–•–û–î–ò–¢

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```powershell
python debug_xrp_sell_v3.py
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ê–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω
2. –§–ª–∞–≥ `_selling_in_progress` –∑–∞—Å—Ç—Ä—è–ª (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ —Ñ–∞–π–ª–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è)
3. –ï—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ SELL –æ—Ä–¥–µ—Ä–∞
4. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
5. Race condition –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏

## üìù –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –°–ü–†–ê–í–ö–ê

### –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É breakeven_pct –∏ target_delta_pct

| –ü–æ–ª–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | Step 0 | Step 1 |
|------|-----------|--------|--------|
| `breakeven_pct` | –ú–∏–Ω–∏–º—É–º –¥–ª—è –±–µ–∑—É–±—ã—Ç–∫–∞ –ë–ï–ó –∫–æ–º–∏—Å—Å–∏–π | 0.0% | 0.31% |
| `target_delta_pct` | –¶–µ–ª–µ–≤–æ–π —Ä–æ—Å—Ç –° –∫–æ–º–∏—Å—Å–∏—è–º–∏ –∏ –∑–∞–ø–∞—Å–æ–º | 0.45% | 0.75% |

**–ü—Ä–∞–≤–∏–ª–æ:**
- `breakeven_pct` - –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑–¥–µ—Ä–∂–µ–∫
- `target_delta_pct` - **—Ä–µ–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏** —Å —É—á—ë—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π (~0.2%)

### –ü–æ—á–µ–º—É breakeven_pct = 0 –¥–ª—è step 0?

–î–ª—è –ø–µ—Ä–≤–æ–≥–æ —à–∞–≥–∞:
- –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ = —Å—Ç–∞—Ä—Ç–æ–≤–∞—è —Ü–µ–Ω–∞
- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π breakeven = 0% —Ä–æ—Å—Ç–∞
- **–ù–û!** –ö–æ–º–∏—Å—Å–∏—è –±–∏—Ä–∂–∏ ~0.2% ‚Üí –Ω—É–∂–µ–Ω –∑–∞–ø–∞—Å

–ü–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `target_delta_pct = 0.45%`:
- 0.2% –∫–æ–º–∏—Å—Å–∏—è –ø–æ–∫—É–ø–∫–∏
- 0.2% –∫–æ–º–∏—Å—Å–∏—è –ø—Ä–æ–¥–∞–∂–∏
- 0.05% –∑–∞–ø–∞—Å
- **= 0.45% –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏—Ç**

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

**–°–∫—Ä–∏–ø—Ç:**
```powershell
python check_target_delta_fix.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!
   –ë–µ–∑ –Ω–µ–≥–æ –ø—Ä–æ–¥–∞–∂–∞ —Ç—Ä–µ–±–æ–≤–∞–ª–∞ 0.0% (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑-–∑–∞ –∫–æ–º–∏—Å—Å–∏–π)
   –¢–µ–ø–µ—Ä—å –ø—Ä–æ–¥–∞–∂–∞ —Ç—Ä–µ–±—É–µ—Ç 0.45% (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ)
```

## üìÖ –ò–°–¢–û–†–ò–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ô

- **–î–∞—Ç–∞:** 2025-01-XX
- **–§–∞–π–ª:** `autotrader_v2.py`, –º–µ—Ç–æ–¥ `_try_sell()`, —Å—Ç—Ä–æ–∫–∞ ~1224
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `target_delta_pct` –≤–º–µ—Å—Ç–æ `breakeven_pct`
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü–µ—Ä–≤—ã–π —à–∞–≥ –Ω–µ –ø—Ä–æ–¥–∞–≤–∞–ª—Å—è –∏–∑-–∑–∞ –ø–æ—Ä–æ–≥–∞ 0%
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–µ—Ä–≤—ã–π —à–∞–≥ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–¥–∞—ë—Ç—Å—è –ø—Ä–∏ —Ä–æ—Å—Ç–µ ‚â•0.45%

## üéâ –í–´–í–û–î

**–î–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**
- ‚ùå XRP step 0 —Ç—Ä–µ–±–æ–≤–∞–ª 0% —Ä–æ—Å—Ç–∞ (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ)
- ‚ùå –ü—Ä–æ–¥–∞–∂–∞ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –Ω–∏–∫–æ–≥–¥–∞
- ‚ùå –î–µ–Ω—å–≥–∏ –∑–∞—Å—Ç—Ä–µ–≤–∞–ª–∏ –≤ —Ü–∏–∫–ª–µ

**–ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**
- ‚úÖ XRP step 0 —Ç—Ä–µ–±—É–µ—Ç 0.45% —Ä–æ—Å—Ç–∞ (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ)
- ‚úÖ –ü—Ä–æ–¥–∞–∂–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–∏
- ‚úÖ –¶–∏–∫–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –ø—Ä–æ—Ñ–∏—Ç–æ–º

---

**–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π!
