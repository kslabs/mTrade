# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–±–ª–∏—Ü–µ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (‚ÜëŒî%) –≤—ã—á–∏—Å–ª—è–ª—Å—è **–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–Ω—ã –ø–µ—Ä–≤–æ–π –ø–æ–∫—É–ø–∫–∏** (`start_price`) –∏–ª–∏ **–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –±–µ–∑—É–±—ã—Ç–∫–∞**, –∞ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ **—Ü–µ–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–∫—É–ø–∫–∏** (`rate`), –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü–µ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏.

### –ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:
```
[02:30:49] [XRP5L] Sell{10.0051; –ö—É—Ä—Å:0.0648; ‚ÜëŒî%:0.15; PnL:0.0154; –ü—Ä–æ—Ñ–∏—Ç:0.0057}
[02:10:40] [XRP5L] Buy{9.9994; –ö—É—Ä—Å:0.0647; ‚ÜìŒî%:0.00; ‚Üì%:0.00; –ò–Ω–≤–µ—Å—Ç:9.9994}
```

–ü—Ä–æ–¥–∞–∂–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –ø—Ä–∏ `‚ÜëŒî%:0.15%`, —Ö–æ—Ç—è –≤ —Ç–∞–±–ª–∏—Ü–µ –¥–ª—è —à–∞–≥–∞ 0 —É–∫–∞–∑–∞–Ω–æ `tŒîPsell,% = 0.45%`!

## üîç –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

–í –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ (`breakeven_calculator.py`) –ø—Ä–æ—Ü–µ–Ω—Ç `target_delta_pct` –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è **–æ—Ç —Ü–µ–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–∫—É–ø–∫–∏** (`rate`):

```python
# –¶–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–∫—É–ø–∫–∏ –Ω–∞ —Ç–µ–∫—É—â–µ–º —à–∞–≥–µ
rate = start_price * (1 + cumulative_decrease / 100.0)

# –ü—Ä–æ—Ü–µ–Ω—Ç –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ (—Ä–æ—Å—Ç –æ—Ç rate –¥–æ breakeven_price)
breakeven_pct = ((breakeven_price - rate) / rate) * 100.0

# –¶–µ–ª–µ–≤–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ–¥–∞–∂–∏ (—Ä–æ—Å—Ç –æ—Ç rate –¥–æ —Ü–µ–ª–µ–≤–æ–π —Ü–µ–Ω—ã)
target_delta_pct = breakeven_pct + pprof - (step * kprof)
```

**–ù–û** –≤ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–µ `autotrader_v2.py` —É—Å–ª–æ–≤–∏–µ –ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–æ–≤–µ—Ä—è–ª–æ—Å—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –ø—Ä–∏–º–µ–Ω—è–ª–∏ target_delta_pct –∫ start_price –≤–º–µ—Å—Ç–æ rate
required_price = start_price * (1 + target_delta_pct / 100.0)
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `autotrader_v2.py` (—Å—Ç—Ä–æ–∫–∏ 1410-1440):

**–ë–´–õ–û:**
```python
# target_delta_pct —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –æ—Ç P0
required_price = start_price * (1 + target_delta_pct / 100.0)
current_growth_from_p0 = ((market_price - start_price) / start_price) * 100.0
```

**–°–¢–ê–õ–û:**
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: target_delta_pct ‚Äî —ç—Ç–æ —Ä–æ—Å—Ç –æ—Ç –¶–ï–ù–´ –ü–û–°–õ–ï–î–ù–ï–ô –ü–û–ö–£–ü–ö–ò (rate)!
rate = float(params_row.get('rate', start_price))  # –¶–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–∫—É–ø–∫–∏
required_price = rate * (1 + target_delta_pct / 100.0)
current_growth_from_rate = ((market_price - rate) / rate) * 100.0
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 1610-1670):

**–ë–´–õ–û:**
```python
actual_growth_from_p0 = ((executed_price - start_price) / start_price) * 100.0
delta_percent=actual_growth_from_be  # –†–æ—Å—Ç –æ—Ç –±–µ–∑—É–±—ã—Ç–∫–∞
```

**–°–¢–ê–õ–û:**
```python
rate_for_log = float(cycle.table[actual_step].get('rate', cycle.start_price))
actual_growth_from_rate = ((executed_price - rate_for_log) / rate_for_log) * 100.0
delta_percent=actual_growth_from_rate  # ‚úÖ –†–æ—Å—Ç –æ—Ç —Ü–µ–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–∫—É–ø–∫–∏
```

## üìä –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

### –§–æ—Ä–º—É–ª–∞:
```
‚ÜëŒî% = ((—Ç–µ–∫—É—â–∞—è_—Ü–µ–Ω–∞ - —Ü–µ–Ω–∞_–ø–æ—Å–ª–µ–¥–Ω–µ–π_–ø–æ–∫—É–ø–∫–∏) / —Ü–µ–Ω–∞_–ø–æ—Å–ª–µ–¥–Ω–µ–π_–ø–æ–∫—É–ø–∫–∏) * 100
```

–ì–¥–µ:
```
—Ü–µ–Ω–∞_–ø–æ—Å–ª–µ–¥–Ω–µ–π_–ø–æ–∫—É–ø–∫–∏ (rate) = start_price * (1 + cumulative_decrease_pct / 100)
```

### –£—Å–ª–æ–≤–∏–µ –ø—Ä–æ–¥–∞–∂–∏:
```
—Ç–µ–∫—É—â–∞—è_—Ü–µ–Ω–∞ >= rate * (1 + target_delta_pct / 100)
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (‚ÜëŒî%) –≤ –ª–æ–≥–∞—Ö **—Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç** –ø—Ä–æ—Ü–µ–Ω—Ç—É –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞.

### –ü—Ä–∏–º–µ—Ä:
–ï—Å–ª–∏ –Ω–∞ —à–∞–≥–µ 0 —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- **rate** (—Ü–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–∫—É–ø–∫–∏): 0.0647
- **tŒîPsell,%**: 0.45%

–¢–æ –ø—Ä–æ–¥–∞–∂–∞ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –∫–æ–≥–¥–∞:
- **—Ü–µ–Ω–∞ >= 0.0647 * 1.0045 = 0.06499** 
- **‚ÜëŒî% = 0.45%** ‚úÖ

–ê –Ω–µ –ø—Ä–∏:
- **—Ü–µ–Ω–∞ >= 0.0648** (—Ä–æ—Å—Ç 0.15%) ‚ùå

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 14 –¥–µ–∫–∞–±—Ä—è 2025 –≥.  
**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `autotrader_v2.py` (—Å—Ç—Ä–æ–∫–∏ 1410-1440, 1610-1670)
- `autotrader.py` (—Å—Ç—Ä–æ–∫–∏ 1095-1115) ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏
- `_autotrader.py` (—Å—Ç—Ä–æ–∫–∏ 1505-1515) ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏
