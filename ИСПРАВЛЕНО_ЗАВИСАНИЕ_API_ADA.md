# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ó–∞–≤–∏—Å–∞–Ω–∏–µ API –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—Ä–¥–µ—Ä–æ–≤ (–ø—Ä–æ–±–ª–µ–º–∞ ADA)

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

### –°–∏–º–ø—Ç–æ–º—ã:
- –í–∞–ª—é—Ç–∞ ADA –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç —Ç–æ—Ä–≥–æ–≤–ª—é
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–µ –Ω–∞ `create_spot_order()`
- –ù–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç API (—Ç–∞–π–º–∞—É—Ç)
- –î—Ä—É–≥–∏–µ –≤–∞–ª—é—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ

### –õ–æ–≥–∏ –ø—Ä–æ–±–ª–µ–º—ã:
```
[ADA] üîÑ [DEBUG] –í—ã–∑–æ–≤ api_client.create_spot_order()...
‚ùå –î–ê–õ–¨–®–ï –ù–ï–¢ –õ–û–ì–û–í - –ó–ê–í–ò–°–ê–ù–ò–ï!
```

### –ü—Ä–∏—á–∏–Ω–∞:
**–í –º–µ—Ç–æ–¥–µ `_request()` –∫–ª–∞—Å—Å–∞ `GateAPIClient` –Ω–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤.**

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ **–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º—É –æ–∂–∏–¥–∞–Ω–∏—é** –æ—Ç–≤–µ—Ç–∞ –æ—Ç Gate.io API, –µ—Å–ª–∏:
- –°–µ—Ä–≤–µ—Ä Gate.io –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é
- API –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω

---

## üîß –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç –≤ `_request()`

**–§–∞–π–ª:** `gate_api_client.py`  
**–ú–µ—Ç–æ–¥:** `_request()`

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```python
response = requests.request(
    method,
    full_url,
    headers=headers,
    data=payload if data else None
)  # ‚ùå –ù–ï–¢ –¢–ê–ô–ú–ê–£–¢–ê
return response.json()
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```python
try:
    response = requests.request(
        method,
        full_url,
        headers=headers,
        data=payload if data else None,
        timeout=15  # ‚úÖ –î–û–ë–ê–í–õ–ï–ù –¢–ê–ô–ú–ê–£–¢ 15 —Å–µ–∫—É–Ω–¥
    )
    
    # –õ–æ–≥–∏—Ä—É–µ–º —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞
    print(f"[DEBUG] _request: HTTP {response.status_code} –¥–ª—è {method} {endpoint}")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–¥
    if response.status_code >= 400:
        print(f"[ERROR] _request: –û—à–∏–±–∫–∞ API {response.status_code}: {response.text[:500]}")
    
    return response.json()
    
except requests.Timeout:
    print(f"[ERROR] _request: –¢–∞–π–º–∞—É—Ç (>15 —Å–µ–∫) –¥–ª—è {method} {endpoint}")
    return {"error": "timeout", "message": "API request timeout"}
    
except requests.RequestException as e:
    print(f"[ERROR] _request: –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è {method} {endpoint}: {e}")
    return {"error": "request_failed", "message": str(e)}
    
except Exception as e:
    print(f"[ERROR] _request: –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –¥–ª—è {method} {endpoint}: {e}")
    import traceback
    traceback.print_exc()
    return {"error": "unknown", "message": str(e)}
```

---

### 2. –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `create_spot_order()`

**–§–∞–π–ª:** `gate_api_client.py`  
**–ú–µ—Ç–æ–¥:** `create_spot_order()`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
print(f"[DEBUG] create_spot_order: –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ API...")

result = self._request('POST', '/spot/orders', data=order_data)

print(f"[DEBUG] create_spot_order: –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω")
print(f"[DEBUG] create_spot_order: result = {result}")

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–∫–∏ –≤ –æ—Ç–≤–µ—Ç–µ
if result and isinstance(result, dict):
    if 'error' in result:
        print(f"[ERROR] create_spot_order: API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É: {result.get('error')} - {result.get('message')}")
    elif 'id' in result:
        print(f"[SUCCESS] create_spot_order: –û—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ, ID={result['id']}")
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –¢–µ–ø–µ—Ä—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è:

1. **–¢–∞–π–º–∞—É—Ç 15 —Å–µ–∫—É–Ω–¥** - API –∑–∞–ø—Ä–æ—Å –Ω–µ –∑–∞–≤–∏—Å–Ω–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤** - –≤–æ–∑–≤—Ä–∞—Ç `{"error": "timeout"}` –≤–º–µ—Å—Ç–æ –∑–∞–≤–∏—Å–∞–Ω–∏—è
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–∫–∏
4. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–∏–¥–Ω–æ —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å –∫–æ–¥–æ–≤** - –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –æ—à–∏–±–∫–∏ API (4xx, 5xx)

### ‚úÖ –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

| –°–∏—Ç—É–∞—Ü–∏—è | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|----------|----------------|-------------------|
| –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç | ‚ùå –ó–∞–≤–∏—Å–∞–Ω–∏–µ –Ω–∞–≤–µ—á–Ω–æ | ‚úÖ –¢–∞–π–º–∞—É—Ç —á–µ—Ä–µ–∑ 15 —Å–µ–∫ + –æ—à–∏–±–∫–∞ |
| –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é | ‚ùå –ó–∞–≤–∏—Å–∞–Ω–∏–µ | ‚úÖ –í–æ–∑–≤—Ä–∞—Ç {"error": "request_failed"} |
| API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É | ‚ö†Ô∏è –û—à–∏–±–∫–∞ –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è | ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ + –æ—à–∏–±–∫–∞ |
| –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç + –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è ID |

---

## üéØ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã ADA

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **ADA –±–æ–ª—å—à–µ –Ω–µ –∑–∞–≤–∏—Å–Ω–µ—Ç** –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –æ—Ä–¥–µ—Ä
2. **–ï—Å–ª–∏ API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç** - –±—É–¥–µ—Ç —Ç–∞–π–º–∞—É—Ç —á–µ—Ä–µ–∑ 15 —Å–µ–∫—É–Ω–¥
3. **–¶–∏–∫–ª ADA —Å–±—Ä–æ—Å–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏
4. **–ù–æ–≤—ã–π —Ü–∏–∫–ª —Å–º–æ–∂–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å** –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```powershell
   python mTrade.py
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ ADA:**
   ```
   [ADA] üîÑ [DEBUG] –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ API...
   [DEBUG] _request: HTTP 201 –¥–ª—è POST /spot/orders
   [SUCCESS] create_spot_order: –û—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ, ID=xxxxx
   ```

3. **–ï—Å–ª–∏ —Ç–∞–π–º–∞—É—Ç:**
   ```
   [ERROR] _request: –¢–∞–π–º–∞—É—Ç (>15 —Å–µ–∫) –¥–ª—è POST /spot/orders
   [ADA] ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –æ—Ä–¥–µ—Ä –Ω–∞ –ø—Ä–æ–¥–∞–∂—É –æ—Å—Ç–∞—Ç–∫–æ–≤
   [ADA] ‚úÖ –¶–∏–∫–ª —Å–±—Ä–æ—à–µ–Ω –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
   - ADA –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å—Ç–∞—Ç—É—Å "–ù–µ –∞–∫—Ç–∏–≤–µ–Ω" –∏–ª–∏ "–ê–∫—Ç–∏–≤–µ–Ω" (–Ω–µ –∑–∞–≤–∏—Å—à–∏–π)
   - –ö–Ω–æ–ø–∫–∞ "–°—Ç–∞—Ä—Ç —Ü–∏–∫–ª–∞" –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ú–µ—Ç–æ–¥ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-------|-----------|
| `gate_api_client.py` | `_request()` | –î–æ–±–∞–≤–ª–µ–Ω `timeout=15` –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π |
| `gate_api_client.py` | `create_spot_order()` | –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |

---

## üõ°Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞

### –î–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

1. **`requests.Timeout`** - —Ç–∞–π–º–∞—É—Ç HTTP –∑–∞–ø—Ä–æ—Å–∞ (>15 —Å–µ–∫)
2. **`requests.RequestException`** - —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏ (–Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, DNS –∏ —Ç.–¥.)
3. **`Exception`** - –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
4. **HTTP —Å—Ç–∞—Ç—É—Å >= 400** - –æ—à–∏–±–∫–∏ API (4xx, 5xx)

–í—Å–µ –æ—à–∏–±–∫–∏ **–ª–æ–≥–∏—Ä—É—é—Ç—Å—è** –∏ **–Ω–µ –ø–∞–¥–∞—é—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É**.

---

## üéâ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

**‚úÖ –ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê:**
- –ó–∞–≤–∏—Å–∞–Ω–∏–µ API —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ
- –î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç 15 —Å–µ–∫—É–Ω–¥
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–±—Ä–∞–±–æ—Ç–∞–Ω—ã –≤—Å–µ –≤–∏–¥—ã –æ—à–∏–±–æ–∫

**‚úÖ ADA –¢–ï–ü–ï–†–¨ –î–û–õ–ñ–ï–ù –†–ê–ë–û–¢–ê–¢–¨:**
- –¶–∏–∫–ª –Ω–µ –∑–∞–≤–∏—Å–Ω–µ—Ç
- –û—à–∏–±–∫–∏ –±—É–¥—É—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-12-18  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û  
**–§–∞–π–ª—ã:** `gate_api_client.py`  
**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
