# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–∞—Ä–∞–º–µ—Ç—Ä log_sell

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê** –≤ `_try_sell`: –≤—ã–∑–æ–≤ `log_sell` —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞!

### –ë—ã–ª–æ (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
```python
self.logger.log_sell(
    currency=base,
    volume=filled_amount,
    price=executed_price,
    growth_percent=current_growth_pct,  # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
    pnl=pnl
)
```

### –°–∏–≥–Ω–∞—Ç—É—Ä–∞ log_sell:
```python
def log_sell(self, currency: str, volume: float, price: float, 
             delta_percent: float, pnl: float, source: str = "AUTO"):
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `delta_percent`, –∞ –Ω–µ `growth_percent`!**

–≠—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ **TypeError** –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞ –ø—Ä–æ–¥–∞–∂–∏:
- Python –ø–µ—Ä–µ–¥–∞–≤–∞–ª `growth_percent` –∫–∞–∫ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç, –Ω–æ `log_sell` –æ–∂–∏–¥–∞–µ—Ç `delta_percent`
- –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤–æ–∑–Ω–∏–∫–∞–ª–æ –í–ù–£–¢–†–ò –±–ª–æ–∫–∞ `try-except`, –Ω–æ **–º–æ–ª—á–∞ –ø—Ä–æ–≥–ª–∞—Ç—ã–≤–∞–ª–æ—Å—å** (—Ç–æ–ª—å–∫–æ –ø–µ—á–∞—Ç–∞–ª–æ—Å—å –≤ –∫–æ–Ω—Å–æ–ª—å)
- –í —Ñ–∞–π–ª –ª–æ–≥–∞ –∑–∞–ø–∏—Å—å **–ù–ï –ø–æ–ø–∞–¥–∞–ª–∞**

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –°—Ç–∞–ª–æ (–ü–†–ê–í–ò–õ–¨–ù–û):
```python
self.logger.log_sell(
    currency=base,
    volume=filled_amount,
    price=executed_price,
    delta_percent=current_growth_pct,  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
    pnl=pnl,
    source="AUTO"  # –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä–∫–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–¥–∞–∂–∏
)
```

## üîç –ü–æ—á–µ–º—É –æ—à–∏–±–∫–∞ –Ω–µ –±—ã–ª–∞ –≤–∏–¥–Ω–∞ —Ä–∞–Ω—å—à–µ?

1. **–ë–ª–æ–∫ try-except –ø—Ä–æ–≥–ª–∞—Ç—ã–≤–∞–ª –∏—Å–∫–ª—é—á–µ–Ω–∏–µ**:
   ```python
   except Exception as log_error:
       print(f"[{base}] ‚ö†Ô∏è [WARN] –û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥: {log_error}")
   ```
   –û—à–∏–±–∫–∞ –≤—ã–≤–æ–¥–∏–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª—å, –Ω–æ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∞ —Ä–∞–±–æ—Ç—É —Ç—Ä–µ–π–¥–µ—Ä–∞.

2. **–í –ª–æ–≥–∞—Ö system_trader.log –µ—ë –Ω–µ –±—ã–ª–æ** ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤–æ–∑–Ω–∏–∫–∞–ª–æ –î–û –≤—ã–∑–æ–≤–∞ `logging.info()` –≤–Ω—É—Ç—Ä–∏ `log_sell`.

3. **–ü–µ—Ä–≤–∞—è –ø—Ä–æ–¥–∞–∂–∞ –±—ã–ª–∞ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∞** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, —Ç–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥—Ä—É–≥–æ–π –∫–æ–¥ –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—ã–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏.

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å **–í–°–ï –ø—Ä–æ–¥–∞–∂–∏ –±—É–¥—É—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ**:
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –õ–æ–≥ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª `trade_logs/{CURRENCY}_logs.jsonl`
- –í –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ `‚úÖ –ü—Ä–æ–¥–∞–∂–∞ –∑–∞–ø–∏—Å–∞–Ω–∞ –≤ –ª–æ–≥`
- –ú–∞—Ä–∫–µ—Ä `[AUTO]` –≤ –ª–æ–≥–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–¥–∞–∂–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–¥–∞–∂–∏ (–∫–æ–≥–¥–∞ —Ä—ã–Ω–æ–∫ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç breakeven)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:
   ```
   [ETH] ‚úÖ –ü—Ä–æ–¥–∞–∂–∞ –∑–∞–ø–∏—Å–∞–Ω–∞ –≤ –ª–æ–≥ (—Ä–æ—Å—Ç=X.XX%, PnL=X.XXXX USDT)
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `trade_logs/ETH_logs.jsonl` ‚Äî –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å —Ç–∏–ø–∞ `"type": "sell"`
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **–í–°–ï –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–¥–∞–∂–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è**, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–∞—è

## üöÄ –°—Ç–∞—Ç—É—Å

‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** –≤ `autotrader_v2.py` (—Å—Ç—Ä–æ–∫–∞ ~1344)

---

*–î–∞—Ç–∞: 2025-01-XX*
*–§–∞–π–ª: autotrader_v2.py, –º–µ—Ç–æ–¥ _try_sell*
