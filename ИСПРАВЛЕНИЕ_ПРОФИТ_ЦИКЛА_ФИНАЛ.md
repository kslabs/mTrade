# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç –ø—Ä–æ—Ñ–∏—Ç–∞ –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

**–ë—ã–ª–æ:**
- –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ –≤ –∫–æ–ª–æ–Ω–∫–µ "–ò–Ω–≤–µ—Å—Ç" –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å —Å—É–º–º–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–æ–∫—É–ø–∫–∏
- –ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ –ø—Ä–æ—Ñ–∏—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞–ª—Å—è –∏–ª–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–Ω—è—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–∏–±—ã–ª—å –æ—Ç —Ü–∏–∫–ª–∞

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ - "–ò–Ω–≤–µ—Å—Ç" –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ù–ê–ö–û–ü–ò–¢–ï–õ–¨–ù–£–Æ —Å—É–º–º—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
- –ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ - –ø—Ä–æ—Ñ–∏—Ç = (—Å—É–º–º–∞ –æ—Ç –ø—Ä–æ–¥–∞–∂–∏) - (—Å—É–º–º–∞ –≤—Å–µ—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ —Ü–∏–∫–ª–µ)

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `trade_logger.py`

### 1. –ú–µ—Ç–æ–¥ `log_buy` - –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–∞—è —Å—É–º–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π

**–î–æ:**
```python
print(f"...–ò–Ω–≤–µ—Å—Ç:{investment:.4f}}}")  # –ü–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â—É—é –ø–æ–∫—É–ø–∫—É
```

**–ü–æ—Å–ª–µ:**
```python
# –ò–Ω–≤–µ—Å—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ù–ê–ö–û–ü–ò–¢–ï–õ–¨–ù–£–Æ —Å—É–º–º—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π (total_invested)
print(f"...–ò–Ω–≤–µ—Å—Ç:{self.total_invested[currency]:.4f}}}")  # –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–∞—è —Å—É–º–º–∞
```

### 2. –ú–µ—Ç–æ–¥ `log_sell` - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç –ø—Ä–æ—Ñ–∏—Ç–∞

**–î–æ:**
```python
# –ü—Ä–æ—Ñ–∏—Ç = —Ç–æ–ª—å–∫–æ PnL —Ç–µ–∫—É—â–µ–π –ø—Ä–æ–¥–∞–∂–∏ (–ù–ï –ù–ê–ö–ê–ü–õ–ò–í–ê–ï–¢–°–Ø)
current_profit = pnl

self.total_invested[currency] -= volume_quote  # –£–º–µ–Ω—å—à–∞–ª–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
```

**–ü–æ—Å–ª–µ:**
```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–´–ô –†–ê–°–ß–Å–¢ –ü–†–û–§–ò–¢–ê:
# –ü—Ä–æ—Ñ–∏—Ç = (—Å—É–º–º–∞ –æ—Ç –ø—Ä–æ–¥–∞–∂–∏) - (—Å—É–º–º–∞ –≤—Å–µ—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ —Ü–∏–∫–ª–µ)
cycle_profit = volume_quote - self.total_invested[currency]

# –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—É–º–º—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –¥–æ –æ–±–Ω—É–ª–µ–Ω–∏—è (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ª–æ–≥–µ)
total_invested_before = self.total_invested[currency]

# –ü–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏ –æ–±–Ω—É–ª—è–µ–º –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ (—Ü–∏–∫–ª –∑–∞–≤–µ—Ä—à—ë–Ω)
self.total_invested[currency] = 0.0
```

### 3. –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å

**–ü–æ–∫—É–ø–∫–∞:**
```python
# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—É—é —Å—É–º–º—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
print(f"[{time}] [{currency}] üü¢ Buy{{
    {volume_quote:.4f}; 
    –ö—É—Ä—Å:{price:.4f}; 
    ‚ÜìŒî%:{delta_percent:.2f}; 
    ‚Üì%:{total_drop_percent:.2f}; 
    –ò–Ω–≤–µ—Å—Ç:{self.total_invested[currency]:.4f}
}}")
```

**–ü—Ä–æ–¥–∞–∂–∞:**
```python
# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Ñ–∏—Ç —Ü–∏–∫–ª–∞ –∏ —Å—É–º–º—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
print(f"[{time}] [{currency}] {source_marker} Sell{{
    {volume_quote:.4f}; 
    –ö—É—Ä—Å:{price:.4f}; 
    ‚ÜëŒî%:{delta_percent:.2f}; 
    PnL:{pnl_str}; 
    –ü—Ä–æ—Ñ–∏—Ç:{profit_str};  # = —Å—É–º–º–∞ –ø—Ä–æ–¥–∞–∂–∏ - –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
    –ò–Ω–≤–µ—Å—Ç:{total_invested_before:.4f}
}}")
```

## üí° –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä —Ü–∏–∫–ª–∞:

#### –®–∞–≥ 1: –ü–æ–∫—É–ø–∫–∞ 1
- –°—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏: `10 USDT`
- **–ò–Ω–≤–µ—Å—Ç:** `10 USDT` ‚Üê –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–∞—è —Å—É–º–º–∞

#### –®–∞–≥ 2: –î–æ–∫—É–ø–∫–∞ 1
- –°—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏: `20 USDT`
- **–ò–Ω–≤–µ—Å—Ç:** `30 USDT` ‚Üê 10 + 20

#### –®–∞–≥ 3: –î–æ–∫—É–ø–∫–∞ 2
- –°—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏: `40 USDT`
- **–ò–Ω–≤–µ—Å—Ç:** `70 USDT` ‚Üê 10 + 20 + 40

#### –®–∞–≥ 4: –ü—Ä–æ–¥–∞–∂–∞
- –°—É–º–º–∞ –ø—Ä–æ–¥–∞–∂–∏: `85 USDT`
- –°—É–º–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π: `70 USDT`
- **–ü—Ä–æ—Ñ–∏—Ç:** `15 USDT` ‚Üê 85 - 70 = +15 USDT ‚úÖ
- **–ò–Ω–≤–µ—Å—Ç:** `70 USDT` ‚Üê –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∫–æ–ª—å–∫–æ –±—ã–ª–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
- –ü–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏: `total_invested[currency]` –æ–±–Ω—É–ª—è–µ—Ç—Å—è (—Ü–∏–∫–ª –∑–∞–≤–µ—Ä—à—ë–Ω)

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ –∫–æ–ª–æ–Ω–∫–∞ "–ò–Ω–≤–µ—Å—Ç" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—É—é —Å—É–º–º—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
- ‚úÖ –ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ –ø—Ä–æ—Ñ–∏—Ç = (—Å—É–º–º–∞ –æ—Ç –ø—Ä–æ–¥–∞–∂–∏) - (–≤—Å–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ —Ü–∏–∫–ª–µ)
- ‚úÖ –ü–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –æ–±–Ω—É–ª—è—é—Ç—Å—è (–≥–æ—Ç–æ–≤—ã –∫ –Ω–æ–≤–æ–º—É —Ü–∏–∫–ª—É)
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å –æ—Ç —Ü–∏–∫–ª–∞ –≤–∏–¥–Ω–∞ —Å—Ä–∞–∑—É
- ‚úÖ –û—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ –Ω–µ—Ç

## üöÄ –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–∫—É–ø–æ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ "–ò–Ω–≤–µ—Å—Ç" —Ä–∞—Å—Ç—ë—Ç —Å –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–æ–π
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø—Ä–æ–¥–∞–∂–∏
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ "–ü—Ä–æ—Ñ–∏—Ç" = (—Å—É–º–º–∞ –ø—Ä–æ–¥–∞–∂–∏) - (—Å—É–º–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π)

---

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!** ‚úÖ  
**–§–∞–π–ª:** `trade_logger.py`  
**–î–∞—Ç–∞:** 2025-12-12
