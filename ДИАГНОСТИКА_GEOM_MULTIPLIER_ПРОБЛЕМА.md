# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å geom_multiplier

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê
–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ "–ú–Ω–æ–∂–∏—Ç–µ–ª—å –≥–µ–æ–º–µ—Ç—Ä–∏–∏" (geom_multiplier) –Ω–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–∞–±–ª–∏—Ü–∞ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ **–ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è**.

## ‚úÖ –ß–¢–û –ü–†–û–í–ï–†–ï–ù–û
1. **JS –∫–æ–¥** (static/app.js):
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—è `paramGeomMultiplier` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—Å—Ç—Ä–æ–∫–∞ 2356-2390)
   - ‚úÖ –§—É–Ω–∫—Ü–∏—è `loadBreakEvenTable()` —á–∏—Ç–∞–µ—Ç geom_multiplier –∏–∑ DOM (—Å—Ç—Ä–æ–∫–∞ 1557)
   - ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ URL –∑–∞–ø—Ä–æ—Å–∞ (—Å—Ç—Ä–æ–∫–∞ 1595)
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

2. **API** (trade_params_routes.py):
   - ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `geom_multiplier` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ query string (—Å—Ç—Ä–æ–∫–∞ 179-186)
   - ‚úÖ –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

3. **–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä** (breakeven_calculator.py):
   - ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `geom_multiplier` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º—É–ª–µ (—Å—Ç—Ä–æ–∫–∞ 145)
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## üö® –ù–ê–ô–î–ï–ù–ê –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê!

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ1: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Ü–∏–∫–ª–µ
**–§–∞–π–ª**: `static/app.js`, —Å—Ç—Ä–æ–∫–∏ **1501-1543**

```javascript
// üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–π —Ü–∏–∫–ª —Å —Ç–∞–±–ª–∏—Ü–µ–π
// –ï—Å–ª–∏ —Ü–∏–∫–ª –∞–∫—Ç–∏–≤–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ–º –°–û–•–†–ê–ù–Å–ù–ù–£–Æ —Ç–∞–±–ª–∏—Ü—É –∏–∑ /api/trade/indicators
// –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ—Å—á—ë—Ç —Ç–∞–±–ª–∏—Ü—ã —Å —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–æ–π!
try {
  const indicatorsResp = await fetch(`/api/trade/indicators?base_currency=${currentBaseCurrency}&quote_currency=${currentQuoteCurrency}&include_table=1`);
  const indicatorsData = await indicatorsResp.json();
  
  if (indicatorsData.success && indicatorsData.autotrade_levels) {
    const levels = indicatorsData.autotrade_levels;
    
    if (levels.active_cycle && levels.table && levels.table.length > 0) {
      // ‚úÖ –¶–∏–∫–ª –∞–∫—Ç–∏–≤–µ–Ω –∏ —Ç–∞–±–ª–∏—Ü–∞ –µ—Å—Ç—å - –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë!
      console.log(`[BREAKEVEN] ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É —Ü–∏–∫–ª–∞`);
      
      renderBreakEvenTable(levels.table);
      return; // ‚¨ÖÔ∏è –í–´–•–û–î–ò–ú, –ù–ï –î–ï–õ–ê–ï–ú –ü–ï–†–ï–°–ß–Å–¢!
    }
  }
}
```

**–í–´–í–û–î**: –ï—Å–ª–∏ —Ç–æ—Ä–≥–æ–≤—ã–π —Ü–∏–∫–ª –∞–∫—Ç–∏–≤–µ–Ω, —Ç–∞–±–ª–∏—Ü–∞ **–ù–ï –ë–£–î–ï–¢** –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤!

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2: –í–æ–∑–º–æ–∂–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ
–ï—Å–ª–∏ —Ü–∏–∫–ª –ù–ï –∞–∫—Ç–∏–≤–µ–Ω, –Ω–æ —Ç–∞–±–ª–∏—Ü–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤–∏–∑—É–∞–ª—å–Ω–æ, –≤–æ–∑–º–æ–∂–Ω–æ:
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `renderBreakEvenTable()`
- –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## üéØ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ü–∏–∫–ª–∞
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
fetch('/api/trade/indicators?base_currency=WLD&quote_currency=USDT&include_table=1')
  .then(r => r.json())
  .then(d => console.log('Active cycle:', d.autotrade_levels?.active_cycle));
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- `false` –∏–ª–∏ `undefined` ‚Äî —Ü–∏–∫–ª –ù–ï –∞–∫—Ç–∏–≤–µ–Ω, —Ç–∞–±–ª–∏—Ü–∞ –î–û–õ–ñ–ù–ê –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è
- `true` ‚Äî —Ü–∏–∫–ª –∞–∫—Ç–∏–≤–µ–Ω, —Ç–∞–±–ª–∏—Ü–∞ –ù–ï –ë–£–î–ï–¢ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è

### –®–∞–≥ 2: –¢–µ—Å—Ç –ø–µ—Ä–µ—Å—á—ë—Ç–∞ (–µ—Å–ª–∏ —Ü–∏–∫–ª –ù–ï –∞–∫—Ç–∏–≤–µ–Ω)
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ò–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–æ–ª–µ "–ú–Ω–æ–∂–∏—Ç–µ–ª—å –≥–µ–æ–º–µ—Ç—Ä–∏–∏"
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:

```
[PARAMS_CHANGE] üîÑ –ü–æ–ª–µ "paramGeomMultiplier" –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞: 3
[PARAMS_CHANGE] ‚öôÔ∏è –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Ç–∞–±–ª–∏—Ü—ã:
  - paramGeomMultiplier: 3
[BREAKEVEN] üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ —Ñ–æ—Ä–º—ã: {geom_multiplier: 3, ...}
[BREAKEVEN] üî¢ geom_multiplier: 3
[BREAKEVEN] üåê URL –∑–∞–ø—Ä–æ—Å–∞: /api/breakeven/table?...&geom_multiplier=3...
[BREAKEVEN] üì• –û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞: {success: true, table: [...], params: {...}}
[BREAKEVEN] üî¢ geom_multiplier –∏–∑ –æ—Ç–≤–µ—Ç–∞: 3
```

4. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ):

```
[BREAKEVEN_TABLE] üîç –í—Ö–æ–¥—è—â–∏–µ query params: {'geom_multiplier': '3', ...}
[BREAKEVEN_TABLE] ‚úÖ geom_multiplier –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω: 3.0
[BREAKEVEN_CALC] üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å—á—ë—Ç–∞:
  - geom_multiplier: 3.0 ‚¨ÖÔ∏è –ú–ù–û–ñ–ò–¢–ï–õ–¨ –ì–ï–û–ú–ï–¢–†–ò–ò
```

### –®–∞–≥ 3: –ï—Å–ª–∏ –ª–æ–≥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, –Ω–æ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `renderBreakEvenTable()`:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫:
const originalRender = renderBreakEvenTable;
renderBreakEvenTable = function(table) {
  console.log('üñºÔ∏è RENDER –≤—ã–∑–≤–∞–Ω, —Å—Ç—Ä–æ–∫:', table.length);
  if(table.length > 0) {
    console.log('–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞:', table[0]);
    console.log('–í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞:', table[1]);
  }
  return originalRender(table);
};
```

## üõ†Ô∏è –í–û–ó–ú–û–ñ–ù–´–ï –†–ï–®–ï–ù–ò–Ø

### –†–µ—à–µ–Ω–∏–µ 1: –ï—Å–ª–∏ —Ü–∏–∫–ª –≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω
**–ü—Ä–æ–±–ª–µ–º–∞**: –¶–∏–∫–ª –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏

**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ endpoint `/api/trade/indicators`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `active_cycle` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ `false`
3. –ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É —Ü–∏–∫–ª–∞ –≤ `app.js` (—Å—Ç—Ä–æ–∫–∏ 1501-1543)

### –†–µ—à–µ–Ω–∏–µ 2: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç
–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É" –∫–æ—Ç–æ—Ä–∞—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∫—ç—à:

```javascript
async function forceRecalculateTable() {
  console.log('[FORCE_RECALC] –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç...');
  
  const currentParams = {
    steps: parseInt($('paramSteps')?.value) || 16,
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ...
    geom_multiplier: parseFloat($('paramGeomMultiplier')?.value) || 2,
  };
  
  const params = new URLSearchParams({
    base_currency: currentBaseCurrency,
    ...currentParams,
    force_recalc: '1'  // –§–ª–∞–≥ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ—Å—á—ë—Ç–∞
  });
  
  const r = await fetch(`/api/breakeven/table?${params.toString()}`);
  const d = await r.json();
  
  if(d.success && d.table){
    renderBreakEvenTable(d.table);
  }
}
```

### –†–µ—à–µ–Ω–∏–µ 3: –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
–í `app.js` –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

```javascript
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
let lastUsedParams = null;

async function loadBreakEvenTable(){
  // –ß–∏—Ç–∞–µ–º —Ç–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  const currentParams = {
    geom_multiplier: parseFloat($('paramGeomMultiplier')?.value) || 2,
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ ...
  };
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  const paramsChanged = !lastUsedParams || 
    JSON.stringify(lastUsedParams) !== JSON.stringify(currentParams);
  
  if (paramsChanged) {
    console.log('[BREAKEVEN] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑–º–µ–Ω–∏–ª–∏—Å—å, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç!');
    lastUsedParams = currentParams;
    // ... –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Ü–∏–∫–ª–∞ ...
  }
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
}
```

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò
1. ‚úÖ –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç—ã –ø–æ –®–∞–≥–∞–º 1-3
2. ‚è≥ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É (—Ü–∏–∫–ª? —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥? –¥—Ä—É–≥–æ–µ?)
3. ‚è≥ –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ
4. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## üéì –í–ê–ñ–ù–û–ï –ó–ê–ú–ï–ß–ê–ù–ò–ï
–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Ü–∏–∫–ª–µ ‚Äî —ç—Ç–æ **–∑–∞—â–∏—Ç–Ω–∞—è –º–µ—Ä–∞**, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–≥ —Å–ª—É—á–∞–π–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤–æ –≤—Ä–µ–º—è —Ç–æ—Ä–≥–æ–≤–ª–∏. –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ!

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥
2. –ü—Ä–æ–¥–∞–π—Ç–µ –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏
3. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥ –∑–∞–Ω–æ–≤–æ
