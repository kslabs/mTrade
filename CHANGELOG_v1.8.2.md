# Changelog v1.8.2 - Error Transparency

**–î–∞—Ç–∞:** 2024  
**–§–æ–∫—É—Å:** –ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### Backend (`mTrade.py`)

#### Endpoints `/api/trade/buy-min` –∏ `/api/trade/sell-all`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å–ª–æ–≤–∞—Ä—å `diagnostic_info` –¥–ª—è —Å–±–æ—Ä–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –í—Å–µ –≤–æ–∑–≤—Ä–∞—Ç—ã –æ—à–∏–±–æ–∫ —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞—é—Ç –ø–æ–ª–µ `details` —Å –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ä–¥–µ—Ä–±—É–∫–µ (—Ç–æ–ø-5 –ø–æ–∑–∏—Ü–∏–π bids/asks)
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∞–ø –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –æ—à–∏–±–∫–∏ (`error_stage`)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–æ–∫ API (`label`, `message`)

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç:**
- –¢–æ—Ä–≥–æ–≤—É—é –ø–∞—Ä—É –∏ –≤–∞–ª—é—Ç—ã
- –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å (USDT –¥–ª—è –ø–æ–∫—É–ø–∫–∏, –±–∞–∑–æ–≤–æ–π –≤–∞–ª—é—Ç—ã –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏)
- Best bid/ask –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞
- –†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ä–¥–µ—Ä–∞ (amount, price, total)
- Snapshot –æ—Ä–¥–µ—Ä–±—É–∫–∞ (—Ç–æ–ø-5)
- –†–µ–∂–∏–º —Å–µ—Ç–∏ (test/work)
- –≠—Ç–∞–ø –æ—à–∏–±–∫–∏ –∏ –¥–µ—Ç–∞–ª–∏

### Frontend (`static/app.js`)

#### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `handleBuyMin()` –∏ `handleSellAll()`
- ‚úÖ –ü—Ä–∏ –æ—à–∏–±–∫–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `d.details`
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è snapshot –æ—Ä–¥–µ—Ä–±—É–∫–∞ (—Ç–æ–ø-3 –ø–æ–∑–∏—Ü–∏–∏)
- ‚úÖ –í—ã–≤–æ–¥—è—Ç—Å—è –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ API –≤ —á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ

**–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–µ:**
- –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
- –¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞
- –≠—Ç–∞–ø –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –æ—à–∏–±–∫–∏
- –ë–∞–ª–∞–Ω—Å (—Ç–µ–∫—É—â–∏–π –∏ —Ç—Ä–µ–±—É–µ–º—ã–π)
- –î–∞–Ω–Ω—ã–µ —Å—Ç–∞–∫–∞–Ω–∞ (best bid/ask, —Ç–æ–ø-3)
- –†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (amount, price, total)
- –û—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ (–¥–ª—è sell)
- –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ API (label, message)
- –†–µ–∂–∏–º —Å–µ—Ç–∏

## üìã –ü—Ä–∏–º–µ—Ä—ã

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```
‚ùå –û—à–∏–±–∫–∞ –ø–æ–∫—É–ø–∫–∏
–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ USDT –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏
```
*–ù–µ–ø–æ–Ω—è—Ç–Ω–æ: —Å–∫–æ–ª—å–∫–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç, –∫–∞–∫–æ–π –±–∞–ª–∞–Ω—Å, –∫–∞–∫–∞—è —Ü–µ–Ω–∞*

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```
‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ USDT –¥–ª—è –ø–æ–∫—É–ø–∫–∏ (–±–∞–ª–∞–Ω—Å: 5.2, —Ç—Ä–µ–±—É–µ—Ç—Å—è: 10.0)

–ü–∞—Ä–∞: DOGE_USDT
–≠—Ç–∞–ø –æ—à–∏–±–∫–∏: insufficient_balance
–ë–∞–ª–∞–Ω—Å USDT: 5.2
–¢—Ä–µ–±—É–µ—Ç—Å—è: 10.0 USDT

–°—Ç–∞–∫–∞–Ω (best ask): 0.072
–°—Ç–∞–∫–∞–Ω (best bid): 0.071
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 138.89 DOGE
–¶–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è: 0.07272

–°—Ç–∞–∫–∞–Ω (asks, —Ç–æ–ø-3):
  0.072 √ó 1500
  0.073 √ó 2000
  0.074 √ó 1000

–†–µ–∂–∏–º: test
```
*–ü–æ–ª–Ω–∞—è —è—Å–Ω–æ—Å—Ç—å: –≤—Å—è –Ω—É–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏*

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `diagnostic_info` (buy)
```python
diagnostic_info = {
    'pair': 'DOGE_USDT',
    'base_currency': 'DOGE',
    'quote_currency': 'USDT',
    'balance_usdt': 5.2,
    'best_ask': 0.072,
    'best_bid': 0.071,
    'orderbook_asks': [[0.072, 1500], [0.073, 2000], ...],
    'orderbook_bids': [[0.071, 1200], [0.070, 1800], ...],
    'amount': 138.89,
    'execution_price': 0.07272,
    'start_volume': 10.0,
    'api_min_quote': 3.0,
    'network_mode': 'test',
    'error_stage': 'insufficient_balance',
    'api_error': {'label': '...', 'message': '...'} # if applicable
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `diagnostic_info` (sell)
```python
diagnostic_info = {
    'pair': 'DOGE_USDT',
    'base_currency': 'DOGE',
    'quote_currency': 'USDT',
    'balance': 0.5,
    'best_bid': 0.071,
    'best_ask': 0.072,
    'orderbook_bids': [[0.071, 1200], ...],
    'orderbook_asks': [[0.072, 1500], ...],
    'amount': 0.5,
    'execution_price': 0.07029,
    'total': 0.0355,
    'cancelled_orders': 0,
    'network_mode': 'test',
    'error_stage': 'api_error_INVALID_PARAM_VALUE',
    'api_error': {'label': 'INVALID_PARAM_VALUE', 'message': 'Amount too small'}
}
```

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤—Å—ë, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ
2. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ª–µ–≥–∫–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É –ø—Ä–æ–±–ª–µ–º—ã
3. **–ö–æ–ø–∏—Ä—É–µ–º–æ—Å—Ç—å** - –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π
4. **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ** - –≤—Å–µ –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ
5. **–î–æ–≤–µ—Ä–∏–µ** - —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Å–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `ERROR_TRANSPARENCY_COMPLETE.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `ERROR_TRANSPARENCY_QUICKSTART.md` - –∫—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞
- `CHANGELOG_v1.8.2.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

- [x] Backend —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [x] Frontend —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ testnet
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ testnet —Ä–µ–∂–∏–º–µ –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –±–∞–ª–∞–Ω—Å, –º–∞–ª—ã–π amount, –æ—à–∏–±–∫–∏ API) –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ production.
