# üêõ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –¶–∏–∫–ª –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª—Å—è –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏

## –î–∞—Ç–∞: 6 –¥–µ–∫–∞–±—Ä—è 2025
## –í–µ—Ä—Å–∏—è: 1.5.2

---

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê

**–°–∏–º–ø—Ç–æ–º:** –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ, –Ω–æ —Ü–∏–∫–ª –æ—Å—Ç–∞–≤–∞–ª—Å—è **–ù–ï –∞–∫—Ç–∏–≤–Ω—ã–º** (`active=False`)

**–õ–æ–≥–∏:**
```
[06:11:56] [ETH] Buy{10.0291; ...}  ‚Üê –ø–æ–∫—É–ø–∫–∞ –ø—Ä–æ—à–ª–∞
[06:12:13] [ETH] Buy{10.0290; ...}  ‚Üê –î–£–ë–õ–ò–ö–ê–¢! –¶–∏–∫–ª –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!
```

---

## üîç –ü–†–ò–ß–ò–ù–ê

–í –º–µ—Ç–æ–¥–µ `_try_start_cycle_impl` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø–æ–∫—É–ø–∫–∏ –±—ã–ª–æ **–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —Ü–∏–∫–ª–∞**:

### ‚ùå –°—Ç–∞—Ä—ã–π –∫–æ–¥ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π):
```python
# 1. –û–±–Ω–æ–≤–ª—è–µ–º cycle
cycle.update({
    'active': True,
    'active_step': 0,
    ...
})

cycle['last_sell_time'] = 0

# 2. –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –í –ü–ê–ú–Ø–¢–¨
self.cycles[base] = cycle  # ‚Üê –ü–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è)

print("–¶–∏–∫–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω...")

# 3. –û–±–Ω–æ–≤–ª—è–µ–º –õ–û–ö–ê–õ–¨–ù–£–Æ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é cycle
try:
    cycle['just_started'] = True  # ‚Üê –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π cycle
except Exception:
    pass

# 4. –ü–ï–†–ï–ó–ê–ü–ò–°–´–í–ê–ï–ú –í –ü–ê–ú–Ø–¢–¨
self.cycles[base] = cycle  # ‚Üê –ü–†–û–ë–õ–ï–ú–ê! –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –°–¢–ê–†–´–ô cycle (–¥–æ update)!
self._save_cycles_state()
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**
1. ‚úÖ `cycle.update({'active': True, ...})` - –æ–±–Ω–æ–≤–∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
2. ‚úÖ `self.cycles[base] = cycle` - –∑–∞–ø–∏—Å–∞–ª–∏ –≤ –ø–∞–º—è—Ç—å (**–∞–∫—Ç–∏–≤–µ–Ω**)
3. ‚ùå –ú–µ–∂–¥—É –∑–∞–ø–∏—Å—è–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –¥—Ä—É–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (print, try-except)
4. ‚ùå `self.cycles[base] = cycle` - **–ü–ï–†–ï–ó–ê–ü–ò–°–ê–õ–ò –°–¢–ê–†–´–ú** –æ–±—ä–µ–∫—Ç–æ–º!

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í `self.cycles[base]` –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **–°–¢–ê–†–´–ô** –æ–±—ä–µ–∫—Ç cycle (–¥–æ `update`), —É –∫–æ—Ç–æ—Ä–æ–≥–æ `active=False`!

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

–£–±—Ä–∞–ª–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∏ –æ–±—ä–µ–¥–∏–Ω–∏–ª–∏ –≤—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ **–û–î–ò–ù** –≤—ã–∑–æ–≤ `update()`:

### ‚úÖ –ù–æ–≤—ã–π –∫–æ–¥ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π):
```python
# 1. –û–±–Ω–æ–≤–ª—è–µ–º –í–°–ï –ø–æ–ª—è –∑–∞ –û–î–ò–ù —Ä–∞–∑
cycle.update({
    'active': True,
    'active_step': 0,
    'last_buy_price': actual_buy_price,
    'start_price': actual_buy_price,
    'total_invested_usd': invest,
    'base_volume': filled,
    'cycle_activated_at': buy_completed_at,
    'last_sell_time': 0,           # ‚Üê –ü–µ—Ä–µ–Ω–µ—Å–ª–∏ —Å—é–¥–∞
    'just_started': True           # ‚Üê –ü–µ—Ä–µ–Ω–µ—Å–ª–∏ —Å—é–¥–∞
})

# 2. –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –í –ü–ê–ú–Ø–¢–¨ –û–î–ò–ù –†–ê–ó
self.cycles[base] = cycle

print("–¶–∏–∫–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω...")

# 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ñ–∞–π–ª
self._save_cycles_state()
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- ‚úÖ –í—Å–µ –ø–æ–ª—è –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è **–ê–¢–û–ú–ê–†–ù–û** –≤ –æ–¥–Ω–æ–º `update()`
- ‚úÖ –ó–∞–ø–∏—Å—å –≤ –ø–∞–º—è—Ç—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–û–î–ò–ù –†–ê–ó**
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- ‚úÖ –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ä—ã–º –æ–±—ä–µ–∫—Ç–æ–º

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|----------|----------------|-------------------|
| –ó–∞–ø–∏—Å–µ–π –≤ `self.cycles[base]` | **2** (–¥—É–±–ª–∏–∫–∞—Ç) | **1** |
| –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ü–∏–∫–ª–∞ | ‚ùå –ù–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | ‚úÖ –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç |
| –î—É–±–ª–∏—Ä—É—é—â–∏–µ –ø–æ–∫—É–ø–∫–∏ | ‚úÖ –ï—Å—Ç—å | ‚ùå –ù–µ—Ç |
| –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è | ‚úÖ –ï—Å—Ç—å | ‚ùå –ù–µ—Ç |

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
```
[06:11:56] [ETH] Buy{10.0291; ...}  ‚Üê –ø–æ–∫—É–ø–∫–∞
[ETH] üéØ –¶–∏–∫–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω: active=True
[06:11:57] [ETH] –¶–∏–∫–ª –ê–ö–¢–ò–í–ï–ù, –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–¥–∞–∂—É/—É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ
```

### –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
[06:11:56] [ETH] Buy{10.0291; ...}  ‚Üê –ø–µ—Ä–≤–∞—è –ø–æ–∫—É–ø–∫–∞
[06:12:13] [ETH] Buy{10.0290; ...}  ‚Üê –î–£–ë–õ–ò–ö–ê–¢ ‚ùå
```

---

## üìÅ –§–ê–ô–õ–´

**–ò–∑–º–µ–Ω—ë–Ω:**
- `c:\Users\–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä\Documents\bGate.mTrade\autotrader.py`
  - –ú–µ—Ç–æ–¥: `_try_start_cycle_impl` (—Å—Ç—Ä–æ–∫–∏ ~1086-1105)

**–°–æ–∑–¥–∞–Ω:**
- `CYCLE_ACTIVATION_BUG_FIX.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

---

## ‚úÖ –°–¢–ê–¢–£–°

**‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û**
**‚úÖ –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω (0 –æ—à–∏–±–æ–∫)**
**‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é**

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å autotrader: `.\restart_autotrader.bat`
2. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏: `Select-String -Path system_trader.log -Pattern "–¶–∏–∫–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω"`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ **–ù–ï–¢** –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –ø–æ–∫—É–ø–æ–∫
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ —Ü–∏–∫–ª —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **–ê–ö–¢–ò–í–ù–´–ú**

---

**–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —Ü–∏–∫–ª–∞  
**–†–µ—à–µ–Ω–∏–µ:** –ê—Ç–æ–º–∞—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
