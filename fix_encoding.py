"""–°–∫—Ä–∏–ø—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–∏ autotrader.py"""
import re

print("üîß –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ autotrader.py –∏–∑ –±—ç–∫–∞–ø–∞...")

# –ß–∏—Ç–∞–µ–º –±—ç–∫–∞–ø —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
with open('autotrader_backup_20251205_181530.py', 'r', encoding='utf-8') as f:
    content = f.read()

print(f"‚úÖ –ü—Ä–æ—á–∏—Ç–∞–Ω –±—ç–∫–∞–ø: {len(content)} —Å–∏–º–≤–æ–ª–æ–≤")

# –£–¥–∞–ª—è–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ (3+ –ø–æ–¥—Ä—è–¥ -> 2)
content_optimized = re.sub(r'\n\n\n+', '\n\n', content)

print(f"‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏")
print(f"   –°–æ–∫—Ä–∞—â–µ–Ω–æ: {len(content) - len(content_optimized)} —Å–∏–º–≤–æ–ª–æ–≤")

# –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π UTF-8 –±–µ–∑ BOM
with open('autotrader.py', 'w', encoding='utf-8') as f:
    f.write(content_optimized)

print(f"‚úÖ –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—ë–Ω: autotrader.py")

# –ü—Ä–æ–≤–µ—Ä–∫–∞
with open('autotrader.py', 'r', encoding='utf-8') as f:
    check = f.read()
    
print(f"\nüìä –ü—Ä–æ–≤–µ—Ä–∫–∞:")
print(f"   –†–∞–∑–º–µ—Ä: {len(check)} —Å–∏–º–≤–æ–ª–æ–≤")
print(f"   –ü–µ—Ä–≤—ã–µ 100 —Å–∏–º–≤–æ–ª–æ–≤:")
print(f"   {check[:100]}")

if "–ê–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä" in check[:200]:
    print("\n‚úÖ –£–°–ü–ï–•: –ö–æ–¥–∏—Ä–æ–≤–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!")
else:
    print("\n‚ùå –û–®–ò–ë–ö–ê: –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –æ—Å—Ç–∞–ª–∏—Å—å")
