# Проверка консистентности активных циклов автотрейдера

Добавлена защита при восстановлении состояния автотрейдера: если в `autotrader_cycles_state.json` сохранён цикл
для валюты (active=true), но фактический доступный баланс базовой валюты в аккаунте заметно меньше (по умолчанию —
меньше 80%) сохранённого `base_volume`, автотрейдер автоматически помечает такой цикл как неактивный.

Причины:
- Пользователь мог вручную перевести/снять купленные монеты — сохранённый state больше не отражает реальный баланс.
- Если цикл остаётся помеченным active, автотрейдер не будет пытаться выполнить стартовую покупку — это ведёт к
  состоянию, описанному в задаче (активный цикл при отсутствии базовой валюты).

Как это работает сейчас:
- При загрузке `autotrader_cycles_state.json` автотрейдер проверяет (если доступен API-клиент) текущий `available`
  баланс по базе.
- Если фактический баланс меньше 80% от сохранённого `base_volume` — цикл сбрасывается (становится `active=false`,
  `base_volume` обнуляется).

В результате — автотрейдер сможет корректно инициировать стартовую покупку при следующем проходе цикла.

Если вы хотите более строгую/мягкую политику — можно изменить порог (0.8) или добавить опции в state/config.
