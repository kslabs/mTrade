# CHANGELOG ENTRY: –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –ø–æ–∫—É–ø–æ–∫

## –í–µ—Ä—Å–∏—è: v1.8.7 (–∏–ª–∏ —Å–ª–µ–¥—É—é—â–∞—è –ø–æ—Å–ª–µ v1.8.6)

### üõ°Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –ø–æ–∫—É–ø–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏ —Å–∏—Å—Ç–µ–º–∞ –≤—ã–ø–æ–ª–Ω—è–ª–∞ –¥–≤–µ —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–æ–∫—É–ø–∫–∏ –ø–æ–¥—Ä—è–¥ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–π, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –¥–≤–æ–π–Ω–æ–º—É —Ä–∞—Å—Ö–æ–¥—É —Å—Ä–µ–¥—Å—Ç–≤ –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —É—á—ë—Ç—É —Ü–∏–∫–ª–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞ –≤ `autotrader.py`:

#### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã:

1. **–§–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞** (`pending_start`)
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–æ–π –ø–æ–∫—É–ø–∫–∏
   - –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞/–Ω–µ—É–¥–∞—á–∏

2. **–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏** (`last_sell_time`)
   - –ú–∏–Ω–∏–º—É–º 5 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø—Ä–æ–¥–∞–∂–µ–π –∏ –Ω–æ–≤—ã–º —Å—Ç–∞—Ä—Ç–æ–º
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç —Ü–∏–∫–ª–∞
   - –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

3. **–ó–∞—â–∏—Ç–∞ –æ—Ç —á–∞—Å—Ç—ã—Ö –ø–æ–ø—ã—Ç–æ–∫** (`last_start_attempt`)
   - –ú–∏–Ω–∏–º—É–º 2 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ —Å—Ç–∞—Ä—Ç–∞
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –°–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ API

#### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

**`autotrader.py`:**
- `_try_start_cycle()` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `_try_start_cycle()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–æ–≤ –ø–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–æ–π –ø–æ–∫—É–ø–∫–∏
- `_try_start_cycle()` - —Å–±—Ä–æ—Å —Ñ–ª–∞–≥–æ–≤ –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞/–Ω–µ—É–¥–∞—á–∏
- `_try_sell()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:

- ‚ùå `this.state_manager` ‚Üí ‚úÖ `self.state_manager` (—Å—Ç—Ä–æ–∫–∞ ~2123)
- ‚ùå `buy_price` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ ‚Üí ‚úÖ `level_price` (—Å—Ç—Ä–æ–∫–∞ ~1806)

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- **–ü–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏:** –º–∏–Ω–∏–º—É–º 5 —Å–µ–∫—É–Ω–¥ –∑–∞–¥–µ—Ä–∂–∫–∏
- **–ú–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏:** –º–∏–Ω–∏–º—É–º 2 —Å–µ–∫—É–Ω–¥—ã
- **–í–æ –≤—Ä–µ–º—è –ø–æ–∫—É–ø–∫–∏:** –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ `pending_start`

#### –≠—Ñ—Ñ–µ–∫—Ç:

‚úÖ –ü–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **—Ä–æ–≤–Ω–æ –æ–¥–Ω–∞** —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞  
‚úÖ –ù–µ—Ç –¥–≤–æ–π–Ω–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤  
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —É—á—ë—Ç —Ü–∏–∫–ª–æ–≤ –∏ breakeven  
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç race conditions  
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏  

#### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:

- –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

–°–æ–∑–¥–∞–Ω–æ 6 —Ñ–∞–π–ª–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- `DOUBLE_START_BUY_FINAL_REPORT.md` - –ø–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç
- `DOUBLE_START_BUY_FIXED.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- `DOUBLE_START_BUY_TEST.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `DOUBLE_START_BUY_SUMMARY.md` - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞
- `DOUBLE_START_BUY_README.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `DOUBLE_START_BUY_ISSUE.md` - –æ–±–Ω–æ–≤–ª—ë–Ω —Å—Ç–∞—Ç—É—Å

---

### üìù –ü—Ä–∏–º–µ—Ä –¥–ª—è CHANGELOG.md:

```markdown
## [v1.8.7] - 2024-XX-XX

### üõ°Ô∏è Fixed
- **–î–≤–æ–π–Ω–∞—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏** - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞:
  - –§–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ `pending_start` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏
  - –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 5 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏ –ø–µ—Ä–µ–¥ –Ω–æ–≤—ã–º —Å—Ç–∞—Ä—Ç–æ–º
  - –ú–∏–Ω–∏–º—É–º 2 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ —Å—Ç–∞—Ä—Ç–∞ —Ü–∏–∫–ª–∞
  - –í—Å–µ —Ñ–ª–∞–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `autotrader_cycles_state.json` –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
  
### üêõ Bugfixes
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `this.state_manager` ‚Üí `self.state_manager` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `_try_sell`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `buy_price` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `level_price` –≤ rebuy –ª–æ–≥–∏–∫–µ

### üìö Documentation
- –î–æ–±–∞–≤–ª–µ–Ω–æ 6 —Ñ–∞–π–ª–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∑–∞—â–∏—Ç—ã –æ—Ç –¥–≤–æ–π–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫
- `DOUBLE_START_BUY_README.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```

---

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

- **–°—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~20
- **–§—É–Ω–∫—Ü–∏–π –∑–∞—Ç—Ä–æ–Ω—É—Ç–æ:** 2 (`_try_start_cycle`, `_try_sell`)
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–æ–≤–µ—Ä–æ–∫:** 3 —É—Ä–æ–≤–Ω—è –∑–∞—â–∏—Ç—ã
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—à–∏–±–æ–∫:** 2
- **–°–æ–∑–¥–∞–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 6 —Ñ–∞–π–ª–æ–≤

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –º–µ—Ä–¥–∂—É –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É  
**–¢—Ä–µ–±—É–µ—Ç—Å—è:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö —Ç–æ—Ä–≥–æ–≤–ª–∏
