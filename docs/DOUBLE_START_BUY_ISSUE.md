# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–≤–æ–π–Ω–∞—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏

## ‚ùå –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏ —Å–∏—Å—Ç–µ–º–∞ –¥–µ–ª–∞–ª–∞ **–î–í–ï** —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–æ–∫—É–ø–∫–∏ –ø–æ–¥—Ä—è–¥:

```
[15:16:04] [ETH] Sell{10.0014; –ö—É—Ä—Å:2857.5300; ‚ÜëŒî%:0.00; PnL:0.0000; –ü—Ä–æ—Ñ–∏—Ç:0.0000}
[15:16:07] [ETH] Buy{10.0058; –ö—É—Ä—Å:2858.8000; ‚ÜìŒî%:0.00; ‚Üì%:0.00; –ò–Ω–≤–µ—Å—Ç:10.0000}  ‚Üê –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ #1
[15:16:26] [ETH] Buy{10.0063; –ö—É—Ä—Å:2858.9500; ‚ÜìŒî%:0.00; ‚Üì%:0.00; –ò–Ω–≤–µ—Å—Ç:10.0063}  ‚Üê –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ #2
```

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

–î–æ–±–∞–≤–ª–µ–Ω–∞ **–º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞** –æ—Ç –¥–≤–æ–π–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –ø–æ–∫—É–ø–æ–∫:

### 1. –§–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–∫—É–ø–∫–∏
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –§–ª–∞–≥ pending_start (—É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–∫—É–ø–∫–∞)
if cycle.get('pending_start'):
    return

# –ü–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–æ–π –ø–æ–∫—É–ø–∫–∏:
cycle['pending_start'] = True
cycle['last_start_attempt'] = time.time()

# –ü–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ –∏–ª–∏ –Ω–µ—É–¥–∞—á–∏:
cycle['pending_start'] = False
```

### 2. –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–¥–∞–∂–∏
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ú–∏–Ω–∏–º—É–º 5 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏
last_sell_time = cycle.get('last_sell_time', 0)
if last_sell_time > 0:
    elapsed = time.time() - last_sell_time
    if elapsed < 5:
        return

# –ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ:
cycle['last_sell_time'] = time.time()

# –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞:
cycle['last_sell_time'] = 0
```

### 3. –ó–∞—â–∏—Ç–∞ –æ—Ç —á–∞—Å—Ç—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ú–∏–Ω–∏–º—É–º 2 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
last_start_attempt = cycle.get('last_start_attempt', 0)
if last_start_attempt > 0:
    elapsed = time.time() - last_start_attempt
    if elapsed < 2:
        return
```

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### `autotrader.py`
1. **–§—É–Ω–∫—Ü–∏—è `_try_start_cycle`** (—Å—Ç—Ä–æ–∫–∏ ~910-935):
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞ –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–æ–≤ –ø–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–æ–π (—Å—Ç—Ä–æ–∫–∏ ~1220-1228)
   - –°–±—Ä–æ—Å —Ñ–ª–∞–≥–æ–≤ –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ (—Å—Ç—Ä–æ–∫–∏ ~1371-1373, ~976-978)
   - –°–±—Ä–æ—Å —Ñ–ª–∞–≥–∞ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ (—Å—Ç—Ä–æ–∫–∞ ~1468)

2. **–§—É–Ω–∫—Ü–∏—è `_try_sell`** (—Å—Ç—Ä–æ–∫–∏ ~2425-2465):
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `last_sell_time` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏ (—Å—Ç—Ä–æ–∫–∏ ~2441-2443)
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `last_sell_time` –ø—Ä–∏ pending sell (—Å—Ç—Ä–æ–∫–∏ ~1914-1916)

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü—Ä–æ–¥–∞–∂–∞ ‚Üí –ù–æ–≤—ã–π —Å—Ç–∞—Ä—Ç
1. **–ü—Ä–æ–¥–∞–∂–∞** (T=0—Å): `last_sell_time = now()`, —Ü–∏–∫–ª –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
2. **–ü–æ–ø—ã—Ç–∫–∞ #1** (T=1—Å): `elapsed=1 < 5` ‚Üí **–ë–õ–û–ö–ò–†–û–í–ê–ù–û**
3. **–ü–æ–ø—ã—Ç–∫–∞ #2** (T=3—Å): `elapsed=3 < 5` ‚Üí **–ë–õ–û–ö–ò–†–û–í–ê–ù–û**
4. **–ü–æ–ø—ã—Ç–∫–∞ #3** (T=6—Å): `elapsed=6 >= 5`, `pending_start=True`, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ–∫—É–ø–∫–∞
5. **–ü–æ–ø—ã—Ç–∫–∞ #4** (T=7—Å): `pending_start=True` ‚Üí **–ë–õ–û–ö–ò–†–û–í–ê–ù–û**
6. **–ü–æ–∫—É–ø–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∞** (T=8—Å): `pending_start=False`, `last_sell_time=0`

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
- **–ü–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏**: –º–∏–Ω–∏–º—É–º 5 —Å–µ–∫—É–Ω–¥
- **–ú–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ —Å—Ç–∞—Ä—Ç–∞**: –º–∏–Ω–∏–º—É–º 2 —Å–µ–∫—É–Ω–¥—ã
- **–í–æ –≤—Ä–µ–º—è –ø–æ–∫—É–ø–∫–∏**: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ `pending_start`

---
    # ... –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏ ...
    
    if order_res.get('success'):
        cycle['pending_start'] = False
        cycle.update({
            'active': True,
            'active_step': 0,
            # ...
        })
except Exception:
    cycle['pending_start'] = False
    raise
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

```python
# –í –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏:
last_sell_time = cycle.get('last_sell_time', 0)
if time.time() - last_sell_time < 30:  # 30 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏
    return  # –°–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ –¥–ª—è –Ω–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ threading.Lock

```python
class AutoTrader:
    def __init__(self):
        self._start_buy_lock = threading.Lock()
        # ...
    
    def _try_start_cycle_buy(self, base, quote):
        if not self._start_buy_lock.acquire(blocking=False):
            return  # –î—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤—É—é –ø–æ–∫—É–ø–∫—É
        
        try:
            # ... –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏ ...
        finally:
            self._start_buy_lock.release()
```

---

## üìä –ì–¥–µ –∏—Å–∫–∞—Ç—å –∫–æ–¥

### –ú–µ—Å—Ç–∞, –≥–¥–µ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞:

1. **–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (–Ω–∞–π–¥–µ–Ω–∞):**
   - `autotrader.py`, —Å—Ç—Ä–æ–∫–∏ ~980-1450
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `if cycle['active']:` –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ–∫—É–ø–∫—É –µ—Å–ª–∏ `False`

2. **–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ pending –æ—Ä–¥–µ—Ä–æ–≤:**
   - –í–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å –ª–æ–≥–∏–∫–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è pending.start

3. **–í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ WebSocket:**
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

4. **–í –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:**
   - –§—É–Ω–∫—Ü–∏—è `run()` –∏–ª–∏ `main_loop()`

### –ü–æ–∏—Å–∫ —Ç–æ—á–µ–∫ –≤—Ö–æ–¥–∞:

```bash
# –ü–æ–∏—Å–∫ –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ä—Ç–æ–≤—É—é –ø–æ–∫—É–ø–∫—É
grep -n "active_step': 0" autotrader.py
grep -n "log_buy.*0.0.*0.0" autotrader.py
grep -n "start_price.*buy_price" autotrader.py
```

---

## üß™ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –Ω–∞—á–∞–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏:

```python
def _try_start_cycle_buy(self, base: str, quote: str):
    import traceback
    stack = ''.join(traceback.format_stack()[-5:-1])
    print(f"[DIAG] _try_start_cycle_buy called for {base}")
    print(f"[DIAG] Call stack:\n{stack}")
    print(f"[DIAG] Current cycle state: active={cycle.get('active')}, step={cycle.get('active_step')}")
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –û—Ç–∫—É–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è
- –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ü–∏–∫–ª–∞ –≤ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –í–∞—Ä–∏–∞–Ω—Ç 1 + –í–∞—Ä–∏–∞–Ω—Ç 2:**

1. –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `pending_start` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã
3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```python
def _try_start_cycle_buy(self, base: str, quote: str):
    cycle = self.cycles.get(base)
    if not cycle:
        return
    
    # –ó–ê–©–ò–¢–ê 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–∞ pending_start
    if cycle.get('pending_start'):
        print(f"[{base}] –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ —É–∂–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ, –ø—Ä–æ–ø—É—Å–∫")
        return
    
    # –ó–ê–©–ò–¢–ê 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–¥–∞–∂–∏
    last_sell_time = cycle.get('last_sell_time', 0)
    if last_sell_time > 0 and time.time() - last_sell_time < 30:
        print(f"[{base}] –°–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏ ({time.time() - last_sell_time:.1f}—Å), –ø—Ä–æ–ø—É—Å–∫")
        return
    
    # –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–∞
    if window.uiDebugLog:
        window.uiDebugLog(f"{base}: –ù–∞—á–∞–ª–æ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏", 'info')
    
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥
    cycle['pending_start'] = True
    
    try:
        # ... –≤–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏ ...
        
        if order_res.get('success'):
            # –£—Å–ø–µ—à–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º —Ü–∏–∫–ª
            cycle['pending_start'] = False
            cycle.update({
                'active': True,
                'active_step': 0,
                # ...
            })
        else:
            # –ù–µ—É–¥–∞—á–∞ - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥
            cycle['pending_start'] = False
            
    except Exception as e:
        # –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥
        cycle['pending_start'] = False
        raise
```

### –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏:

```python
# –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏
self.cycles[base] = {
    'active': False,
    'active_step': -1,
    'table': table,
    'last_buy_price': 0.0,
    'start_price': 0.0,
    'total_invested_usd': 0.0,
    'base_volume': 0.0,
    'pending_start': False,  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥
    'last_sell_time': time.time()  # –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –≤—Ä–µ–º—è –ø—Ä–æ–¥–∞–∂–∏
}
```

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- [ ] –ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏ –≤ `autotrader.py`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ñ–ª–∞–≥–∞ `pending_start` –≤ –Ω–∞—á–∞–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É —Ñ–ª–∞–≥–∞ `pending_start = True` –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ø–æ–∫—É–ø–∫–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–±—Ä–æ—Å —Ñ–ª–∞–≥–∞ `pending_start = False` –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞/–Ω–µ—É–¥–∞—á–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å–æ —Å–±—Ä–æ—Å–æ–º —Ñ–ª–∞–≥–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `last_sell_time` –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `last_sell_time`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏

---

## üöÄ –°—Ç–∞—Ç—É—Å

‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –ø–æ–∫—É–ø–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `autotrader.py`.

### –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–∞ `pending_start` –≤ –Ω–∞—á–∞–ª–æ `_try_start_cycle`
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏ `last_sell_time` (–º–∏–Ω–∏–º—É–º 5 —Å–µ–∫—É–Ω–¥)
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `last_start_attempt` (–º–∏–Ω–∏–º—É–º 2 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏)
- [x] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ `pending_start = True` –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ø–æ–∫—É–ø–∫–∏
- [x] –°–±—Ä–æ—Å —Ñ–ª–∞–≥–∞ `pending_start = False` –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞/–Ω–µ—É–¥–∞—á–∏
- [x] –°–±—Ä–æ—Å —Ñ–ª–∞–≥–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —á–∞—Å—Ç–∏—á–Ω–æ–π –ø–æ–∫—É–ø–∫–∏ —á–µ—Ä–µ–∑ `pending.start`
- [x] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `last_sell_time` –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏ –≤ `_try_sell`
- [x] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `last_sell_time` –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ pending sell
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ (DOUBLE_START_BUY_FIXED.md, DOUBLE_START_BUY_TEST.md)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö —Ç–æ—Ä–≥–æ–≤–ª–∏

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[DOUBLE_START_BUY_FIXED.md](./DOUBLE_START_BUY_FIXED.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
- **[DOUBLE_START_BUY_TEST.md](./DOUBLE_START_BUY_TEST.md)** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

**–ó–∞—â–∏—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞! –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±–æ–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.** ‚úÖüõ†Ô∏è

