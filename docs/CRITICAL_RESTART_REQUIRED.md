# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –°–¢–ê–†–´–ô –ö–û–î –í–°–Å –ï–©–Å –†–ê–ë–û–¢–ê–ï–¢!

## üî¥ –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –î–≤–æ–π–Ω–∞—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ LINK
```
[18:45:48] [LINK] Buy{10.0215; –ö—É—Ä—Å:13.3620}  ‚Üê –í—Ç–æ—Ä–∞—è –ø–æ–∫—É–ø–∫–∞ (—á–µ—Ä–µ–∑ 12 —Å–µ–∫)
[18:45:36] [LINK] Buy{10.0365; –ö—É—Ä—Å:13.3820}  ‚Üê –ü–µ—Ä–≤–∞—è –ø–æ–∫—É–ø–∫–∞
[18:45:33] [LINK] Sell{10.0057; –ö—É—Ä—Å:13.3410; ‚ÜëŒî%:0.00; PnL:0.0000}  ‚Üê –ü—Ä–æ–¥–∞–∂–∞ —Å –Ω—É–ª—è–º–∏
```

### 2. –ü—Ä–æ–¥–∞–∂–∞ —Å –Ω—É–ª–µ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```
‚ÜëŒî%:0.00; PnL:0.0000; –ü—Ä–æ—Ñ–∏—Ç:0.0000
```

## üîç –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

### –ó–∞–ø—É—â–µ–Ω –°–¢–ê–†–´–ô –ø—Ä–æ—Ü–µ—Å—Å Python!

```powershell
# –ü—Ä–æ—Ü–µ—Å—Å—ã Python:
Id: 15196  StartTime: 11:16:34 AM  ‚Üê –°–¢–ê–†–´–ô –ü–†–û–¶–ï–°–° (7+ —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã)
Id: 15228  StartTime: 6:31:57 PM   ‚Üê –ù–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
Id: 19888  StartTime: 6:31:57 PM   ‚Üê –ù–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å

# –í—Ä–µ–º—è –∏–∑–º–µ–Ω–µ–Ω–∏—è autotrader.py:
LastWriteTime: 5:15:28 PM  ‚Üê –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –ü–û–°–õ–ï 11:16!
```

**–ü—Ä–æ—Ü–µ—Å—Å —Å 11:16 —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ –°–¢–ê–†–´–ú –∫–æ–¥–æ–º** (–¥–æ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π):
- ‚ùå –ù–ï–¢ –∑–∞—â–∏—Ç—ã `pending_start` –æ—Ç –¥–≤–æ–π–Ω–æ–π –ø–æ–∫—É–ø–∫–∏
- ‚ùå –ù–ï–¢ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `avg_deal_price` –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ sell –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚ùå –ù–ï–¢ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π `[SELL_DEBUG]`

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–ê–ì 1: –ù–ï–ú–ï–î–õ–ï–ù–ù–û –û–°–¢–ê–ù–û–í–ò–¢–¨ –í–°–ï –ü–†–û–¶–ï–°–°–´

```powershell
# –í PowerShell –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
Stop-Process -Name python -Force
```

–ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ **Ctrl+C** –≤–æ –í–°–ï–• —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω Python!

### –®–ê–ì 2: –ü–†–û–í–ï–†–ò–¢–¨ –ß–¢–û –í–°–ï –ü–†–û–¶–ï–°–°–´ –û–°–¢–ê–ù–û–í–õ–ï–ù–´

```powershell
Get-Process python -ErrorAction SilentlyContinue
```

**–û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:** –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ (no processes found)!

### –®–ê–ì 3: –ó–ê–ü–£–°–¢–ò–¢–¨ AUTOTRADER –ó–ê–ù–û–í–û

```powershell
python autotrader.py
```

### –®–ê–ì 4: –ü–†–û–í–ï–†–ò–¢–¨ –ß–¢–û –ù–û–í–´–ô –ö–û–î –†–ê–ë–û–¢–ê–ï–¢

#### –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–∫—É–ø–∫–µ/–ø—Ä–æ–¥–∞–∂–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:

**–ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ:**
```
[AutoTrader][LINK] ‚¨ÜÔ∏è BUY THRESHOLD: price=13.36 >= target=13.30 (Œî+0.45%)
[AutoTrader][LINK] üì§ BUY: amount=0.75 @ 13.36 = $10.02
[AutoTrader][LINK] ‚úÖ BUY FILLED: 0.75 LINK in 123ms
```

**–ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ:**
```
[SELL_DEBUG][LINK] cycle data: last_buy_price=13.36, total_invested_usd=10.02, base_volume=0.75
[SELL_DEBUG][LINK] actual_exec_price=13.45, filled=0.75
[SELL_DEBUG][LINK] CALCULATED: delta_from_last_buy=0.67%, avg_invest_price=13.36, pnl=0.0675
```

#### –ï—Å–ª–∏ —ç—Ç–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ù–ï–¢:
‚Üí –ê–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä –≤—Å—ë –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–æ–¥!
‚Üí –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥–∏ 1-3

## üìä –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

### 1. –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–π –ø–æ–∫—É–ø–∫–∏ (`pending_start`)
```python
# –í _try_start_cycle():
cycle['pending_start'] = True  # –§–ª–∞–≥ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –°–†–ê–ó–£ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–æ–∫
# ...
cycle['pending_start'] = False  # –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –ò–õ–ò –ø–µ—Ä–µ–¥ return
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ü–µ–Ω—ã –≤ sell (–≤ –æ–±–µ–∏—Ö –≤–µ—Ç–∫–∞—Ö)
```python
# –í _try_sell() - –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞:
actual_exec_price = float(order_res.get('avg_deal_price') or exec_price)
pnl = (actual_exec_price - avg_invest_price) * filled

# –í _try_sell() - –≤–µ—Ç–∫–∞ pending.sell:
actual_exec_price = float(order_res.get('avg_deal_price') or exec_price)
pnl = (actual_exec_price - avg_invest_price) * filled
```

### 3. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```python
print(f"[SELL_DEBUG][{base}] cycle data: ...")
print(f"[SELL_DEBUG][{base}] actual_exec_price=..., filled=...")
print(f"[SELL_DEBUG][{base}] CALCULATED: delta_from_last_buy=..., pnl=...")
```

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

### –ü–æ–∫—É–ø–∫–∏:
- ‚úÖ –û–î–ù–ê —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏
- ‚úÖ –ú–∏–Ω–∏–º—É–º 5 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø—Ä–æ–¥–∞–∂–µ–π –∏ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–∫—É–ø–∫–æ–π
- ‚úÖ –ß–∏—Å—Ç—ã–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å (—Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è)

### –ü—Ä–æ–¥–∞–∂–∏:
- ‚úÖ –ù–µ–Ω—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚ÜëŒî%, PnL, –ü—Ä–æ—Ñ–∏—Ç
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ü–µ–Ω—ã –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
[18:50:33] [LINK] Sell{10.0850; –ö—É—Ä—Å:13.4500; ‚ÜëŒî%:0.67; PnL:0.0675; –ü—Ä–æ—Ñ–∏—Ç:0.0675}
# ‚è≥ –ü–ê–£–ó–ê 5+ –°–ï–ö–£–ù–î
[18:50:40] [LINK] Buy{10.0320; –ö—É—Ä—Å:13.3800; ‚ÜìŒî%:0.00; –ò–Ω–≤–µ—Å—Ç:10.0320}
# ‚úÖ –¢–û–õ–¨–ö–û –û–î–ù–ê –ü–û–ö–£–ü–ö–ê!
```

## ‚ö†Ô∏è –í–ê–ñ–ù–û

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –£–ñ–ï –í –ö–û–î–ï!** –§–∞–π–ª `autotrader.py` —Å–æ–¥–µ—Ä–∂–∏—Ç:
- ‚úÖ –ó–∞—â–∏—Ç—É `pending_start`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `avg_deal_price`
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–Ω—Ç—ã
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã

**–û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –ü–ï–†–ï–ó–ê–ü–£–°–¢–ò–¢–¨ –ø—Ä–æ—Ü–µ—Å—Å!**

---

## üìù Checklist

- [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –í–°–ï –ø—Ä–æ—Ü–µ—Å—Å—ã Python (`Stop-Process -Name python -Force`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`Get-Process python`)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å autotrader –∑–∞–Ω–æ–≤–æ (`python autotrader.py`)
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `[SELL_DEBUG]` –∏ –∫–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ (–Ω–µ–Ω—É–ª–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã sell)

---

**–î–∞—Ç–∞:** 02.12.2025 18:55  
**–°—Ç–∞—Ç—É—Å:** üö® –¢–†–ï–ë–£–ï–¢–°–Ø –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ô –ü–ï–†–ï–ó–ê–ü–£–°–ö  
**–ö–æ–¥ –≥–æ—Ç–æ–≤:** ‚úÖ –î–ê  
**–ü—Ä–æ—Ü–µ—Å—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:** ‚ùå –ù–ï–¢ (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Å 11:16)
