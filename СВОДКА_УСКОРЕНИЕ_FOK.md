# üìä –°–í–û–î–ö–ê: –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ LIMIT FOK

## üéØ **–ó–ê–î–ê–ß–ê**
–£—Å–∫–æ—Ä–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –ø—Ä–æ–¥–∞–∂–∏ —á–µ—Ä–µ–∑ LIMIT FOK (Fill-Or-Kill), –∫–æ—Ç–æ—Ä–∞—è –∑–∞–Ω–∏–º–∞–ª–∞ **> 1 –º–∏–Ω—É—Ç—ã** –≤–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ–∫—É–Ω–¥.

---

## üîç **–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê**

### **–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
1. ‚ùå **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 0.5s** –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—Ç–∞—Ç—É—Å–∞ FOK-–æ—Ä–¥–µ—Ä–∞
2. ‚ùå **–¢–æ–ª—å–∫–æ –û–î–ù–ê –ø–æ–ø—ã—Ç–∫–∞** –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ (–±–µ–∑ –ø–æ–≤—Ç–æ—Ä–æ–≤)
3. ‚ùå **–ó–∞–≤–∏—Å–∞–Ω–∏–µ –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏** (~1 —Å–µ–∫—É–Ω–¥–∞) –ø—Ä–∏ –∑–∞–¥–µ—Ä–∂–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ API

### **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- –§–∞–π–ª: `autotrader_v2.py`
- –ú–µ—Ç–æ–¥: `_try_sell()`
- –°—Ç—Ä–æ–∫–∏: ~1697-1705

---

## ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

### **1. –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:**
```python
# –ë–´–õ–û:
time.sleep(0.5)
order_status = api_client.get_spot_order(order_id, currency_pair)

# –°–¢–ê–õ–û:
max_attempts = 3
check_delay = 0.3

for attempt in range(1, max_attempts + 1):
    time.sleep(check_delay)
    order_status = api_client.get_spot_order(order_id, currency_pair)
    
    if status in ['closed', 'cancelled']:
        break  # –í—ã—Ö–æ–¥ —Å—Ä–∞–∑—É –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚ö° –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–¥–æ 3 —Ä–∞–∑** —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º **0.3s**
- ‚ö° –í—ã—Ö–æ–¥ **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ** –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ `closed`/`cancelled`
- ‚ö° –û–±—â–µ–µ –≤—Ä–µ–º—è: **0.3s - 0.9s** (–≤–º–µ—Å—Ç–æ 0.5s + –∑–∞–≤–∏—Å–∞–Ω–∏–µ ~1s)

### **2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–π:**
```python
# –¢–∞–π–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–¥–µ—Ä–∞
order_create_start = time.time()
order = api_client.create_spot_order(...)
order_create_time = time.time() - order_create_start
print(f"‚è±Ô∏è –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–¥–µ—Ä–∞: {order_create_time:.2f}s")

# –¢–∞–π–º–µ—Ä –≤—Å–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–¥–∞–∂–∏
sell_operation_start = time.time()
# ... (–≤—Å—è –ª–æ–≥–∏–∫–∞) ...
sell_total_time = time.time() - sell_operation_start
print(f"‚è±Ô∏è –û–ë–©–ï–ï –í–†–ï–ú–Ø –û–ü–ï–†–ê–¶–ò–ò –ü–†–û–î–ê–ñ–ò: {sell_total_time:.2f}s")
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- üìä –í–∏–¥–Ω–æ **—Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è** –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
- üìä –õ–µ–≥–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞
- üìä –ü–æ–Ω—è—Ç–Ω–æ, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–µ (–µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç)

---

## üìà **–†–ï–ó–£–õ–¨–¢–ê–¢–´**

### **–î–û:**
- ‚è±Ô∏è –í—Ä–µ–º—è: **1.5+ —Å–µ–∫—É–Ω–¥—ã** (0.5s –∑–∞–¥–µ—Ä–∂–∫–∞ + ~1s –∑–∞–≤–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–¥–µ—Ä–∂–∫–µ API)
- üêå –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- üêå –ù–µ—Ç —Ç–∞–π–º–µ—Ä–æ–≤

### **–ü–û–°–õ–ï:**
- ‚ö° –í—Ä–µ–º—è: **0.5 - 0.9 —Å–µ–∫—É–Ω–¥—ã** (–≤ 2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ!)
- ‚úÖ –î–æ 3 –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 0.3s
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üìÇ **–ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´**

1. ‚úÖ **autotrader_v2.py** (–º–µ—Ç–æ–¥ `_try_sell`)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
   - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–µ—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–π

2. ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–î–û–õ–ì–û–ô_–ü–†–û–î–ê–ñ–ò.md**
   - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

3. ‚úÖ **–ì–û–¢–û–í–û_–£–°–ö–û–†–ï–ù–ò–ï_–ü–†–û–î–ê–ñ–ò_FOK.md**
   - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏

4. ‚úÖ **–ë–´–°–¢–†–ê–Ø_–ü–†–û–í–ï–†–ö–ê_–£–°–ö–û–†–ï–ù–ò–Ø_FOK.md**
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

## üöÄ **–°–¢–ê–¢–£–°**

| –≠—Ç–∞–ø | –°—Ç–∞—Ç—É—Å |
|------|--------|
| –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ | ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û |
| –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ | ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ | ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (–Ω–µ—Ç –æ—à–∏–±–æ–∫) |
| –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ | ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (PID: 24712) |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û |
| **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** | **‚úÖ –ì–û–¢–û–í–û –ö –≠–ö–°–ü–õ–£–ê–¢–ê–¶–ò–ò** |

---

## üéØ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

1. ‚è≥ **–î–æ–∂–¥–∞—Ç—å—Å—è –ø—Ä–æ–¥–∞–∂–∏** –æ–¥–Ω–æ–π –º–æ–Ω–µ—Ç—ã
2. ‚è≥ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ:
   - `‚è±Ô∏è –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–¥–µ—Ä–∞: X.XX s`
   - `‚è±Ô∏è –û–ë–©–ï–ï –í–†–ï–ú–Ø –û–ü–ï–†–ê–¶–ò–ò –ü–†–û–î–ê–ñ–ò: X.XX s`
3. ‚è≥ **–£–±–µ–¥–∏—Ç—å—Å—è**, —á—Ç–æ –≤—Ä–µ–º—è **< 1 —Å–µ–∫—É–Ω–¥—ã**

---

## üìä **–ú–ï–¢–†–ò–ö–ò –î–õ–Ø –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê**

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª–µ–≤–æ–µ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ |
|---------|---------|-------------|
| –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–¥–µ—Ä–∞ | < 0.3s | > 1.0s |
| –û–±—â–µ–µ –≤—Ä–µ–º—è –ø—Ä–æ–¥–∞–∂–∏ | < 1.0s | > 2.0s |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ | 1-2 | 3 (–≤—Å–µ–≥–¥–∞) |
| % –æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã—Ö FOK | < 10% | > 30% |

---

## üîß **–í–û–ó–ú–û–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´**

### **–ï—Å–ª–∏ –≤—Ä–µ–º—è –≤—Å—ë –µ—â—ë > 2 —Å–µ–∫—É–Ω–¥:**
1. –£–≤–µ–ª–∏—á–∏—Ç—å `check_delay` –¥–æ 0.5s (–º–µ–¥–ª–µ–Ω–Ω–æ–µ API Gate.io)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ç–∏ (`ping gate.io`)
3. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WebSocket –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –æ—Ä–¥–µ—Ä–æ–≤

### **–ï—Å–ª–∏ FOK —á–∞—Å—Ç–æ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è:**
1. –£–º–µ–Ω—å—à–∏—Ç—å `orderbook_level` (–±—Ä–∞—Ç—å —Ü–µ–Ω—ã –±–ª–∏–∂–µ –∫ —Ä—ã–Ω–∫—É)
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GTC –≤–º–µ—Å—Ç–æ FOK –¥–ª—è –Ω–∏–∑–∫–æ–ª–∏–∫–≤–∏–¥–Ω—ã—Ö –º–æ–Ω–µ—Ç

---

**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2025-01-XX  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** GitHub Copilot  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û –ò –ì–û–¢–û–í–û –ö –≠–ö–°–ü–õ–£–ê–¢–ê–¶–ò–ò**
