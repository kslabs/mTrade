# ‚úÖ –ò–¢–û–ì–û–í–û–ï –†–£–ö–û–í–û–î–°–¢–í–û: FOK-–û–†–î–ï–†–ê –í –ê–í–¢–û–¢–†–ï–ô–î–ï–†–ï

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï
1. [–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ](#—Ç–µ–∫—É—â–µ–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ)
2. [–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç FOK](#–∫–∞–∫-—Ä–∞–±–æ—Ç–∞–µ—Ç-fok)
3. [–ü–æ—á–µ–º—É FOK ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ](#–ø–æ—á–µ–º—É-fok)
4. [–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ](#–ø—Ä–æ—Ü–µ—Å—Å-–ø—Ä–æ–¥–∞–∂–∏)
5. [–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
6. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
7. [–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#—á–∞—Å—Ç—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)

---

## ‚úÖ –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ **–í—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–¥–∞–∂–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç FOK-–æ—Ä–¥–µ—Ä–∞**
- –¢–∏–ø –æ—Ä–¥–µ—Ä–∞: `LIMIT` (–≥–∞—Ä–∞–Ω—Ç–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã)
- –ü–∞—Ä–∞–º–µ—Ç—Ä: `time_in_force='fok'` (–≤—Å—ë –∏–ª–∏ –Ω–∏—á–µ–≥–æ)
- –†–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑–≤–µ—Å—Ç–µ–Ω —á–µ—Ä–µ–∑ 1-3 —Å–µ–∫—É–Ω–¥—ã

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**
- `closed` ‚Üí –ø—Ä–æ–¥–∞–∂–∞ —É—Å–ø–µ—à–Ω–∞, —Ü–∏–∫–ª –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
- `cancelled` ‚Üí –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏, –ø–æ–≤—Ç–æ—Ä–∏–º –ø–æ–∑–∂–µ
- `unknown` ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã FOK-–æ—Ä–¥–µ—Ä–∞
- –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ (3 –ø–æ–ø—ã—Ç–∫–∏ √ó 1 —Å–µ–∫—É–Ω–¥–∞)
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏

---

## üéØ –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ FOK

### Fill-Or-Kill (–í—Å—ë –∏–ª–∏ –Ω–∏—á–µ–≥–æ)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   FOK-–û–†–î–ï–† –ù–ê –ü–†–û–î–ê–ñ–£                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                              ‚îÇ
‚îÇ  üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:                                               ‚îÇ
‚îÇ     ‚Ä¢ amount: 100 XRP (–≤–µ—Å—å –±–∞–ª–∞–Ω—Å)                          ‚îÇ
‚îÇ     ‚Ä¢ price: 2.50 USDT (—Ü–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã)             ‚îÇ
‚îÇ     ‚Ä¢ time_in_force: 'fok'                                   ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  üîç Gate.io –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–Ω–∏–≥—É –∑–∞—è–≤–æ–∫:                          ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ     ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–û–°–¢–ê–¢–û–ß–ù–û –õ–ò–ö–í–ò–î–ù–û–°–¢–ò                    ‚îÇ
‚îÇ        ‚îî‚îÄ> –ï—Å—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ –Ω–∞ 100 XRP ‚â• 2.50 USDT           ‚îÇ
‚îÇ        ‚îî‚îÄ> –û—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –ü–û–õ–ù–û–°–¢–¨–Æ                       ‚îÇ
‚îÇ        ‚îî‚îÄ> –°—Ç–∞—Ç—É—Å: 'closed'                                  ‚îÇ
‚îÇ        ‚îî‚îÄ> –ü–æ–ª—É—á–∞–µ–º ‚â• 250 USDT                               ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ     ‚ùå –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–ï–î–û–°–¢–ê–¢–û–ß–ù–û –õ–ò–ö–í–ò–î–ù–û–°–¢–ò                  ‚îÇ
‚îÇ        ‚îî‚îÄ> –ï—Å—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ 80 XRP ‚â• 2.50 USDT     ‚îÇ
‚îÇ        ‚îî‚îÄ> –û—Ä–¥–µ—Ä –ù–ï –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç—å—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é              ‚îÇ
‚îÇ        ‚îî‚îÄ> –û—Ä–¥–µ—Ä –û–¢–ú–ï–ù–Ø–ï–¢–°–Ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏                    ‚îÇ
‚îÇ        ‚îî‚îÄ> –°—Ç–∞—Ç—É—Å: 'cancelled'                               ‚îÇ
‚îÇ        ‚îî‚îÄ> –ú–æ–Ω–µ—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –±–∞–ª–∞–Ω—Å–µ                        ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚è±Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑–≤–µ—Å—Ç–µ–Ω —á–µ—Ä–µ–∑: 1-3 —Å–µ–∫—É–Ω–¥—ã                   ‚îÇ
‚îÇ                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (–ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

#### GTC (Good-Til-Cancelled)
```
‚ùå –ü–†–û–ë–õ–ï–ú–ê:
   ‚Ä¢ –û—Ä–¥–µ—Ä –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –∫–Ω–∏–≥–µ –∑–∞—è–≤–æ–∫ –¥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
   ‚Ä¢ –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ —á–∞—Å—ã/–¥–Ω–∏
   ‚Ä¢ –ê–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä –Ω–µ —É–∑–Ω–∞—ë—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
   ‚Ä¢ –¶–∏–∫–ª "–∑–∞–≤–∏—Å–∞–µ—Ç" –≤ active

‚ö†Ô∏è –ü–û–ß–ï–ú–£ –ù–ï –ü–û–î–•–û–î–ò–¢:
   –î–ª—è –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –°–†–ê–ó–£!
```

#### IOC (Immediate-Or-Cancel)
```
‚ö†Ô∏è –†–ò–°–ö:
   ‚Ä¢ –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç—å—Å—è —á–∞—Å—Ç–∏—á–Ω–æ (80 –∏–∑ 100 XRP)
   ‚Ä¢ –ù—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ (20 XRP)
   ‚Ä¢ –£—Å–ª–æ–∂–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–∏–∫–ª–∞

‚ö†Ô∏è –ü–û–ß–ï–ú–£ –ù–ï –ü–û–î–•–û–î–ò–¢:
   FOK –ø—Ä–æ—â–µ: –ª–∏–±–æ –≤—Å—ë, –ª–∏–±–æ –Ω–∏—á–µ–≥–æ
```

---

## üí° –ü–û–ß–ï–ú–£ FOK ‚Äî –ü–†–ê–í–ò–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï

### 1. –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑–≤–µ—Å—Ç–µ–Ω —á–µ—Ä–µ–∑ 1-3 —Å–µ–∫—É–Ω–¥—ã
- ‚úÖ –¢–æ–ª—å–∫–æ 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞: –∏—Å–ø–æ–ª–Ω–µ–Ω –∏–ª–∏ –æ—Ç–º–µ–Ω—ë–Ω
- ‚úÖ –ù–µ—Ç "–∑–∞–≤–∏—Å—à–∏—Ö" –æ—Ä–¥–µ—Ä–æ–≤ –≤ –∫–Ω–∏–≥–µ –∑–∞—è–≤–æ–∫

### 2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –¶–∏–∫–ª –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏
- ‚úÖ –ù–µ—Ç —Ä–∏—Å–∫–∞ "–ø–æ—Ç–µ—Ä—è—Ç—å" –æ—Ä–¥–µ—Ä –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- ‚úÖ –ë–∞–ª–∞–Ω—Å –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—é —Ü–∏–∫–ª–∞

### 3. –ü—Ä–æ—Å—Ç–æ—Ç–∞
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å Order ID –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∑–∂–µ
- ‚úÖ –ù–µ –Ω—É–∂–Ω–∞ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤
- ‚úÖ –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏: 2 –≤–µ—Ç–∫–∏ (closed/cancelled)

### 4. –ì–∞—Ä–∞–Ω—Ç–∏—è —Ü–µ–Ω—ã
- ‚úÖ LIMIT –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–¥–∞–∂—É ‚â• target_sell_price
- ‚úÖ FOK –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ–ª–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–º–µ–Ω—É
- ‚úÖ –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ–¥–∞—ë–º –ø–æ —Ü–µ–Ω–µ –Ω–∏–∂–µ —Ü–µ–ª–µ–≤–æ–π!

---

## üìä –ü–†–û–¶–ï–°–° –ü–†–û–î–ê–ñ–ò (–®–ê–ì –ó–ê –®–ê–ì–û–ú)

### –®–∞–≥ 1: –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è
```python
if current_price >= target_sell_price:
    # ‚úÖ –¶–µ–Ω–∞ –¥–æ—Å—Ç–∏–≥–ª–∞ —Ü–µ–ª–µ–≤–æ–π –¥–µ–ª—å—Ç—ã –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏
    print("üéØ –ü–†–ò–ù–ò–ú–ê–ï–ú –†–ï–®–ï–ù–ò–ï –û –ü–†–û–î–ê–ñ–ï")
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
[WLD] üéØ ==================== –¢–û–ß–ö–ê –ü–†–ò–ù–Ø–¢–ò–Ø –†–ï–®–ï–ù–ò–Ø ====================
[WLD]   –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞: 2.5000 USDT
[WLD]   –¶–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: 2.5000 USDT
[WLD]   –°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ü–µ–Ω–∞ —Ü–∏–∫–ª–∞: 2.3000 USDT
[WLD]   –£—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: 2.5000 >= 2.5000 ‚úÖ
[WLD]   –†–ï–®–ï–ù–ò–ï: –ü–†–û–î–ê–í–ê–¢–¨ (AUTO)
[WLD] üéØ ====================================================================
```

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```python
target_sell_price = start_price * (1 + target_delta)
available_base = float(balance.get('available', 0))
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
[WLD] üîµ ============ –ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ü–†–û–°–ê –ù–ê –ü–†–û–î–ê–ñ–£ ============
[WLD]   –ò—Å—Ç–æ—á–Ω–∏–∫: AUTO (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ —Ü–µ–ª–µ–≤–æ–π –¥–µ–ª—å—Ç–µ)
[WLD]   –û–±—ä—ë–º: 100.0000 WLD
[WLD]   –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: 2.5000 USDT
[WLD]   –¶–µ–ª–µ–≤–∞—è –¥–µ–ª—å—Ç–∞: +8.70%
[WLD]   –û–∂–∏–¥–∞–µ–º–∞—è –≤—ã—Ä—É—á–∫–∞: >=250.0000 USDT
[WLD] üîµ =====================================================
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ FOK-–æ—Ä–¥–µ—Ä–∞
```python
order = api_client.create_spot_order(
    currency_pair='WLD_USDT',
    side='sell',
    order_type='limit',
    amount='100.0',
    price='2.5000',
    time_in_force='fok'  # üî¥ –ö–ª—é—á–µ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä!
)
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
[WLD] üü¢ –°–æ–∑–¥–∞—ë–º LIMIT FOK-–æ—Ä–¥–µ—Ä —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π 2.50000000
[WLD]    FOK = Fill-Or-Kill: –ø—Ä–æ–¥–∞—Å—Ç –í–°–Å —Å—Ä–∞–∑—É –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç –æ—Ä–¥–µ—Ä
[WLD] ‚úÖ ========== –†–ï–ó–£–õ–¨–¢–ê–¢ –°–û–ó–î–ê–ù–ò–Ø –û–†–î–ï–†–ê ==========
[WLD]   Order ID: 123456789
[WLD] ‚úÖ ==================================================
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (3 –ø–æ–ø—ã—Ç–∫–∏ √ó 1 —Å–µ–∫—É–Ω–¥–∞)
```python
for attempt in range(1, 4):
    time.sleep(1.0)
    order_status = api_client.get_spot_order(order_id, currency_pair)
    status = order_status.get('status')
    
    if status in ['closed', 'cancelled']:
        break  # –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–µ–Ω
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
[WLD] ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ FOK-–æ—Ä–¥–µ—Ä–∞ (–º–∞–∫—Å–∏–º—É–º 3 —Å–µ–∫—É–Ω–¥—ã)...
[WLD] üîç –ü–æ–ø—ã—Ç–∫–∞ 1/3: —Å—Ç–∞—Ç—É—Å = open
[WLD] üîç –ü–æ–ø—ã—Ç–∫–∞ 2/3: —Å—Ç–∞—Ç—É—Å = closed
[WLD] ‚úÖ FOK-–æ—Ä–¥–µ—Ä –∑–∞–≤–µ—Ä—à—ë–Ω –ø–æ—Å–ª–µ 2 —Å–µ–∫—É–Ω–¥ (—Å—Ç–∞—Ç—É—Å: closed)
```

### –®–∞–≥ 5: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```python
if status == 'closed':
    # ‚úÖ –ü—Ä–æ–¥–∞–∂–∞ —É—Å–ø–µ—à–Ω–∞
    profit = executed_total - total_invested
    _complete_cycle(base)  # –ó–∞–≤–µ—Ä—à–∞–µ–º —Ü–∏–∫–ª
    
elif status == 'cancelled':
    # ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏
    print("–ü–æ–≤—Ç–æ—Ä–∏–º –ø–æ–ø—ã—Ç–∫—É –ø–æ–∑–∂–µ")
    return  # –¶–∏–∫–ª –æ—Å—Ç–∞—ë—Ç—Å—è active
```

---

## üîÑ –û–ë–†–ê–ë–û–¢–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–û–í

### ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 1: CLOSED (–ò—Å–ø–æ–ª–Ω–µ–Ω)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. FOK-–æ—Ä–¥–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª–Ω–µ–Ω
2. –ü–æ–ª—É—á–µ–Ω–∞ –≤—ã—Ä—É—á–∫–∞ ‚â• target_sell_price √ó amount
3. –ë–∞–ª–∞–Ω—Å –≤–∞–ª—é—Ç—ã = 0 (–≤—Å—ë –ø—Ä–æ–¥–∞–Ω–æ)

**–î–µ–π—Å—Ç–≤–∏—è –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–∞:**
```python
# 1. –õ–æ–≥–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
print(f"–û–±—ä—ë–º –ø—Ä–æ–¥–∞–Ω–æ: {executed_amount} {base}")
print(f"–¶–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è: {executed_price}")
print(f"–ü–æ–ª—É—á–µ–Ω–æ: {executed_total} USDT")
print(f"–ü—Ä–∏–±—ã–ª—å: {profit} USDT ({profit_pct}%)")

# 2. –ó–∞–≤–µ—Ä—à–∞–µ–º —Ü–∏–∫–ª
_complete_cycle(base)
# ‚Ä¢ state: ACTIVE ‚Üí IDLE
# ‚Ä¢ cycle_id: –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
# ‚Ä¢ total_cycles_count: +1
# ‚Ä¢ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è

# 3. –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –Ω–æ–≤—ã–π —Ü–∏–∫–ª
```

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:**
```
[WLD] ‚úÖ FOK-–æ—Ä–¥–µ—Ä –ò–°–ü–û–õ–ù–ï–ù –ø–æ–ª–Ω–æ—Å—Ç—å—é
[WLD] ‚úÖ ========== –†–ï–ó–£–õ–¨–¢–ê–¢ –ò–°–ü–û–õ–ù–ï–ù–ò–Ø –û–†–î–ï–†–ê ==========
[WLD]   Status: closed
[WLD]   –û–±—ä—ë–º –ø—Ä–æ–¥–∞–Ω–æ: 100.0 WLD
[WLD]   –¶–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è: 2.50123456
[WLD]   –ü–æ–ª—É—á–µ–Ω–æ: 250.1235 USDT
[WLD]   –ó–∞–ø—Ä–æ—à–µ–Ω–æ –Ω–∞ –ø—Ä–æ–¥–∞–∂—É: 100.0 WLD
[WLD]   –¶–µ–Ω–∞ –ø–µ—Ä–µ–¥ –æ—Ä–¥–µ—Ä–æ–º: 2.50000000
[WLD] ‚úÖ ====================================================

[WLD] ‚úÖ ========== –§–ò–ù–ê–ù–°–û–í–´–ï –ü–û–ö–ê–ó–ê–¢–ï–õ–ò ==========
[WLD]   üí∞ –ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: 230.0000 USDT
[WLD]   üíµ –í—ã—Ä—É—á–∫–∞: 250.1235 USDT
[WLD]   üìà –ü—Ä–∏–±—ã–ª—å: +20.1235 USDT (+8.75%)
[WLD]   ---
[WLD]   üéØ –¢—Ä–µ–±—É–µ–º–∞—è –¥–µ–ª—å—Ç–∞: +8.70%
[WLD]   ‚úÖ –ò—Å–ø–æ–ª–Ω–µ–Ω–æ: 2.50123456 >= 2.50000000
[WLD] ‚úÖ =============================================

[WLD] ‚úÖ –¶–∏–∫–ª #42 –ó–ê–í–ï–†–®–Å–ù –£–°–ü–ï–®–ù–û
[WLD]    –í—Å–µ–≥–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤: 43
```

### ‚ùå –°—Ü–µ–Ω–∞—Ä–∏–π 2: CANCELLED (–û—Ç–º–µ–Ω—ë–Ω)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. FOK-–æ—Ä–¥–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç—å—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –ü—Ä–∏—á–∏–Ω–∞: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π ‚â• target_sell_price
3. –û—Ä–¥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—ë–Ω –±–∏—Ä–∂–µ–π
4. –ë–∞–ª–∞–Ω—Å –≤–∞–ª—é—Ç—ã –ù–ï –∏–∑–º–µ–Ω–∏–ª—Å—è (–º–æ–Ω–µ—Ç—ã –æ—Å—Ç–∞–ª–∏—Å—å)

**–î–µ–π—Å—Ç–≤–∏—è –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–∞:**
```python
# 1. –õ–æ–≥–∏—Ä—É–µ–º –ø—Ä–∏—á–∏–Ω—É
print("FOK-–æ—Ä–¥–µ—Ä –û–¢–ú–ï–ù–Å–ù (–Ω–µ —Å–º–æ–≥ –∏—Å–ø–æ–ª–Ω–∏—Ç—å—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é)")
print("–ü—Ä–∏—á–∏–Ω–∞: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å")

# 2. –ù–ï –∑–∞–≤–µ—Ä—à–∞–µ–º —Ü–∏–∫–ª
# ‚Ä¢ state: –æ—Å—Ç–∞—ë—Ç—Å—è ACTIVE
# ‚Ä¢ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –º–µ–Ω—è—é—Ç—Å—è

# 3. –°–Ω–∏–º–∞–µ–º —Ñ–ª–∞–≥ –ø—Ä–æ–¥–∞–∂–∏
_clear_selling_flag(base)

# 4. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏:
# ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏–º —Ü–µ–Ω—É —Å–Ω–æ–≤–∞
# ‚Ä¢ –ï—Å–ª–∏ —Ü–µ–Ω–∞ –≤—Å—ë –µ—â—ë –¥–æ—Å—Ç–∏–≥–ª–∞ —Ü–µ–ª–µ–≤–æ–π ‚Äî –ø–æ–≤—Ç–æ—Ä–∏–º –ø–æ–ø—ã—Ç–∫—É FOK
```

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:**
```
[WLD] ‚ùå FOK-–æ—Ä–¥–µ—Ä –û–¢–ú–ï–ù–Å–ù (–Ω–µ —Å–º–æ–≥ –∏—Å–ø–æ–ª–Ω–∏—Ç—å—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é)
[WLD]   –ü—Ä–∏—á–∏–Ω–∞: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ 2.50000000
[WLD]   –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–∂–¥–∞—Ç—å—Å—è —Ä–æ—Å—Ç–∞ —Ü–µ–Ω—ã –∏–ª–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏
[WLD]   –¶–∏–∫–ª –æ—Å—Ç–∞—ë—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º, –ø–æ–≤—Ç–æ—Ä–∏–º –ø–æ–ø—ã—Ç–∫—É –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–µ
```

### ‚ö†Ô∏è –°—Ü–µ–Ω–∞—Ä–∏–π 3: UNKNOWN (–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å)

**–ö–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç:**
- –°–±–æ–π API –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å—Ç–∞—Ç—É—Å–∞
- –ó–∞–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ –±–∏—Ä–∂–µ
- –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞

**–î–µ–π—Å—Ç–≤–∏—è –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–∞:**
```python
# 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
new_balance = api_client.get_account_balance()
balance_diff = old_balance - new_balance

# 2. –ï—Å–ª–∏ –±–∞–ª–∞–Ω—Å —É–º–µ–Ω—å—à–∏–ª—Å—è ‚â•90%
if balance_diff >= (old_balance * 0.9):
    print("–ë–∞–ª–∞–Ω—Å —É–º–µ–Ω—å—à–∏–ª—Å—è ‚Üí –æ—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω")
    status = 'closed'  # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ CLOSED
    
# 3. –ï—Å–ª–∏ –±–∞–ª–∞–Ω—Å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
else:
    print("–ë–∞–ª–∞–Ω—Å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è ‚Üí –æ—Ä–¥–µ—Ä –Ω–µ –∏—Å–ø–æ–ª–Ω–µ–Ω")
    return  # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ CANCELLED
```

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:**
```
[WLD] ‚ö†Ô∏è FOK-–æ—Ä–¥–µ—Ä –≤ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–º —Å—Ç–∞—Ç—É—Å–µ: unknown
[WLD]   –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è...
[WLD]   –ë–∞–ª–∞–Ω—Å –î–û –ø—Ä–æ–¥–∞–∂–∏: 100.00000000 WLD
[WLD]   –ë–∞–ª–∞–Ω—Å –°–ï–ô–ß–ê–°: 0.00000000 WLD
[WLD]   –†–∞–∑–Ω–∏—Ü–∞: 100.00000000 WLD
[WLD] ‚úÖ –ë–∞–ª–∞–Ω—Å —É–º–µ–Ω—å—à–∏–ª—Å—è –Ω–∞ 100.0%
[WLD] ‚úÖ –°—á–∏—Ç–∞–µ–º –æ—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –ø–æ —Ñ–∞–∫—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –¢–µ—Å—Ç 1: –£—Å–ø–µ—à–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ (CLOSED)

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ FOK-–æ—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏

**–£—Å–ª–æ–≤–∏—è:**
- –¶–∏–∫–ª –∞–∫—Ç–∏–≤–µ–Ω
- –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ ‚â• —Ü–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞
- –í—ã—Å–æ–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ FOK-–æ—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω
‚úÖ –°—Ç–∞—Ç—É—Å: closed (—á–µ—Ä–µ–∑ 1-2 —Å–µ–∫—É–Ω–¥—ã)
‚úÖ –ë–∞–ª–∞–Ω—Å –≤–∞–ª—é—Ç—ã = 0
‚úÖ –ü–æ–ª—É—á–µ–Ω–∞ –≤—ã—Ä—É—á–∫–∞ ‚â• target_sell_price √ó amount
‚úÖ –¶–∏–∫–ª –∑–∞–≤–µ—Ä—à—ë–Ω (state = IDLE)
‚úÖ total_cycles_count —É–≤–µ–ª–∏—á–µ–Ω –Ω–∞ 1
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö:**
```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ –ø—Ä–æ–¥–∞–∂–∏ —Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º AUTO
Select-String -Path "autotrader_v2_*.log" -Pattern "–ò—Å—Ç–æ—á–Ω–∏–∫: AUTO"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ FOK-–æ—Ä–¥–µ—Ä–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å
Select-String -Path "autotrader_v2_*.log" -Pattern "FOK-–æ—Ä–¥–µ—Ä.*–ò–°–ü–û–õ–ù–ï–ù"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
Select-String -Path "autotrader_v2_*.log" -Pattern "–ò—Å–ø–æ–ª–Ω–µ–Ω–æ:.*>="
```

### –¢–µ—Å—Ç 2: –û—Ç–º–µ–Ω–∞ –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ (CANCELLED)

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ FOK-–æ—Ä–¥–µ—Ä –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏

**–£—Å–ª–æ–≤–∏—è:**
- –¶–∏–∫–ª –∞–∫—Ç–∏–≤–µ–Ω
- –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ ‚â• —Ü–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞
- –ù–∏–∑–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ—á—å—é)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ FOK-–æ—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω
‚úÖ –°—Ç–∞—Ç—É—Å: cancelled (—á–µ—Ä–µ–∑ 1-2 —Å–µ–∫—É–Ω–¥—ã)
‚úÖ –ë–∞–ª–∞–Ω—Å –≤–∞–ª—é—Ç—ã –ù–ï –∏–∑–º–µ–Ω–∏–ª—Å—è
‚úÖ –¶–∏–∫–ª –æ—Å—Ç–∞–ª—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º (state = ACTIVE)
‚úÖ –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö:**
```bash
# –ù–∞–π—Ç–∏ –æ—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ FOK-–æ—Ä–¥–µ—Ä–∞
Select-String -Path "autotrader_v2_*.log" -Pattern "FOK-–æ—Ä–¥–µ—Ä –û–¢–ú–ï–ù–Å–ù"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ü–∏–∫–ª –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è
Select-String -Path "autotrader_v2_*.log" -Pattern "–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å"
```

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–Ω—ã –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –¢–û–õ–¨–ö–û –ø–æ —Ü–µ–Ω–µ ‚â• target_sell_price

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ –ø—Ä–æ–¥–∞–∂–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–Ω—É –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
Select-String -Path "autotrader_v2_*.log" -Pattern "–¶–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è:|–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞:"
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:**
```
‚úÖ –î–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–¥–∞–∂–∏:
   executed_price >= target_sell_price
   
‚ùå –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   executed_price < target_sell_price
   executed_price <= start_price
```

### –¢–µ—Å—Ç 4: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–∏–∫–ª–∞

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ü–∏–∫–ª –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ—Å–ª–µ FOK-–ø—Ä–æ–¥–∞–∂–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–∏–∫–ª–æ–≤
Select-String -Path "autotrader_v2_*.log" -Pattern "–¶–∏–∫–ª.*–ó–ê–í–ï–†–®–Å–ù –£–°–ü–ï–®–ù–û"

# –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
# 1. –ü–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –±—ã–ª FOK-–æ—Ä–¥–µ—Ä —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º closed
# 2. –ü—Ä–∏–±—ã–ª—å > 0
# 3. –¶–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è >= target_sell_price
```

---

## ‚ùì –ß–ê–°–¢–´–ï –í–û–ü–†–û–°–´

### 1. –ü–æ—á–µ–º—É FOK –º–æ–∂–µ—Ç –æ—Ç–º–µ–Ω—è—Ç—å—Å—è?

**–û—Ç–≤–µ—Ç:**
FOK –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –Ω–∞ –±–∏—Ä–∂–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π, –≥–æ—Ç–æ–≤—ã—Ö –∫—É–ø–∏—Ç—å –í–°–Æ —Å—É–º–º—É –ø–æ —Ü–µ–Ω–µ ‚â• target_sell_price.

**–ü—Ä–∏–º–µ—Ä:**
```
–í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å: 100 XRP –ø–æ 2.50 USDT
–ö–Ω–∏–≥–∞ –∑–∞—è–≤–æ–∫:
  ‚Ä¢ 80 XRP @ 2.50 USDT
  ‚Ä¢ 50 XRP @ 2.49 USDT

–†–µ–∑—É–ª—å—Ç–∞—Ç: FOK –æ—Ç–º–µ–Ω—ë–Ω (–Ω–µ—Ç 100 XRP ‚â• 2.50)
```

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –¶–∏–∫–ª –æ—Å—Ç–∞—ë—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º
- ‚úÖ –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è
- ‚úÖ –ö–æ–≥–¥–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –≤—ã—Ä–∞—Å—Ç–µ—Ç ‚Äî FOK –∏—Å–ø–æ–ª–Ω–∏—Ç—Å—è

### 2. –ß—Ç–æ –µ—Å–ª–∏ FOK –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è?

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –°–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∞—è —Ü–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–∞)
2. –ù–∏–∑–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –≤–∞–ª—é—Ç—ã
3. –ù–µ–ø–æ–¥—Ö–æ–¥—è—â–µ–µ –≤—Ä–µ–º—è (–Ω–æ—á—å, –≤—ã—Ö–æ–¥–Ω—ã–µ)

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏:
   ```python
   python breakeven_calculator.py WLD
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–Ω–∏–≥—É –∑–∞—è–≤–æ–∫:
   ```python
   python check_order_book.py WLD_USDT
   ```
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –±–æ–ª–µ–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GTC –≤–º–µ—Å—Ç–æ FOK, –Ω–æ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤.

### 3. –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IOC –≤–º–µ—Å—Ç–æ FOK?

**IOC (Immediate-Or-Cancel):**
- –ò—Å–ø–æ–ª–Ω—è–µ—Ç –í–°–Å, —á—Ç–æ –º–æ–∂–µ—Ç —Å—Ä–∞–∑—É
- –û—Å—Ç–∞—Ç–æ–∫ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è
- –ú–æ–∂–µ—Ç –±—ã—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä:**
```
–í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å: 100 XRP –ø–æ 2.50 USDT
–ö–Ω–∏–≥–∞ –∑–∞—è–≤–æ–∫: 80 XRP @ 2.50 USDT

IOC —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
  ‚Ä¢ –ü—Ä–æ–¥–∞–Ω–æ: 80 XRP
  ‚Ä¢ –ü–æ–ª—É—á–µ–Ω–æ: 200 USDT
  ‚Ä¢ –û—Å—Ç–∞—Ç–æ–∫: 20 XRP (–æ—Ç–º–µ–Ω—ë–Ω)
```

**–ü—Ä–æ–±–ª–µ–º—ã —Å IOC:**
- ‚ùå –ù—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Å—Ç–∞—Ç–æ–∫
- ‚ùå –¶–∏–∫–ª –Ω–µ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è (–æ—Å—Ç–∞–ª–æ—Å—å 20 XRP)
- ‚ùå –£—Å–ª–æ–∂–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É

**–í—ã–≤–æ–¥:**
FOK –ø—Ä–æ—â–µ –∏ –Ω–∞–¥—ë–∂–Ω–µ–µ –¥–ª—è –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–∞!

### 4. –ß—Ç–æ –µ—Å–ª–∏ –±–∞–ª–∞–Ω—Å –∏–∑–º–µ–Ω–∏–ª—Å—è, –Ω–æ —Å—Ç–∞—Ç—É—Å unknown?

**–ê–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å:**
```python
if (old_balance - new_balance) >= (old_balance * 0.9):
    # –ë–∞–ª–∞–Ω—Å —É–º–µ–Ω—å—à–∏–ª—Å—è ‚â•90% ‚Üí –æ—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω
    status = 'closed'
```

**–ì–∞—Ä–∞–Ω—Ç–∏—è:**
‚úÖ –î–∞–∂–µ –µ—Å–ª–∏ API –≤–µ—Ä–Ω—É–ª unknown, –º—ã —É–∑–Ω–∞–µ–º –ø—Ä–∞–≤–¥—É –ø–æ –±–∞–ª–∞–Ω—Å—É!

### 5. –ö–∞–∫ —á–∞—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –ø–æ–ø—ã—Ç–∫–∞ FOK –ø—Ä–∏ cancelled?

**–û—Ç–≤–µ—Ç:**
–ü—Ä–∏ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (–∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥):
```python
while True:
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–Ω—ã
    if current_price >= target_sell_price:
        # –ü–æ–ø—ã—Ç–∫–∞ FOK-–ø—Ä–æ–¥–∞–∂–∏
        create_fok_order(...)
        
        # –ï—Å–ª–∏ cancelled ‚Üí –∂–¥—ë–º —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
    
    time.sleep(10)  # –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
```

### 6. –ú–æ–∂–Ω–æ –ª–∏ –≤—Ä—É—á–Ω—É—é –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ü–∏–∫–ª –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ë–Ω–Ω–æ–≥–æ FOK?

**–î–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–±—Ä–æ—Å–∞:**
```bash
python reset_xrp_cycle.py
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚ùå –¶–∏–∫–ª "–∑–∞—Å—Ç—Ä—è–ª" –ø–æ—Å–ª–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ—Ç–º–µ–Ω—ë–Ω–Ω—ã—Ö FOK
- ‚ùå –í—ã —Ö–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —Ü–∏–∫–ª –≤—Ä—É—á–Ω—É—é
- ‚ùå –ò–∑–º–µ–Ω–∏–ª–∞—Å—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê –†–ï–®–ï–ù–ò–ô

| –°–∏—Ç—É–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å FOK | –î–µ–π—Å—Ç–≤–∏–µ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–∞ | –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ü–∏–∫–ª–∞ |
|----------|-----------|----------------------|-----------------|
| ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ | `closed` | –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ü–∏–∫–ª | IDLE |
| ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ | `cancelled` | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–∑–∂–µ | ACTIVE |
| ‚ö†Ô∏è –û—à–∏–±–∫–∞ API | `unknown` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –±–∞–ª–∞–Ω—Å–∞ |
| ‚úÖ –ë–∞–ª–∞–Ω—Å —É–º–µ–Ω—å—à–∏–ª—Å—è ‚â•90% | ‚Üí `closed` | –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ü–∏–∫–ª | IDLE |
| ‚ùå –ë–∞–ª–∞–Ω—Å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è | ‚Üí `cancelled` | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–∑–∂–µ | ACTIVE |

---

## üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ï –ü–†–ê–í–ò–õ–ê

### ‚úÖ –í–°–ï–ì–î–ê
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–¥–∞–∂–∏ = LIMIT + FOK
2. –¶–µ–Ω–∞ –æ—Ä–¥–µ—Ä–∞ = target_sell_price (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã)
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞: 3 –ø–æ–ø—ã—Ç–∫–∏ √ó 1 —Å–µ–∫—É–Ω–¥–∞
4. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–∏–∫–ª–∞ –¢–û–õ–¨–ö–û –ø—Ä–∏ status=closed
5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ FOK-–æ—Ä–¥–µ—Ä–∞

### ‚ùå –ù–ò–ö–û–ì–î–ê
1. –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GTC –¥–ª—è –∞–≤—Ç–æ–ø—Ä–æ–¥–∞–∂
2. –ù–µ –∑–∞–≤–µ—Ä—à–∞—Ç—å —Ü–∏–∫–ª –ø—Ä–∏ status=cancelled
3. –ù–µ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –ø–æ —Ü–µ–Ω–µ < target_sell_price
4. –ù–µ –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä—è—Ç—å –±–∞–ª–∞–Ω—Å –ø—Ä–∏ unknown
5. –ù–µ –Ω–∞—á–∏–Ω–∞—Ç—å –Ω–æ–≤—ã–π —Ü–∏–∫–ª –ø–æ–∫–∞ state=ACTIVE

---

## üìù –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**FOK-–æ—Ä–¥–µ—Ä–∞ ‚Äî —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–∞:**

‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å:** –†–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ 1-3 —Å–µ–∫—É–Ω–¥—ã  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ù–µ—Ç "–∑–∞–≤–∏—Å—à–∏—Ö" –æ—Ä–¥–µ—Ä–æ–≤  
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –¢–æ–ª—å–∫–æ 2 –≤–µ—Ç–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏  
‚úÖ **–ì–∞—Ä–∞–Ω—Ç–∏—è —Ü–µ–Ω—ã:** –ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–ª—å–∫–æ ‚â• target_sell_price  
‚úÖ **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:** –¶–∏–∫–ª –≤—Å–µ–≥–¥–∞ –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ FOK –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `autotrader_v2.py`
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `time_in_force='fok'` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è `gate_api_client.py`
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–º —Å—Ç–∞—Ç—É—Å–µ

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø–æ —Ü–µ–ª–µ–≤–æ–π —Ü–µ–Ω–µ
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–∏–∫–ª–æ–≤
4. ‚úÖ –û—Ç—Å–ª–µ–¥–∏—Ç—å –æ—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ FOK –∏ –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024-12-09  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot
