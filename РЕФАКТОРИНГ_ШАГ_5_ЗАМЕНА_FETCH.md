# ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ app.js: –®–∞–≥ 5 ‚Äî –ó–∞–º–µ–Ω–∞ fetch-–≤—ã–∑–æ–≤–æ–≤ –Ω–∞ API-–∫–ª–∏–µ–Ω—Ç

**–î–∞—Ç–∞**: 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### –ó–∞–º–µ–Ω–µ–Ω–æ 14 fetch-–≤—ã–∑–æ–≤–æ–≤ –Ω–∞ API-–∫–ª–∏–µ–Ω—Ç

#### 1. `subscribeToPairData(base, quote)`
- **–ë—ã–ª–æ**: `fetch('/api/pair/subscribe', {...})`
- **–°—Ç–∞–ª–æ**: `api.subscribeToPair(base, quote)`
- **–°—Ç—Ä–æ–∫–∞**: ~1257

#### 2. `saveTradeParams()`
- **–ë—ã–ª–æ**: `fetch('/api/trade/params', {...})`
- **–°—Ç–∞–ª–æ**: `api.saveTradeParams(params)`
- **–°—Ç—Ä–æ–∫–∞**: ~1793

#### 3. `loadUIState()`
- **–ë—ã–ª–æ**: `fetch('/api/ui/state')`
- **–°—Ç–∞–ª–æ**: `api.loadUIState()`
- **–°—Ç—Ä–æ–∫–∞**: ~2013

#### 4. `UIStateManager.savePartial()`
- **–ë—ã–ª–æ**: `fetch('/api/ui/state/partial', {...})`
- **–°—Ç–∞–ª–æ**: `api.loadPartialUIState([stateUpdates])`
- **–°—Ç—Ä–æ–∫–∞**: ~248

#### 5. `saveCurrenciesList()`
- **–ë—ã–ª–æ**: `fetch('/api/currencies', {...}).then(...)`
- **–°—Ç–∞–ª–æ**: `api.saveCurrencies(items)` (–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∞ –≤ async/await)
- **–°—Ç—Ä–æ–∫–∞**: ~2166

#### 6. `syncCurrenciesFromGateIO()`
- **–ë—ã–ª–æ**: `fetch('/api/currencies/sync', {...})`
- **–°—Ç–∞–ª–æ**: `api.syncCurrenciesFromGateIO(currentQuoteCurrency)`
- **–°—Ç—Ä–æ–∫–∞**: ~2178

#### 7. `updateSyncInfo()`
- **–ë—ã–ª–æ**: `fetch('/api/currencies/sync-info')`
- **–°—Ç–∞–ª–æ**: `api.getSyncInfo()`
- **–°—Ç—Ä–æ–∫–∞**: ~2204

#### 8. `fetchServerStatusOnce()`
- **–ë—ã–ª–æ**: `fetch('/api/server/status')`
- **–°—Ç–∞–ª–æ**: `api.getServerStatus()`
- **–°—Ç—Ä–æ–∫–∞**: ~2312

#### 9. `handleBuyMinOrder()`
- **–ë—ã–ª–æ**: `fetch('/api/trade/buy-min', {...})`
- **–°—Ç–∞–ª–æ**: `api.buyMinOrder(currentBaseCurrency, currentQuoteCurrency)`
- **–°—Ç—Ä–æ–∫–∞**: ~2359

#### 10. `handleSellAll()`
- **–ë—ã–ª–æ**: `fetch('/api/trade/sell-all', {...})`
- **–°—Ç–∞–ª–æ**: `api.sellAll(currentBaseCurrency, currentQuoteCurrency)`
- **–°—Ç—Ä–æ–∫–∞**: ~2387

#### 11. `handleResetCycle()`
- **–ë—ã–ª–æ**: `fetch('/api/autotrader/reset_cycle', {...})`
- **–°—Ç–∞–ª–æ**: `api.resetCycle(currentBaseCurrency, currentQuoteCurrency)`
- **–°—Ç—Ä–æ–∫–∞**: ~2570

#### 12. `handleResumeCycle()`
- **–ë—ã–ª–æ**: `fetch('/api/autotrader/resume_cycle', {...})`
- **–°—Ç–∞–ª–æ**: `api.resumeCycle(currentBaseCurrency, currentQuoteCurrency)`
- **–°—Ç—Ä–æ–∫–∞**: ~2599

#### 13. `handleServerRestart()`
- **–ë—ã–ª–æ**: `fetch('/api/server/restart', {...})`
- **–°—Ç–∞–ª–æ**: `api.restartServer()`
- **–°—Ç—Ä–æ–∫–∞**: ~2268

#### 14. `handleServerShutdown()`
- **–ë—ã–ª–æ**: `fetch('/api/server/shutdown', {...})`
- **–°—Ç–∞–ª–æ**: `api.shutdownServer()`
- **–°—Ç—Ä–æ–∫–∞**: ~2281

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–ë—ã–ª–æ** (–®–∞–≥ 4) | 2597 —Å—Ç—Ä–æ–∫ |
| **–°—Ç–∞–ª–æ** (–®–∞–≥ 5) | **2519 —Å—Ç—Ä–æ–∫** |
| **–£–º–µ–Ω—å—à–µ–Ω–∏–µ** | **‚àí78 —Å—Ç—Ä–æ–∫** |
| **–ü—Ä–æ–≥—Ä–µ—Å—Å –∫ —Ü–µ–ª–∏** | **23%** (157 / 676 —Å—Ç—Ä–æ–∫) |

---

## üéØ –û—Å—Ç–∞–≤—à–∏–µ—Å—è fetch-–≤—ã–∑–æ–≤—ã

### –°–ª–æ–∂–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Å query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (10+ —à—Ç—É–∫)

–≠—Ç–∏ –≤—ã–∑–æ–≤—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

1. `/api/pair/info?base_currency=...&quote_currency=...`
2. `/api/pair/data?base_currency=...&quote_currency=...&force=1`
3. `/api/trade/indicators?base_currency=...&quote_currency=...`
4. `/api/pair/balances?base_currency=...&quote_currency=...`

**–ü—Ä–∏—á–∏–Ω–∞, –ø–æ—á–µ–º—É –ø–æ–∫–∞ –Ω–µ –∑–∞–º–µ–Ω–µ–Ω—ã**:
- API-–∫–ª–∏–µ–Ω—Ç –Ω–µ –∏–º–µ–µ—Ç —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —ç—Ç–∏—Ö endpoint'–æ–≤
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ api-client.js

**–ü–ª–∞–Ω**:
- –í —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ –¥–æ–±–∞–≤–∏—Ç—å —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ api-client.js
- –ò–ª–∏ –≤—ã–Ω–µ—Å—Ç–∏ –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `pair-data.js`)

---

## ‚úÖ –£–ª—É—á—à–µ–Ω–∏—è

### 1. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Promise chains –≤ async/await
**–§—É–Ω–∫—Ü–∏—è**: `saveCurrenciesList()`

**–ë—ã–ª–æ**:
```javascript
fetch(...).then(r=>r.json()).then(d=>{...}).catch(e=>alert(...));
```

**–°—Ç–∞–ª–æ**:
```javascript
try{
  const d=await api.saveCurrencies(items);
  if(d.success){...}
}catch(e){alert(...);}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ë–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥
- –õ–µ–≥—á–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π —Å—Ç–∏–ª—å

### 2. –£–ø—Ä–æ—â–µ–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤
**–ë—ã–ª–æ**: 5-7 —Å—Ç—Ä–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ fetch-–≤—ã–∑–æ–≤–∞
```javascript
const resp = await fetch('/api/...', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({...})
});
const data = await resp.json();
```

**–°—Ç–∞–ª–æ**: 1 —Å—Ç—Ä–æ–∫–∞
```javascript
const data = await api.functionName(...);
```

### 3. –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
**–í `fetchServerStatusOnce`** —É–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞:
```javascript
if(!resp.ok){
  throw new Error('HTTP '+resp.status);
}
```

–¢–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ api-client.js —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ.

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ `get_errors` ‚Äî –æ—à–∏–±–æ–∫ –Ω–µ—Ç

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
   ```powershell
   python app.py
   ```

2. **–û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä**: http://127.0.0.1:5000

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å (F12)**:
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–≥—Ä—É–∑–∫–µ
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
   - ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∞–ª—é—Ç
   - ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∞–ª—é—Ç
   - ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
   - ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç–æ—Ä–≥–æ–≤–ª–∏
   - ‚úÖ –ö–Ω–æ–ø–∫–∏ Buy Min / Sell All
   - ‚úÖ –°–±—Ä–æ—Å/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–∏–∫–ª–∞
   - ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–∞–ª—é—Ç —Å Gate.io
   - ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. API-–∫–ª–∏–µ–Ω—Ç –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ 21 —Ñ—É–Ω–∫—Ü–∏—è –≤ api-client.js
- ‚úÖ 14 –∑–∞–º–µ–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ app.js
- ‚ö†Ô∏è –û—Å—Ç–∞—é—Ç—Å—è —Å–ª–æ–∂–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Å query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### 2. –ö–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º
- –í–º–µ—Å—Ç–æ 5-7 —Å—Ç—Ä–æ–∫ ‚Äî 1 —Å—Ç—Ä–æ–∫–∞
- –Ø–≤–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 3. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- –°–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π –Ω–µ –∏–∑–º–µ–Ω–µ–Ω—ã
- –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –æ—Å—Ç–∞–ª–∞—Å—å –ø—Ä–µ–∂–Ω–µ–π
- HTML-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üîú –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –®–∞–≥ 6: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API-–∫–ª–∏–µ–Ω—Ç–∞ (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è endpoint'–æ–≤
- `/api/pair/info`
- `/api/pair/data`
- `/api/trade/indicators`
- `/api/pair/balances`

**–ò–ª–∏**: –í—ã–Ω–µ—Å—Ç–∏ —ç—Ç–∏ –≤—ã–∑–æ–≤—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å `pair-data.js`

### –®–∞–≥ 7: –í—ã–Ω–æ—Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
**–¶–µ–ª—å**: ‚àí100 —Å—Ç—Ä–æ–∫
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Currency Manager
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Emoji Picker
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫

### –®–∞–≥ 8: –í—ã–Ω–æ—Å UI-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
**–¶–µ–ª—å**: ‚àí200 —Å—Ç—Ä–æ–∫
- `renderCurrencyTabs()`
- `renderBreakEvenTable()`
- `updateOrderBook()`
- `updateTradeIndicators()`

---

## üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å (–®–∞–≥–∏ 1-5)

| –®–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ | app.js (—Å—Ç—Ä–æ–∫) | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|-----|----------|----------------|-----------|
| 0 | –ò—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ | 2676 | ‚Äî |
| 1 | –í—ã–Ω–æ—Å utils | 2656 | ‚àí20 |
| 2 | –í—ã–Ω–æ—Å UI-helpers | 2621 | ‚àí35 |
| 3 | –í—ã–Ω–æ—Å formatUptime | 2611 | ‚àí10 |
| 4 | –°–æ–∑–¥–∞–Ω–∏–µ API-–∫–ª–∏–µ–Ω—Ç–∞ | 2597 | ‚àí14 |
| 5 | –ó–∞–º–µ–Ω–∞ fetch-–≤—ã–∑–æ–≤–æ–≤ | **2519** | **‚àí78** |

**–ò—Ç–æ–≥–æ**: **‚àí157 —Å—Ç—Ä–æ–∫** (‚àí5.86%)  
**–ü—Ä–æ–≥—Ä–µ—Å—Å –∫ —Ü–µ–ª–∏**: **23%** (157 / 676 —Å—Ç—Ä–æ–∫)  
**–û—Å—Ç–∞–ª–æ—Å—å –¥–æ 2000**: ~519 —Å—Ç—Ä–æ–∫

---

## üéâ –ò—Ç–æ–≥

**–®–∞–≥ 5 –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ!**

- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–æ 14 fetch-–≤—ã–∑–æ–≤–æ–≤
- ‚úÖ –ö–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º –∏ –º–æ–¥—É–ª—å–Ω—ã–º
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω –Ω–∞ 78 —Å—Ç—Ä–æ–∫
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –Ω–µ—Ç
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API-–∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –≤—ã–Ω–æ—Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π

---

**–ê–≤—Ç–æ—Ä**: GitHub Copilot  
**–î–∞—Ç–∞**: 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ
