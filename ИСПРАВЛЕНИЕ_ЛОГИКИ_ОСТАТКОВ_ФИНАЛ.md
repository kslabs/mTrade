# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –õ–û–ì–ò–ö–ò –û–ë–†–ê–ë–û–¢–ö–ò –û–°–¢–ê–¢–ö–û–í - –§–ò–ù–ê–õ

## üî¥ –ü–†–û–ë–õ–ï–ú–ê

**–°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –ë–õ–û–ö–ò–†–û–í–ê–õ–ê —Ç–æ—Ä–≥–æ–≤–ª—é –Ω–∞–≤–µ—á–Ω–æ**, –µ—Å–ª–∏ –Ω–µ —É–¥–∞–≤–∞–ª–æ—Å—å –ø—Ä–æ–¥–∞—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ –º–æ–Ω–µ—Ç:

```python
# ‚ùå –°–¢–ê–†–ê–Ø (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê–Ø) –õ–û–ì–ò–ö–ê:
has_balance_blocking = check_and_reset_if_empty()  # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True –µ—Å–ª–∏ –µ—Å—Ç—å –æ—Å—Ç–∞—Ç–∫–∏

if has_balance_blocking:
    try_sell_idle_balance()  # –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–¥–∞—Ç—å
    continue  # ‚ùå –ë–õ–û–ö–ò–†–£–ï–ú –Ω–æ–≤—ã–π —Ü–∏–∫–ª –ù–ê–í–°–ï–ì–î–ê!

# –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –±–∞–ª–∞–Ω—Å —á–∏—Å—Ç ‚Üí –∑–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª
try_start_cycle()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ï—Å–ª–∏ –ø—Ä–æ–¥–∞–∂–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å (–∑–∞–≤–∏—Å–ª–∞, –æ—à–∏–±–∫–∞ API, —Ü–µ–Ω–∞ –Ω–µ –ø–æ–¥–æ—à–ª–∞) ‚Üí —Ç–æ—Ä–≥–æ–≤–ª—è **–û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–¢–°–Ø**.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –ù–ò–ö–û–ì–î–ê –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–æ—Ä–≥–æ–≤–ª—é:**

```python
# ‚úÖ –ù–û–í–ê–Ø (–ü–†–ê–í–ò–õ–¨–ù–ê–Ø) –õ–û–ì–ò–ö–ê:
has_balance = check_balance_exists()  # –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞

if has_balance:
    # ‚úÖ –ï—Å—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ ‚Üí –ø—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–¥–∞—Ç—å
    try_sell_idle_balance()
    # ‚úÖ –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º! –°–ª–µ–¥—É—é—â–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ–ø—Ä–æ–±—É–µ—Ç —Å–Ω–æ–≤–∞
else:
    # ‚úÖ –ë–∞–ª–∞–Ω—Å —á–∏—Å—Ç ‚Üí —Å—Ç–∞—Ä—Ç—É–µ–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª
    try_start_cycle()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ï—Å–ª–∏ –ø—Ä–æ–¥–∞–∂–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å ‚Üí **—á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –ø–æ–ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞**. –¢–æ—Ä–≥–æ–≤–ª—è **–ù–ï –û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–¢–°–Ø**.

---

## üéØ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ù–û–í–û–ô –õ–û–ì–ò–ö–ò

### 1Ô∏è‚É£ –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–æ—Ä–≥–æ–≤–ª—é
- –ï—Å–ª–∏ –µ—Å—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ ‚Üí –ø—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–¥–∞—Ç—å **–∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É**
- –ï—Å–ª–∏ –ø—Ä–æ–¥–∞—Ç—å –Ω–µ —É–¥–∞–ª–æ—Å—å ‚Üí **–ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø—ã—Ç–∞—Ç—å—Å—è**
- –¢–æ—Ä–≥–æ–≤–ª—è **–ù–ò–ö–û–ì–î–ê** –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

### 2Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- –ï—Å–ª–∏ API –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí **–∂–¥—ë–º –∏ –ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞**
- –ï—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–µ –ø–æ–¥–æ—à–ª–∞ ‚Üí **–∂–¥—ë–º –ª—É—á—à–µ–π —Ü–µ–Ω—ã**
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–µ—Ç–∏ ‚Üí **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º**

### 3Ô∏è‚É£ –£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤
- –ú–∞–ª—ã–µ –æ—Å—Ç–∞—Ç–∫–∏ (< –º–∏–Ω–∏–º—É–º–∞) ‚Üí **–∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è** (—Å–±—Ä–æ—Å —Ü–∏–∫–ª–∞)
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏ ‚Üí **–ø—Ä–æ–¥–∞—é—Ç—Å—è** (IOC –æ—Ä–¥–µ—Ä)
- –û—á–µ–Ω—å –±–æ–ª—å—à–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ ‚Üí **–º–æ–∂–Ω–æ —É—Å—Ä–µ–¥–Ω–∏—Ç—å—Å—è** (–¥–æ–∫—É–ø–∏—Ç—å)

---

## üìù –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò

### 1. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞: `_check_and_reset_if_empty` ‚Üí `_check_balance_exists`

**–ë—ã–ª–æ:**
- –ü—Ä–æ–≤–µ—Ä—è–ª–∞ –±–∞–ª–∞–Ω—Å
- **–ë–õ–û–ö–ò–†–û–í–ê–õ–ê** –∞–≤—Ç–æ—Å—Ç–∞—Ä—Ç –µ—Å–ª–∏ –µ—Å—Ç—å –æ—Å—Ç–∞—Ç–∫–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–ª–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

**–°—Ç–∞–ª–æ:**
- **–¢–û–õ–¨–ö–û –ø—Ä–æ–≤–µ—Ä—è–µ—Ç** –±–∞–ª–∞–Ω—Å
- **–ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç** –Ω–∏—á–µ–≥–æ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True/False (–µ—Å—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ / –Ω–µ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤)

### 2. –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≥–ª–∞–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

**–ë—ã–ª–æ:**
```python
has_blocking = check_and_reset_if_empty()
if has_blocking:
    try_sell_idle_balance()
    continue  # ‚ùå –ë–õ–û–ö–ò–†–û–í–ö–ê!
try_start_cycle()
```

**–°—Ç–∞–ª–æ:**
```python
has_balance = check_balance_exists()
if has_balance:
    try_sell_idle_balance()  # ‚úÖ –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–¥–∞—Ç—å
else:
    try_start_cycle()  # ‚úÖ –°—Ç–∞—Ä—Ç—É–µ–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª
```

---

## üîç –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –¢–ï–ü–ï–†–¨

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ï—Å—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ LINK (~3 –º–æ–Ω–µ—Ç—ã)

**–ò—Ç–µ—Ä–∞—Ü–∏—è 1:**
```
[LINK] ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—Å—Ç–∞—Ç–∫–∏: 3.05 LINK (–º–∏–Ω: 0.71)
[LINK] üîÑ === –ê–í–¢–û–ü–†–û–î–ê–ñ–ê –û–°–¢–ê–¢–ö–û–í –í IDLE –°–û–°–¢–û–Ø–ù–ò–ò ===
[LINK] üöÄ –°–æ–∑–¥–∞–µ–º –æ—Ä–¥–µ—Ä –Ω–∞ –ø—Ä–æ–¥–∞–∂—É: 3.05 LINK @ 13.978
[LINK] ‚úÖ –û—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω: 123456789
[LINK] ‚úÖ –¶–∏–∫–ª —Å–±—Ä–æ—à–µ–Ω –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏
```

**–ò—Ç–µ—Ä–∞—Ü–∏—è 2 (—á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É):**
```
[LINK] ‚úÖ –ë–∞–ª–∞–Ω—Å —á–∏—Å—Ç (0.00 < 0.71)
[LINK] [LOCK] –§–ª–∞–≥ _buying_in_progress —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
[LINK] –°–æ–∑–¥–∞–Ω–∏–µ MARKET BUY: 10.0 USDT
[LINK] [OK] –¶–ò–ö–õ –ó–ê–ü–£–©–ï–ù! (ID=4)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ–¥–∞–∂–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å (API –∑–∞–≤–∏—Å–ª–æ)

**–ò—Ç–µ—Ä–∞—Ü–∏—è 1:**
```
[LINK] ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—Å—Ç–∞—Ç–∫–∏: 3.05 LINK
[LINK] üîÑ === –ê–í–¢–û–ü–†–û–î–ê–ñ–ê –û–°–¢–ê–¢–ö–û–í ===
[LINK] üîÑ [DEBUG] –í—ã–∑–æ–≤ create_spot_order()...
<–∑–∞–≤–∏—Å–∞–Ω–∏–µ>
```

**–ò—Ç–µ—Ä–∞—Ü–∏—è 2 (—á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É):**
```
[LINK] ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—Å—Ç–∞—Ç–∫–∏: 3.05 LINK
[LINK] üîÑ === –ê–í–¢–û–ü–†–û–î–ê–ñ–ê –û–°–¢–ê–¢–ö–û–í ===
[LINK] üîÑ [DEBUG] –í—ã–∑–æ–≤ create_spot_order()...
[LINK] ‚úÖ –û—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω: 789012345
```

**‚úÖ –¢–æ—Ä–≥–æ–≤–ª—è –ù–ï –û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–¢–°–Ø!**

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Å—Ç–∞—Ç–∫–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª—ã

**–ò—Ç–µ—Ä–∞—Ü–∏—è 1:**
```
[LINK] ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—Å—Ç–∞—Ç–∫–∏: 0.05 LINK (–º–∏–Ω: 0.71)
[LINK] üîÑ === –ê–í–¢–û–ü–†–û–î–ê–ñ–ê –û–°–¢–ê–¢–ö–û–í ===
[LINK] ‚ö†Ô∏è –û–±—ä–µ–º 0.05 –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ 0.1
[LINK] üóëÔ∏è –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ü–∏–∫–ª, –æ—Å—Ç–∞—Ç–∫–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª—ã
[LINK] ‚úÖ –¶–∏–∫–ª —Å–±—Ä–æ—à–µ–Ω, –æ—Å—Ç–∞—Ç–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
```

**–ò—Ç–µ—Ä–∞—Ü–∏—è 2:**
```
[LINK] ‚úÖ –ë–∞–ª–∞–Ω—Å —á–∏—Å—Ç (0.00 < 0.71)
[LINK] –°–æ–∑–¥–∞–Ω–∏–µ MARKET BUY: 10.0 USDT
[LINK] [OK] –¶–ò–ö–õ –ó–ê–ü–£–©–ï–ù!
```

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ | –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ |
|----------|---------------|--------------|
| **–ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–æ—Ä–≥–æ–≤–ª—é?** | ‚úÖ –î–ê (–Ω–∞–≤—Å–µ–≥–¥–∞!) | ‚ùå –ù–ï–¢ (–Ω–∏–∫–æ–≥–¥–∞!) |
| **–ß—Ç–æ –µ—Å–ª–∏ –ø—Ä–æ–¥–∞–∂–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å?** | ‚õî –°—Ç–æ–ø —Ç–æ—Ä–≥–æ–≤–ª–∏ | ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ |
| **–ß—Ç–æ –µ—Å–ª–∏ API –∑–∞–≤–∏—Å–ª–æ?** | ‚õî –°—Ç–æ–ø —Ç–æ—Ä–≥–æ–≤–ª–∏ | ‚úÖ –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ | –¢–æ–ª—å–∫–æ –≤–∞–∂–Ω–æ–µ |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | –ù–∏–∑–∫–∞—è (–º–æ–∂–Ω–æ –∑–∞—Å—Ç—Ä—è—Ç—å) | –í—ã—Å–æ–∫–∞—è (–≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç) |

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
[LINK] ‚ö†Ô∏è –û–°–¢–ê–¢–ö–ò –û–ë–ù–ê–†–£–ñ–ï–ù–´ ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê –ê–í–¢–û–°–¢–ê–†–¢–ê
[LINK] –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–æ–¥–∞–∂–∏... (–∑–∞–≤–∏—Å–ª–æ)
<—Ç–æ—Ä–≥–æ–≤–ª—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞–≤—Å–µ–≥–¥–∞>
```

### –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
[LINK] ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—Å—Ç–∞—Ç–∫–∏ ‚Üí –ø—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–¥–∞—Ç—å
[LINK] –ü–æ–ø—ã—Ç–∫–∞ 1... (–∑–∞–≤–∏—Å–ª–æ)
[LINK] –ü–æ–ø—ã—Ç–∫–∞ 2... (–∑–∞–≤–∏—Å–ª–æ)
[LINK] –ü–æ–ø—ã—Ç–∫–∞ 3... ‚úÖ –ü–†–û–î–ê–ù–û!
[LINK] ‚úÖ –ë–∞–ª–∞–Ω—Å —á–∏—Å—Ç ‚Üí –∑–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
[LINK] [OK] –¶–ò–ö–õ –ó–ê–ü–£–©–ï–ù!
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –ù–ï–¢
- ‚úÖ –õ–æ–≥–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞
- ‚úÖ –¢–æ—Ä–≥–æ–≤–ª—è –ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ

---

## üìÅ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

**autotrader_v2.py:**
- –°—Ç—Ä–æ–∫–∏ 450-480: `_check_balance_exists()` (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –∏ —É–ø—Ä–æ—â–µ–Ω–∞)
- –°—Ç—Ä–æ–∫–∏ 340-370: –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª (–∏–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Å—Ç–∞—Ç–∫–æ–≤)

---

**–î–∞—Ç–∞:** 2025-12-12  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É  
**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –¢–æ—Ä–≥–æ–≤–ª—è –ù–ò–ö–û–ì–î–ê –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
