# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤ –∏–∑ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

**–†–∞–Ω–µ–µ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
- –í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å —Ñ–µ–π–∫–æ–≤—ã–µ –±–∞–ª–∞–Ω—Å—ã –∏–∑ localStorage
- –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: USDT=10000, BTC=1, ETH=10
- –ë–∞–ª–∞–Ω—Å –º–æ–∂–Ω–æ –±—ã–ª–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ prompt
- **–†–∞–∑–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**
- –≠—Ç–æ –≤–≤–æ–¥–∏–ª–æ –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

**–¢–µ–ø–µ—Ä—å (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
- **–í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ** –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **—Ä–µ–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –∏–∑ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏ Gate.io**
- **–í —Ä–∞–±–æ—á–µ–º —Ä–µ–∂–∏–º–µ** –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **—Ä–µ–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –∏–∑ —Ä–∞–±–æ—á–µ–π —Å–µ—Ç–∏ Gate.io**
- –í—Å–µ –±–∞–ª–∞–Ω—Å—ã –±–µ—Ä—É—Ç—Å—è —á–µ—Ä–µ–∑ API `/api/pair/balances`
- **–ù–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- **–ù–µ—Ç localStorage** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤
- **–ù–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è** —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤

---

## üîß –í–Ω–µ—Å—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `editQuoteBalance()`
**–ë—ã–ª–æ:** 40+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞  
**–°—Ç–∞–ª–æ:** –£–¥–∞–ª–µ–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é

### 2. –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `loadTestBalance()`
**–ë—ã–ª–æ:** –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–µ–π–∫–æ–≤—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤ –∏–∑ localStorage  
**–°—Ç–∞–ª–æ:** –£–¥–∞–ª–µ–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é

### 3. –£–ø—Ä–æ—â–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `updateHeaderQuoteBalance()`
**–ë—ã–ª–æ:**
```javascript
// –í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –¥–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
if(currentNetworkMode==='test'){
  balanceEl.style.cursor='pointer';
  balanceEl.title='–ö–ª–∏–∫ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Ç–µ—Å—Ç —Ä–µ–∂–∏–º)';
}
```

**–°—Ç–∞–ª–æ:**
```javascript
balanceEl.style.cursor='default';
balanceEl.title='–ë–∞–ª–∞–Ω—Å –∏–∑ API';
```

### 4. –£–±—Ä–∞–Ω onclick –∏–∑ HTML
**–ë—ã–ª–æ:**
```html
<span id="headerQuoteBalance" onclick="editQuoteBalance()" title="–ö–ª–∏–∫ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è">
```

**–°—Ç–∞–ª–æ:**
```html
<span id="headerQuoteBalance" title="–ë–∞–ª–∞–Ω—Å –∏–∑ API">
```

### 5. –£–±—Ä–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ localStorage –≤ loadPairBalances()
**–ë—ã–ª–æ:**
```javascript
if(currentNetworkMode==='test'){
  const testBase=loadTestBalance(currentBaseCurrency);
  const testQuote=loadTestBalance(currentQuoteCurrency);
  if(testBase!==null) baseAvail=testBase;
  if(testQuote!==null) quoteAvail=testQuote;
}
```

**–°—Ç–∞–ª–æ:**
```javascript
// –í—Å–µ –±–∞–ª–∞–Ω—Å—ã –±–µ—Ä—É—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ API (work –∏–ª–∏ test —Å–µ—Ç–∏)
```

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å

### –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (work):
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. API –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∏–∑ **—Ä–∞–±–æ—á–µ–π —Å–µ—Ç–∏** Gate.io
3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **—Ä–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å** –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (test):
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
2. API –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∏–∑ **—Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏** Gate.io (testnet)
3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **—Ä–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å** –∏–∑ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

### –í–∞–∂–Ω–æ:
- ‚úÖ –ù–µ—Ç —Ñ–µ–π–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ù–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –ù–µ—Ç localStorage
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API
- ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–æ –≤—Å–µ—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω API-–∫–ª—é—á)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ:
```
1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–æ—Ç–∏—Ä—É–µ–º–æ–π –≤–∞–ª—é—Ç—ã
3. –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –∏–∑ testnet Gate.io
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ä–∞–±–æ—á–µ–º —Ä–µ–∂–∏–º–µ:
```
1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –≤ —Ä–∞–±–æ—á–∏–π —Ä–µ–∂–∏–º
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–æ—Ç–∏—Ä—É–µ–º–æ–π –≤–∞–ª—é—Ç—ã
3. –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API Gate.io
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö:
```
1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Chrome
2. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Firefox
3. –ë–∞–ª–∞–Ω—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–¥–Ω–∏ API-–∫–ª—é—á–∏)
```

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API endpoint: `/api/pair/balances`
```python
# mTrade.py - —Å—Ç—Ä–æ–∫–∞ ~700
@app.route('/api/pair/balances', methods=['GET'])
def get_pair_balances():
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç CURRENT_NETWORK_MODE ('work' –∏–ª–∏ 'test')
    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã —á–µ—Ä–µ–∑ Gate.io API
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Å–µ—Ç–∏
```

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥:
```javascript
// templates/index.html
async function loadPairBalances(){
  const r = await fetch(
    `/api/pair/balances?base_currency=${currentBaseCurrency}&quote_currency=${currentQuoteCurrency}`
  );
  const d = await r.json();
  
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ API
  let baseAvail = parseFloat(d.balances?.base?.available||'0');
  let quoteAvail = parseFloat(d.balances?.quote?.available||'0');
  
  // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º
  updateHeaderQuoteBalance(quoteAvail);
}
```

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–ß–µ—Å—Ç–Ω–æ—Å—Ç—å** - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
2. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–æ –≤—Å–µ—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
3. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –º–µ–Ω—å—à–µ –∫–æ–¥–∞, –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫
4. **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** - –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç localStorage
5. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞

---

## üóëÔ∏è –£–¥–∞–ª—ë–Ω–Ω—ã–π –∫–æ–¥

### –í—Å–µ–≥–æ —É–¥–∞–ª–µ–Ω–æ:
- **~70 —Å—Ç—Ä–æ–∫** JavaScript –∫–æ–¥–∞
- **2 —Ñ—É–Ω–∫—Ü–∏–∏**: `editQuoteBalance()`, `loadTestBalance()`
- **1 onclick** –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ HTML
- **localStorage** –¥–ª—è –±–∞–ª–∞–Ω—Å–æ–≤

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `templates/index.html` - —É–¥–∞–ª–µ–Ω–æ ~70 —Å—Ç—Ä–æ–∫, —É–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

- [x] –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `editQuoteBalance()`
- [x] –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `loadTestBalance()`
- [x] –£–ø—Ä–æ—â–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `updateHeaderQuoteBalance()`
- [x] –£–±—Ä–∞–Ω `onclick="editQuoteBalance()"` –∏–∑ HTML
- [x] –£–±—Ä–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ localStorage –≤ `loadPairBalances()`
- [x] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ
- [x] –ë–∞–ª–∞–Ω—Å—ã –±–µ—Ä—É—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ API
- [x] –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- [x] –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–∞–±–æ—á–µ–º —Ä–µ–∂–∏–º–µ

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –∏–∑ Gate.io API (—Ç–µ—Å—Ç–æ–≤–∞—è –∏–ª–∏ —Ä–∞–±–æ—á–∞—è —Å–µ—Ç—å).**

–ù–∏–∫–∞–∫–∏—Ö —Ñ–µ–π–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ localStorage! ‚úÖ

---

**–î–∞—Ç–∞:** 2025-11-09  
**–í–µ—Ä—Å–∏—è:** v1.8.1  
**–¢–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (fix)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
