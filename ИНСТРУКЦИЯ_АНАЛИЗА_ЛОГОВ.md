# üîç –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ê–ù–ê–õ–ò–ó–£ –õ–û–ì–û–í –ü–†–û–î–ê–ñ

## üìã –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ª–æ–≥–∏

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞, –∫–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–æ–¥–∞–∂–∏ –≤—ã–≤–æ–¥–∏—Ç **3 –±–ª–æ–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**:

### 1Ô∏è‚É£ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–ï–†–ï–î –ü–†–û–î–ê–ñ–ï–ô
```
[XRP] üî¥ ========== –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–ï–†–ï–î –ü–†–û–î–ê–ñ–ï–ô ==========
[XRP]   rate (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã): 2.0780
[XRP]   target_delta_pct (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã): 0.45
[XRP]   breakeven_price (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã): 2.0780
[XRP]   start_price (—Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏): 2.0880
[XRP]   price (—Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞): 2.0900
[XRP]   base_volume: 4.808
[XRP]   active_step: 0
[XRP] üî¥ ===============================================
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:**
- `target_delta_pct` ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–æ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –î–û–õ–ñ–ï–ù –±—ã—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏
- `start_price` ‚Äî —Ä–µ–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏
- `rate` ‚Äî —Ä–∞—Å—á—ë—Ç–Ω—ã–π –∫—É—Ä—Å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã (–º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç start_price!)

---

### 2Ô∏è‚É£ –ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ü–†–û–°–ê –ù–ê –ü–†–û–î–ê–ñ–£
```
[XRP] üîµ ========== –ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ü–†–û–°–ê –ù–ê –ü–†–û–î–ê–ñ–£ ==========
[XRP]   currency_pair: XRP_USDT
[XRP]   side: sell
[XRP]   order_type: market
[XRP]   amount: 4.808 XRP
[XRP]   ---
[XRP]   –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ —Ä—ã–Ω–∫–∞: 2.0840
[XRP]   –¶–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: 2.0873
[XRP]   –¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ (start_price): 2.0880
[XRP]   –û–∂–∏–¥–∞–µ–º–∞—è –¥–µ–ª—å—Ç–∞: -0.19%
[XRP]   –¢—Ä–µ–±—É–µ–º–∞—è –¥–µ–ª—å—Ç–∞ (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã): 0.45%
[XRP]   –û–∂–∏–¥–∞–µ–º–∞—è –≤—ã—Ä—É—á–∫–∞: ~10.0198 USDT
[XRP] üîµ =====================================================
```

**–ß–¢–û –ò–°–ö–ê–¢–¨ –ó–î–ï–°–¨:**
- ‚úÖ **–û–∂–∏–¥–∞–µ–º–∞—è –¥–µ–ª—å—Ç–∞ >= –¢—Ä–µ–±—É–µ–º–∞—è –¥–µ–ª—å—Ç–∞** (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ‚â• `target_delta_pct`)
- ‚úÖ **–¶–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ > –¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏** (target_sell_price > start_price)
- ‚úÖ **–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ >= –¶–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏**

‚ùå **–ï–°–õ–ò –í–ò–î–ò–¢–ï –≠–¢–û ‚Äî –û–®–ò–ë–ö–ê!**
```
–û–∂–∏–¥–∞–µ–º–∞—è –¥–µ–ª—å—Ç–∞: -0.19%   ‚Üê –û–¢–†–ò–¶–ê–¢–ï–õ–¨–ù–ê–Ø!
–¢—Ä–µ–±—É–µ–º–∞—è –¥–µ–ª—å—Ç–∞: 0.45%    ‚Üê –î–û–õ–ñ–ù–ê –ë–´–¢–¨ >= 0.45%
```

---

### 3Ô∏è‚É£ –†–ï–ó–£–õ–¨–¢–ê–¢ –ò–°–ü–û–õ–ù–ï–ù–ò–Ø –û–†–î–ï–†–ê
```
[XRP] ‚úÖ ========== –†–ï–ó–£–õ–¨–¢–ê–¢ –ò–°–ü–û–õ–ù–ï–ù–ò–Ø –û–†–î–ï–†–ê ==========
[XRP]   Status: closed
[XRP]   –û–±—ä—ë–º –ø—Ä–æ–¥–∞–Ω–æ: 4.808 XRP
[XRP]   –¶–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è: 2.0840
[XRP]   –ü–æ–ª—É—á–µ–Ω–æ: 10.0199 USDT
[XRP]   ---
[XRP]   –ó–∞–ø—Ä–æ—à–µ–Ω–æ –Ω–∞ –ø—Ä–æ–¥–∞–∂—É: 4.808 XRP
[XRP]   –¶–µ–Ω–∞ –ø–µ—Ä–µ–¥ –æ—Ä–¥–µ—Ä–æ–º: 2.0840
[XRP] ====================================================
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:**
- –¶–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è ‚âà –¶–µ–Ω–∞ –ø–µ—Ä–µ–¥ –æ—Ä–¥–µ—Ä–æ–º (–Ω–µ –¥–æ–ª–∂–Ω–∞ —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è)
- –û–±—ä—ë–º –ø—Ä–æ–¥–∞–Ω–æ = –ó–∞–ø—Ä–æ—à–µ–Ω–æ –Ω–∞ –ø—Ä–æ–¥–∞–∂—É

---

### 4Ô∏è‚É£ –§–ò–ù–ê–ù–°–û–í–´–ï –ü–û–ö–ê–ó–ê–¢–ï–õ–ò
```
[XRP] üí∞ ========== –§–ò–ù–ê–ù–°–û–í–´–ï –ü–û–ö–ê–ó–ê–¢–ï–õ–ò ==========
[XRP]   –ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: 9.9994 USDT
[XRP]   –ü–æ–ª—É—á–µ–Ω–æ: 10.0199 USDT
[XRP]   –ü—Ä–æ—Ñ–∏—Ç: 0.0205 USDT (+0.21%)
[XRP]   ---
[XRP]   –¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏: 2.0880
[XRP]   –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: 2.0840
[XRP]   –†–æ—Å—Ç —Ü–µ–Ω—ã: -0.19%
[XRP]   –¢—Ä–µ–±—É–µ–º—ã–π —Ä–æ—Å—Ç (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã): +0.45%
[XRP] ==============================================
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨:**
- ‚ùå **–†–æ—Å—Ç —Ü–µ–Ω—ã: -0.19%** (–û–¢–†–ò–¶–ê–¢–ï–õ–¨–ù–´–ô! –ü—Ä–æ–¥–∞–∂–∞ –Ω–∏–∂–µ —Ü–µ–Ω—ã –ø–æ–∫—É–ø–∫–∏!)
- ‚ùå **–¢—Ä–µ–±—É–µ–º—ã–π —Ä–æ—Å—Ç: +0.45%** (–ù–ï –î–û–°–¢–ò–ì–ù–£–¢!)

---

## üö® –¢–ò–ü–û–í–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –ö–ê–ö –ò–• –í–´–Ø–í–ò–¢–¨

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü—Ä–æ–¥–∞–∂–∞ –Ω–∏–∂–µ —Ü–µ–Ω—ã –ø–æ–∫—É–ø–∫–∏
**–ü—Ä–∏–∑–Ω–∞–∫–∏ –≤ –ª–æ–≥–∞—Ö:**
```
–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏: 2.0880
–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: 2.0840
–†–æ—Å—Ç —Ü–µ–Ω—ã: -0.19%    ‚Üê –û–¢–†–ò–¶–ê–¢–ï–õ–¨–ù–´–ô!
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- `target_sell_price` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç `rate`, –∞ –Ω–µ –æ—Ç `start_price`
- –ï—Å–ª–∏ `rate < start_price`, —Ç–æ target_sell_price –º–æ–∂–µ—Ç –±—ã—Ç—å < start_price

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –í autotrader_v2.py, –ø–æ—Å–ª–µ —Ä–∞—Å—á—ë—Ç–∞ target_sell_price:
if target_sell_price <= start_price:
    print(f"üö® –ü–†–û–î–ê–ñ–ê –û–¢–ú–ï–ù–ï–ù–ê!")
    return
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–æ—Å—Ç —Ü–µ–Ω—ã
**–ü—Ä–∏–∑–Ω–∞–∫–∏ –≤ –ª–æ–≥–∞—Ö:**
```
–û–∂–∏–¥–∞–µ–º–∞—è –¥–µ–ª—å—Ç–∞: 0.29%
–¢—Ä–µ–±—É–µ–º–∞—è –¥–µ–ª—å—Ç–∞ (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã): 0.45%    ‚Üê –ù–ï –î–û–°–¢–ò–ì–ù–£–¢–ê!
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `price < target_sell_price` –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞
- –ò–ª–∏ `target_sell_price` —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á—ë—Ç:
```python
target_sell_price = rate * (1 + target_delta_pct / 100.0)
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```python
target_sell_price = start_price * (1 + target_delta_pct / 100.0)
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: rate ‚â† start_price
**–ü—Ä–∏–∑–Ω–∞–∫–∏ –≤ –ª–æ–≥–∞—Ö:**
```
rate (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã): 2.0780
start_price (—Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏): 2.0880
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –¢–∞–±–ª–∏—Ü–∞ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º `start_price`
- –ü–∞—Ä–∞–º–µ—Ç—Ä `start_price` –≤ config.json —É—Å—Ç–∞—Ä–µ–ª

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å `start_price` –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö:
```python
params['start_price'] = executed_price
self.state_manager.set_breakeven_params(base, params)
```

2. –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å —Ä–µ–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π:
```python
table = calculate_breakeven_table(params, current_price=executed_price)
```

---

## üìä –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê –õ–û–ì–û–í

### 1. –ù–∞–π—Ç–∏ –≤—Å–µ –±–ª–æ–∫–∏ "–ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ü–†–û–°–ê –ù–ê –ü–†–û–î–ê–ñ–£"
```powershell
Get-Content autotrader.log | Select-String "–ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ü–†–û–°–ê –ù–ê –ü–†–û–î–ê–ñ–£" -Context 0,12
```

### 2. –ù–∞–π—Ç–∏ –≤—Å–µ –ø—Ä–æ–¥–∞–∂–∏ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π –¥–µ–ª—å—Ç–æ–π
```powershell
Get-Content autotrader.log | Select-String "–†–æ—Å—Ç —Ü–µ–Ω—ã: -" -Context 5,5
```

### 3. –ù–∞–π—Ç–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –º–µ–∂–¥—É –æ–∂–∏–¥–∞–µ–º–æ–π –∏ —Ç—Ä–µ–±—É–µ–º–æ–π –¥–µ–ª—å—Ç–æ–π
```powershell
Get-Content autotrader.log | Select-String "–û–∂–∏–¥–∞–µ–º–∞—è –¥–µ–ª—å—Ç–∞|–¢—Ä–µ–±—É–µ–º–∞—è –¥–µ–ª—å—Ç–∞" -Context 1,1
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
```powershell
Get-Content autotrader.log | Select-String "–§–ò–ù–ê–ù–°–û–í–´–ï –ü–û–ö–ê–ó–ê–¢–ï–õ–ò" -Context 0,10
```

---

## ‚úÖ –ü–†–ò–ú–ï–† –ü–†–ê–í–ò–õ–¨–ù–û–ô –ü–†–û–î–ê–ñ–ò

```
[BTC] üî¥ ========== –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–ï–†–ï–î –ü–†–û–î–ê–ñ–ï–ô ==========
[BTC]   rate (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã): 96.35
[BTC]   target_delta_pct (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã): 4.65
[BTC]   start_price (—Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏): 100.00
[BTC]   price (—Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞): 101.50
[BTC] üî¥ ===============================================

[BTC] üîµ ========== –ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ü–†–û–°–ê –ù–ê –ü–†–û–î–ê–ñ–£ ==========
[BTC]   –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ —Ä—ã–Ω–∫–∞: 101.50
[BTC]   –¶–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: 100.83
[BTC]   –¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ (start_price): 100.00
[BTC]   –û–∂–∏–¥–∞–µ–º–∞—è –¥–µ–ª—å—Ç–∞: 1.50%        ‚úÖ –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–ê–Ø
[BTC]   –¢—Ä–µ–±—É–µ–º–∞—è –¥–µ–ª—å—Ç–∞: 4.65%         ‚ùå –ù–ï –î–û–°–¢–ò–ì–ù–£–¢–ê!
[BTC] üîµ =====================================================
```

**–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ:**
- ‚ùå –û–∂–∏–¥–∞–µ–º–∞—è –¥–µ–ª—å—Ç–∞ (1.50%) < –¢—Ä–µ–±—É–µ–º–∞—è –¥–µ–ª—å—Ç–∞ (4.65%)
- ‚ùå –ü—Ä–æ–¥–∞–∂–∞ –ù–ï –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å!

---

## üéØ –ö–†–ò–¢–ï–†–ò–ò –ü–†–ê–í–ò–õ–¨–ù–û–ô –ü–†–û–î–ê–ñ–ò

–ü—Ä–æ–¥–∞–∂–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å **–¢–û–õ–¨–ö–û** –µ—Å–ª–∏:

1. ‚úÖ `target_sell_price > start_price` (—Ü–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –≤—ã—à–µ —Ü–µ–Ω—ã –ø–æ–∫—É–ø–∫–∏)
2. ‚úÖ `current_price >= target_sell_price` (—Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –¥–æ—Å—Ç–∏–≥–ª–∞ —Ü–µ–ª–µ–≤–æ–π)
3. ‚úÖ `–æ–∂–∏–¥–∞–µ–º–∞—è_–¥–µ–ª—å—Ç–∞ >= target_delta_pct` (—Ä–æ—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–±–ª–∏—Ü–µ)
4. ‚úÖ `—Ä–æ—Å—Ç_—Ü–µ–Ω—ã > 0%` (—Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞, –∞ –Ω–µ —É–ø–∞–ª–∞)

---

## üìù –ß–¢–û –î–ï–õ–ê–¢–¨ –ü–û–°–õ–ï –û–ë–ù–û–í–õ–ï–ù–ò–Ø

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç:**
   ```powershell
   python autotrader_v2.py 2>&1 | Tee-Object -FilePath autotrader.log
   ```

2. **–î–æ–∂–¥–∏—Ç–µ—Å—å –ø–µ—Ä–≤–æ–π –ø—Ä–æ–¥–∞–∂–∏**

3. **–ù–∞–π–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö –±–ª–æ–∫ "–ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ü–†–û–°–ê –ù–ê –ü–†–û–î–ê–ñ–£":**
   ```powershell
   Get-Content autotrader.log | Select-String "–ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ü–†–û–°–ê" -Context 0,12
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - –û–∂–∏–¥–∞–µ–º–∞—è –¥–µ–ª—å—Ç–∞ >= –¢—Ä–µ–±—É–µ–º–∞—è –¥–µ–ª—å—Ç–∞?
   - –¶–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ > –¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏?
   - –†–æ—Å—Ç —Ü–µ–Ω—ã > 0%?

5. **–ï—Å–ª–∏ —Ö–æ—Ç—å –æ–¥–Ω–æ —É—Å–ª–æ–≤–∏–µ –ù–ï –≤—ã–ø–æ–ª–Ω–µ–Ω–æ ‚Äî –°–û–û–ë–©–ò–¢–ï!**

---

**–î–∞—Ç–∞:** 2024-12-08  
**–í–µ—Ä—Å–∏—è:** 2.1 (—Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ
