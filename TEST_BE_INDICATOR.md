# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ BE (—Ü–µ–Ω–∞ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏)

**–î–∞—Ç–∞:** 2025-01-XX  
**–ü—Ä–æ–±–ª–µ–º–∞:** BE –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ –Ω–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–µ

---

## üîç –®–∞–≥–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```powershell
cd "c:\Users\–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä\Documents\bGate.mTrade"
python mTrade.py
```

### 2. –û—Ç–∫—Ä—ã—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```
http://localhost:5000
```

### 3. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ª–æ–≥–∏:

#### –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (–∫–∞–∂–¥—ã–µ 7 —Å–µ–∫—É–Ω–¥)
```javascript
[INDICATORS] –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: {...}
[INDICATORS] autotrade_levels: {...}
[INDICATORS] –ü–µ—Ä–µ–¥–∞—ë–º –≤ updateTradeIndicators: {...}
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `autotrade_levels` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –æ—Ç–≤–µ—Ç–µ?
- ‚úÖ `autotrade_levels.breakeven_price` –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–µ null)?

#### –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —à–∫–∞–ª—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
```javascript
[SCALE] updateVisualIndicatorScale –≤—ã–∑–≤–∞–Ω —Å levels: {...}
[SCALE] –ú–∞—Ä–∫–µ—Ä—ã: { sell: '–Ω–∞–π–¥–µ–Ω', be: '–Ω–∞–π–¥–µ–Ω', ... }
[SCALE] –¶–µ–Ω—ã –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞: { current: ..., be: ..., ... }
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –í—Å–µ –º–∞—Ä–∫–µ—Ä—ã –Ω–∞–π–¥–µ–Ω—ã –≤ DOM?
- ‚úÖ `be` (breakeven_price) –∏–º–µ–µ—Ç –≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ?
- ‚úÖ –ü–æ–∑–∏—Ü–∏—è –º–∞—Ä–∫–µ—Ä–∞ BE –≤—ã—á–∏—Å–ª–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ?

---

## üß™ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

### –û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
```
http://localhost:5000/test_be_indicator.html
```

### –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ API
- –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å /api/trade/indicators"
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í –æ—Ç–≤–µ—Ç–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `autotrade_levels.breakeven_price`

#### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ DOM
- –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤"
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –º–∞—Ä–∫–µ—Ä—ã (–≤–∫–ª—é—á–∞—è `markerBE`) –Ω–∞–π–¥–µ–Ω—ã –≤ DOM

#### –¢–µ—Å—Ç 3: –ò–º–∏—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ò–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å BE"
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –§—É–Ω–∫—Ü–∏—è `updateAutoTradeLevels` –¥–æ–ª–∂–Ω–∞ –æ—Ç—Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: BE = null –≤ –æ—Ç–≤–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞
**–°–∏–º–ø—Ç–æ–º—ã:**
```javascript
[INDICATORS] autotrade_levels: { ..., breakeven_price: null }
```

**–ü—Ä–∏—á–∏–Ω–∞:** –°–µ—Ä–≤–µ—Ä –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç BE (—Ü–∏–∫–ª –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω –∏–ª–∏ BE –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ)

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ —Ü–∏–∫–ª –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á—ë—Ç BE –≤ `breakeven_calculator.py`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –≤ `mTrade.py` (—ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/trade/indicators`)

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ú–∞—Ä–∫–µ—Ä BE –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ DOM
**–°–∏–º–ø—Ç–æ–º—ã:**
```javascript
[SCALE] –ú–∞—Ä–∫–µ—Ä—ã: { ..., be: '–ù–ï –ù–ê–ô–î–ï–ù', ... }
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–∞—Ä–∫–µ—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ HTML –∏–ª–∏ –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä—ã—Ç—å `templates/index.html`
2. –ù–∞–π—Ç–∏ `<div id="markerBE" ...>`
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: BE –µ—Å—Ç—å, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —à–∫–∞–ª–µ
**–°–∏–º–ø—Ç–æ–º—ã:**
```javascript
[SCALE] –¶–µ–Ω—ã –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞: { ..., be: 0.1567, ... }
// –ù–æ –º–∞—Ä–∫–µ—Ä –Ω–µ –≤–∏–¥–µ–Ω –Ω–∞ —à–∫–∞–ª–µ
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ —Å—Ç–∏–ª—è–º–∏ CSS

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `calculatePosition()` –≤ `app.js`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSS —Å—Ç–∏–ª–∏ –¥–ª—è `.marker-be`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `marker.style.opacity = '1'` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

### –°–µ—Ä–≤–µ—Ä (Python)
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/trade/indicators` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `autotrade_levels`
- [ ] `autotrade_levels.breakeven_price` –∏–º–µ–µ—Ç –≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–µ null)
- [ ] –†–∞—Å—á—ë—Ç BE –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –≤ `breakeven_calculator.py`

### –ö–ª–∏–µ–Ω—Ç (JavaScript)
- [ ] –§—É–Ω–∫—Ü–∏—è `loadPerBaseIndicators()` –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] `autotrade_levels` –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ `updateTradeIndicators()`
- [ ] –§—É–Ω–∫—Ü–∏—è `updateAutoTradeLevels()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] –§—É–Ω–∫—Ü–∏—è `updateVisualIndicatorScale()` –ø–æ–ª—É—á–∞–µ—Ç `levels.breakeven_price`

### HTML/CSS
- [ ] –≠–ª–µ–º–µ–Ω—Ç `<div id="markerBE">` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `templates/index.html`
- [ ] CSS —Å—Ç–∏–ª–∏ –¥–ª—è `.marker-be` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] –ú–∞—Ä–∫–µ—Ä –≤–∏–¥–µ–Ω –≤ DOM (–Ω–µ `display: none`)

---

## üîß –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ BE –≤—Å—ë –µ—â—ë –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤:

### 1. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ BE
–î–æ–±–∞–≤–∏—Ç—å –≤ `updateVisualIndicatorScale()`:

```javascript
// –í—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∞ - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º BE
if (!prices.be && prices.current) {
  prices.be = prices.current * 1.01; // BE = —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ + 1%
  console.warn('[SCALE] üîß BE –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:', prices.be);
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `updateVisualIndicatorScale()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **–ø–æ—Å–ª–µ** –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ—É—Ç–µ—Ä–∞:

```javascript
function updateAutoTradeLevels(levels){
  if(!levels) return;
  
  // 1. –°–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–ª—è–µ–º —Ñ—É—Ç–µ—Ä
  // ... –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ—É—Ç–µ—Ä–∞ ...
  
  // 2. –ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–ª—è–µ–º —à–∫–∞–ª—É
  updateVisualIndicatorScale(levels);
}
```

---

## üìû –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –û—Ç–∫—Ä—ã—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `http://localhost:5000`
2. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å (F12)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ `[INDICATORS]` –∏ `[SCALE]`
4. –û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É: `http://localhost:5000/test_be_indicator.html`
5. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
6. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `static/app.js` - –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
- `templates/index.html` - HTML —Ä–∞–∑–º–µ—Ç–∫–∞ –º–∞—Ä–∫–µ—Ä–æ–≤
- `mTrade.py` - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ (API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
- `breakeven_calculator.py` - —Ä–∞—Å—á—ë—Ç BE

**–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `test_be_indicator.html` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `TEST_BE_INDICATOR.md` - —ç—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
