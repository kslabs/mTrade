# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –¢–∞–±–ª–∏—Ü–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—É, –∫–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω

## üéØ –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ —Ç–∞–±–ª–∏—Ü—ã** –∏ **–¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ**.

---

## üìä –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –¢–ï–ü–ï–†–¨

### 1. –¢–∞–±–ª–∏—Ü–∞ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ (`breakeven_calculator.py`)

**–§–æ—Ä–º—É–ª–∞:** `orderbook_level = (—à–∞–≥ √ó base_orderbook_level) + 1`

**–≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –î–õ–Ø –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Æ (1-based):**
- –£—Ä–æ–≤–µ–Ω—å 1 = –ª—É—á—à–∞—è —Ü–µ–Ω–∞ (—á–µ–ª–æ–≤–µ–∫–æ–ø–æ–Ω—è—Ç–Ω–æ)
- –£—Ä–æ–≤–µ–Ω—å 2 = –≤—Ç–æ—Ä–∞—è –ª—É—á—à–∞—è —Ü–µ–Ω–∞
- –£—Ä–æ–≤–µ–Ω—å 3 = —Ç—Ä–µ—Ç—å—è –ª—É—á—à–∞—è —Ü–µ–Ω–∞

**–ü—Ä–∏–º–µ—Ä—ã:**

–ü—Ä–∏ `orderbook_level = 0` (–ø–∞—Ä–∞–º–µ—Ç—Ä):
- –®–∞–≥ 0: `(0 √ó 0) + 1 = 1` ‚Üí "–°—Ç. 1"
- –®–∞–≥ 1: `(1 √ó 0) + 1 = 1` ‚Üí "–°—Ç. 1"
- –®–∞–≥ 2: `(2 √ó 0) + 1 = 1` ‚Üí "–°—Ç. 1"

–ü—Ä–∏ `orderbook_level = 1` (–ø–∞—Ä–∞–º–µ—Ç—Ä):
- –®–∞–≥ 0: `(0 √ó 1) + 1 = 1` ‚Üí "–°—Ç. 1"
- –®–∞–≥ 1: `(1 √ó 1) + 1 = 2` ‚Üí "–°—Ç. 2"
- –®–∞–≥ 2: `(2 √ó 1) + 1 = 3` ‚Üí "–°—Ç. 3"

–ü—Ä–∏ `orderbook_level = 2` (–ø–∞—Ä–∞–º–µ—Ç—Ä):
- –®–∞–≥ 0: `(0 √ó 2) + 1 = 1` ‚Üí "–°—Ç. 1"
- –®–∞–≥ 1: `(1 √ó 2) + 1 = 3` ‚Üí "–°—Ç. 3"
- –®–∞–≥ 2: `(2 √ó 2) + 1 = 5` ‚Üí "–°—Ç. 5"

---

### 2. –ö–æ–¥ (`mTrade.py`, `autotrader_v2.py`)

**–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:** `–∏–Ω–¥–µ–∫—Å_–º–∞—Å—Å–∏–≤–∞ = orderbook_level - 1`

**–≠—Ç–æ –∏–Ω–¥–µ–∫—Å –¥–ª—è –º–∞—Å—Å–∏–≤–∞ —Å—Ç–∞–∫–∞–Ω–∞ (0-based):**
- –ò–Ω–¥–µ–∫—Å 0 = `bids[0]` = –ª—É—á—à–∞—è —Ü–µ–Ω–∞
- –ò–Ω–¥–µ–∫—Å 1 = `bids[1]` = –≤—Ç–æ—Ä–∞—è –ª—É—á—à–∞—è —Ü–µ–Ω–∞
- –ò–Ω–¥–µ–∫—Å 2 = `bids[2]` = —Ç—Ä–µ—Ç—å—è –ª—É—á—à–∞—è —Ü–µ–Ω–∞

**–ü—Ä–∏–º–µ—Ä—ã:**

–ü—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã = 1:
- `1 - 1 = 0` ‚Üí –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `bids[0]` ‚úÖ

–ü—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã = 2:
- `2 - 1 = 1` ‚Üí –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `bids[1]` ‚úÖ

–ü—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã = 3:
- `3 - 1 = 2` ‚Üí –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `bids[2]` ‚úÖ

---

### 3. JavaScript (`app.js`)

**–ë–µ—Ä—ë—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã:**
```javascript
const orderbookLevelForStep = row.orderbook_level !== undefined ? row.orderbook_level : 1;
```

**–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:**
```
–°—Ç. 1, –°—Ç. 2, –°—Ç. 3...
```

---

## üìã –ü–û–õ–ù–ê–Ø –¶–ï–ü–û–ß–ö–ê

### –ü—Ä–∏–º–µ—Ä: –®–∞–≥ 0, –ø–∞—Ä–∞–º–µ—Ç—Ä `orderbook_level = 1`

1. **Backend –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É:**
   ```python
   calculated_orderbook_level = round((0 √ó 1) + 1) = 1
   ```

2. **API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
   ```json
   {"step": 0, "orderbook_level": 1, ...}
   ```

3. **Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
   ```
   –°—Ç. 1
   ```

4. **Backend —á–∏—Ç–∞–µ—Ç –∏–∑ —Ç–∞–±–ª–∏—Ü—ã:**
   ```python
   table_orderbook_level = 1  # –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
   orderbook_level = 1 - 1 = 0  # –¥–ª—è –º–∞—Å—Å–∏–≤–∞
   ```

5. **–ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:**
   ```python
   price = bids[0]  # –ª—É—á—à–∞—è —Ü–µ–Ω–∞
   ```

6. **–ë–ª–æ–∫ "üìà –£—Ä–æ–≤–Ω–∏ —Ü–µ–Ω" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
   ```
   –£—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–∫–∞–Ω–∞: 1
   ```

---

## ‚úÖ –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç |
|-----------|----------|--------------|
| –¢–∞–±–ª–∏—Ü–∞ (UI) | "–°—Ç. 1" | –ü–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) |
| –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (API) | `orderbook_level: 1` | –¢–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚úÖ |
| –ö–æ–¥ (–º–∞—Å—Å–∏–≤) | `bids[0]` | –õ—É—á—à–∞—è —Ü–µ–Ω–∞ (–∏–Ω–¥–µ–∫—Å 0) ‚úÖ |
| –õ–æ–≥–∏ | "–£—Ä–æ–≤–µ–Ω—å 1 ‚Üí –∏–Ω–¥–µ–∫—Å 0" | –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤–∏–¥–Ω–æ ‚úÖ |

**–í–°–Å –°–ò–ù–•–†–û–ù–ò–ó–ò–†–û–í–ê–ù–û!** ‚úÖ

---

## üöÄ –ß–¢–û –î–ï–õ–ê–¢–¨

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
   ```powershell
   python mTrade.py
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä (Ctrl+F5):**
   - –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à JavaScript!

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É:**
   - –®–∞–≥ 0 –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å **"–°—Ç. 1"** ‚úÖ
   - –ü—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `orderbook_level = 1`:
     - –®–∞–≥ 1 ‚Üí "–°—Ç. 2" ‚úÖ
     - –®–∞–≥ 2 ‚Üí "–°—Ç. 3" ‚úÖ

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–ª–æ–∫ "üìà –£—Ä–æ–≤–Ω–∏ —Ü–µ–Ω":**
   ```
   –£—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–∫–∞–Ω–∞: 1
   ```

5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
   ```
   [XRP] –£—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–∫–∞–Ω–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã: 1 ‚Üí –∏–Ω–¥–µ–∫—Å –º–∞—Å—Å–∏–≤–∞: 0
   [XRP] –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–µ–Ω—É –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ bids[0] = 2.5432
   ```

---

## üìÇ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

- ‚úÖ `breakeven_calculator.py` ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ `(step √ó base) + 1`
- ‚úÖ `autotrader_v2.py` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ `-1` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ `mTrade.py` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ `-1` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ `static/app.js` ‚Äî –±–µ—Ä—ë—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –¥–∞–Ω–Ω—ã—Ö (—É–∂–µ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ)
- ‚úÖ `state_manager.py` ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

---

## üéØ –ò–¢–û–ì

**–¢–µ–ø–µ—Ä—å:**
1. ‚úÖ –¢–∞–±–ª–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–°—Ç. 1" (–∫–∞–∫ –∏ –±—ã–ª–æ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ)
2. ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç `orderbook_level: 1`
3. ‚úÖ –ö–æ–¥ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç `1 ‚Üí 0` –¥–ª—è –º–∞—Å—Å–∏–≤–∞
4. ‚úÖ –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `bids[0]` (–ª—É—á—à–∞—è —Ü–µ–Ω–∞)
5. ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–±–∞ –∑–Ω–∞—á–µ–Ω–∏—è (—Ç–∞–±–ª–∏—Ü–∞ –∏ –º–∞—Å—Å–∏–≤)
6. ‚úÖ **–ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É UI –∏ –∫–æ–¥–æ–º!**

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-12-10  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û - –¢–†–ï–ë–£–ï–¢–°–Ø –ü–ï–†–ï–ó–ê–ü–£–°–ö
