# üöÄ –ë–´–°–¢–†–ê–Ø –ü–†–û–í–ï–†–ö–ê: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–ø–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ?

–ê–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä —Å–æ–≤–µ—Ä—à–∞–ª –¥–æ–∫—É–ø–∫—É –ø—Ä–∏ **–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –ø–∞–¥–µ–Ω–∏–∏** —Ü–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, -0.65% –≤–º–µ—Å—Ç–æ —Ç—Ä–µ–±—É–µ–º—ã—Ö -0.86%).

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è –ø–∞–¥–µ–Ω–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `_try_rebuy()`.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä—è–º–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –≤–º–µ—Å—Ç–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Ü–µ–Ω—É.

## –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**
3. –ù–∞–∂–º–∏—Ç–µ **"–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä"**
4. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ PowerShell
```powershell
Invoke-WebRequest -Uri "http://localhost:5000/api/server/restart" -Method POST
```

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### 1. –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –¥–æ–∫—É–ø–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```powershell
Get-Content server_debug.log -Wait | Select-String -Pattern "BLOCK_2|–†–µ–∞–ª—å–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ|–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –ø–∞–¥–µ–Ω–∏–∏:**
```
[XRP5L]   –¢—Ä–µ–±—É–µ–º–æ–µ –ø–∞–¥–µ–Ω–∏–µ: -0.86%
[XRP5L]   –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ: -0.65%
[XRP5L] ‚ùå [BLOCK_2] –†–µ–∞–ª—å–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ! –î–æ–∫—É–ø–∫–∞ –û–¢–ú–ï–ù–ï–ù–ê
[XRP5L]   –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ: -0.65% > –¢—Ä–µ–±—É–µ–º–æ–µ: -0.86%
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤—Ä—É—á–Ω—É—é

–î–æ–∂–¥–∏—Ç–µ—Å—å —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–∏ –¥–æ–∫—É–ø–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```powershell
Get-Content server_debug.log -Tail 100 | Select-String -Pattern "–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –î–û–ö–£–ü–ö–ò|BLOCK_2"
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ API

–ü–æ–ª—É—á–∏—Ç–µ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∞–ª—é—Ç—ã:

```powershell
$r = Invoke-WebRequest -Uri "http://localhost:5000/api/trade/indicators?base_currency=XRP5L&quote_currency=USDT&include_table=1"
$j = $r.Content | ConvertFrom-Json

# –ü–æ–∫–∞–∑–∞—Ç—å —Ç—Ä–µ–±—É–µ–º–æ–µ –ø–∞–¥–µ–Ω–∏–µ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞
$currentStep = $j.autotrade_levels.active_step
$nextStep = $currentStep + 1
$table = $j.autotrade_levels.table

Write-Host "–¢–µ–∫—É—â–∏–π —à–∞–≥: $currentStep"
Write-Host "–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: $nextStep"
Write-Host "–¢—Ä–µ–±—É–µ–º–æ–µ –ø–∞–¥–µ–Ω–∏–µ: $($table[$nextStep].decrease_step_pct)%"
Write-Host "–¢–∞–±–ª–∏—á–Ω–∞—è —Ü–µ–Ω–∞: $($table[$nextStep].rate)"
```

## –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

### ‚úÖ –ü—Ä–∏–º–µ—Ä 1: –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ (–¥–æ–∫—É–ø–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∞)

```
–®–∞–≥ 1: Last buy = 0.0464
–®–∞–≥ 2: –¢—Ä–µ–±—É–µ–º–æ–µ –ø–∞–¥–µ–Ω–∏–µ = -0.86%
       –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ = 0.0460
       –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ = -0.862%
       
–ü—Ä–æ–≤–µ—Ä–∫–∞: -0.862% <= -0.86%? ‚Üí –î–ê (–ø–æ –º–æ–¥—É–ª—é: 0.862 >= 0.86)
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –î–æ–∫—É–ø–∫–∞ –†–ê–ó–†–ï–®–ï–ù–ê
```

### ‚ùå –ü—Ä–∏–º–µ—Ä 2: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ (–¥–æ–∫—É–ø–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞)

```
–®–∞–≥ 1: Last buy = 0.0464
–®–∞–≥ 2: –¢—Ä–µ–±—É–µ–º–æ–µ –ø–∞–¥–µ–Ω–∏–µ = -0.86%
       –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ = 0.0461
       –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ = -0.65%
       
–ü—Ä–æ–≤–µ—Ä–∫–∞: -0.65% <= -0.86%? ‚Üí –ù–ï–¢ (–ø–æ –º–æ–¥—É–ª—é: 0.65 < 0.86)
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ùå –î–æ–∫—É–ø–∫–∞ –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–ê
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –≤–∞–ª—é—Ç

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤:

```powershell
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤
$r = Invoke-WebRequest -Uri "http://localhost:5000/api/autotrader/status"
$j = $r.Content | ConvertFrom-Json

# –ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∞–ª—é—Ç—ã
$j.cycles | Where-Object { $_.active -eq $true } | Select-Object currency, active_step, last_buy_price, total_invested
```

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è?

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä **–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω** –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `autotrader_v2.py` —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
4. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ –æ—Ç—á—ë—Ç —Å –ª–æ–≥–∞–º–∏

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `autotrader_v2.py` –∏ –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É ~1032:

**‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
if actual_drop_pct > decrease_step_pct:
    print(f"‚ùå [BLOCK_2] –†–µ–∞–ª—å–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ!")
    return
```

**‚ùå –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
if price >= min_price_for_real_drop:
    print(f"‚ùå [BLOCK_2] –†–µ–∞–ª—å–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ!")
    return
```

---

**–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π  
**–§–∞–π–ª:** `autotrader_v2.py`, —Ñ—É–Ω–∫—Ü–∏—è `_try_rebuy()`
