# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –†–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ mTrade

## üéâ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω!

–§–∞–π–ª `mTrade.py` —É—Å–ø–µ—à–Ω–æ —É–º–µ–Ω—å—à–µ–Ω —Å **1376 —Å—Ç—Ä–æ–∫ –¥–æ 279 —Å—Ç—Ä–æ–∫** (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞ 80%)!

## üìÅ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
bGate.mTrade/
‚îú‚îÄ‚îÄ mTrade.py                      (279 —Å—Ç—Ä–æ–∫) - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ api_routes.py                  (262 —Å—Ç—Ä–æ–∫–∏) - API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îú‚îÄ‚îÄ websocket_routes.py            (477 —Å—Ç—Ä–æ–∫) - WebSocket –º–∞—Ä—à—Ä—É—Ç—ã
‚îú‚îÄ‚îÄ trade_params_routes.py         (232 —Å—Ç—Ä–æ–∫–∏) - –¢–æ—Ä–≥–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
‚îú‚îÄ‚îÄ server_control_routes.py       (429 —Å—Ç—Ä–æ–∫) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º
‚îî‚îÄ‚îÄ mTrade.py.backup_refactored    (1376 —Å—Ç—Ä–æ–∫) - –ë—ç–∫–∞–ø —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏
```

## ‚úÖ –°—Ç–∞—Ç—É—Å

- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π –ø—Ä–æ–≤–µ—Ä–µ–Ω
- ‚úÖ –ò–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ Break-even —Ç–∞–±–ª–∏—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

## üöÄ –ó–∞–ø—É—Å–∫

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
```powershell
python mTrade.py
```

### –ß–µ—Ä–µ–∑ –±–∞—Ç–Ω–∏–∫
```powershell
START.bat
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:**
   ```
   http://localhost:5000/api/server/status
   ```

2. **–í–µ—Ä—Å–∏—è:**
   ```
   http://localhost:5000/version
   ```

3. **Break-even —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è BTC:**
   ```
   http://localhost:5000/api/breakeven/table?base_currency=BTC
   ```

4. **–°–ø–∏—Å–æ–∫ –≤–∞–ª—é—Ç:**
   ```
   http://localhost:5000/api/currencies
   ```

5. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
   ```
   http://localhost:5000/
   ```

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –º–æ–¥—É–ª—è–º:

1. **api_routes.py** - –ë–∞–∑–æ–≤—ã–µ API –æ–ø–µ—Ä–∞—Ü–∏–∏
   - –ê–∫–∫–∞—É–Ω—Ç—ã, —Ä–µ–∂–∏–º—ã, –≤–∞–ª—é—Ç—ã
   - –ë–∞–ª–∞–Ω—Å—ã, –æ—Ä–¥–µ—Ä–∞, —Å–¥–µ–ª–∫–∏

2. **websocket_routes.py** - WebSocket –∏ multi-pairs
   - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–∞—Ä—ã
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - Multi-pairs watcher

3. **trade_params_routes.py** - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —Ä–∞—Å—á–µ—Ç—ã
   - –¢–æ—Ä–≥–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã per-currency
   - –¢–∞–±–ª–∏—Ü–∞ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏
   - –†–∞–∑—Ä–µ—à–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏

4. **server_control_routes.py** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
   - –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ (restart, shutdown)
   - –†–µ–∂–∏–º —Å–µ—Ç–∏ (work/test)
   - –ê–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä
   - UI —Å–æ—Å—Ç–æ—è–Ω–∏–µ

## üõ†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –ü—Ä–∏–º–µ—Ä 1: –ù–æ–≤—ã–π API —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤ api_routes.py

```python
def my_new_endpoint(self):
    """–ú–æ–π –Ω–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç"""
    try:
        # –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å
        return jsonify({"success": True, "data": "Hello!"})
    except Exception as e:
        return jsonify({"success": False, "error": str(e)}), 500

# –î–æ–±–∞–≤–∏—Ç—å –≤ _register_routes():
self.app.add_url_rule(
    '/api/my/new/endpoint', 
    'my_new_endpoint', 
    self.my_new_endpoint, 
    methods=['GET']
)
```

### –ü—Ä–∏–º–µ—Ä 2: –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤ trade_params_routes.py

```python
def calculate_custom_metric(self):
    """–†–∞—Å—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –º–µ—Ç—Ä–∏–∫–∏"""
    try:
        base_currency = request.args.get('base_currency', 'BTC')
        params = self.state_manager.get_breakeven_params(base_currency)
        
        # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞
        result = {"metric": "value"}
        
        return jsonify({"success": True, "result": result})
    except Exception as e:
        return jsonify({"success": False, "error": str(e)}), 500

# –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å:
self.app.add_url_rule(
    '/api/custom/metric', 
    'calculate_custom_metric', 
    self.calculate_custom_metric, 
    methods=['GET']
)
```

## üîÑ –û—Ç–∫–∞—Ç –Ω–∞ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:

```powershell
Copy-Item "mTrade.py.backup_refactored" "mTrade.py" -Force
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|-----|--------|-----------|
| –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ | 1376 | 279 | -80% |
| –ú–æ–¥—É–ª–µ–π | 1 | 5 | +400% |
| –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å | 2/5 | 5/5 | +150% |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ | –°–ª–æ–∂–Ω–æ | –õ–µ–≥–∫–æ | –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞:
```powershell
python -m py_compile mTrade.py
python -m py_compile api_routes.py
python -m py_compile websocket_routes.py
python -m py_compile trade_params_routes.py
python -m py_compile server_control_routes.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤:
```powershell
python -c "import mTrade; print('OK')"
python -c "import api_routes; print('OK')"
python -c "import websocket_routes; print('OK')"
python -c "import trade_params_routes; print('OK')"
python -c "import server_control_routes; print('OK')"
```

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **REFACTORING_DOCUMENTATION.md** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É
- **ARCHITECTURE.md** - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **BREAKEVEN_TABLE_COMPLETE.md** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–∞–±–ª–∏—Ü–µ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã** - –Ω–∏–∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã
2. **API –æ—Å—Ç–∞–ª–∏—Å—å –ø—Ä–µ–∂–Ω–∏–º–∏** - –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å** - –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å
4. **–ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ `mTrade.py.backup_refactored`

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å break-even —Ç–∞–±–ª–∏—Ü—É
4. ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ —Å–µ—Ç–∏

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∫–∞—Ç–∏—Ç–µ—Å—å –Ω–∞ –±—ç–∫–∞–ø
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  
**–í–µ—Ä—Å–∏—è:** 2.0 (Refactored)  
**–î–∞—Ç–∞:** 11 –Ω–æ—è–±—Ä—è 2025
