# СВОДКА ИСПРАВЛЕНИЙ - Продажа по правильной цене

**Дата:** 8 декабря 2025  
**Проблема:** Продажи происходили с убытком (отрицательная дельта)  
**Статус:** ✅ ИСПРАВЛЕНО

## Что было не так

```python
# ❌ НЕПРАВИЛЬНО
target_sell_price = breakeven_price * (1 + target_delta_pct / 100.0)
```

`target_delta_pct` рассчитан относительно **`rate`** (расчётного курса), а не `breakeven_price`!

## Что исправлено

```python
# ✅ ПРАВИЛЬНО
target_sell_price = rate * (1 + target_delta_pct / 100.0)

# Защита от продажи с убытком
if target_sell_price < breakeven_price:
    target_sell_price = breakeven_price
```

## Результат

Теперь продажа происходит **только с прибылью** или **как минимум без убытка**.

## Файлы

- ✅ `autotrader_v2.py` - исправлен метод `_try_sell` (строки ~798-822)
- ✅ `FIX_SELL_PRICE_CALCULATION.md` - полная документация

## Тестирование

1. Перезапустить автотрейдер
2. Дождаться покупки и продажи
3. Проверить логи: дельта должна быть **положительной**, PnL **> 0**
