# üìä –û—Ç—á—ë—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è P0 (start_price)

**–î–∞—Ç–∞:** 2025-01-XX  
**–í–µ—Ä—Å–∏—è:** v1.8.6  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–û–í–ï–†–ï–ù–û - –ö–û–î –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û

---

## üéØ –ó–∞–¥–∞—á–∞

–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—Ç–∞—Ä—Ç–æ–≤–∞—è —Ü–µ–Ω–∞ **P0 (start_price)** –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **–¢–û–õ–¨–ö–û –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–µ**, –∞ **–ù–ï –ø—Ä–∏ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è—Ö** (rebuy).

---

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞

### 1Ô∏è‚É£ –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ (`_try_start_cycle`)

**–§–∞–π–ª:** `autotrader.py`, —Å—Ç—Ä–æ–∫–∏ 330-490

**–õ–æ–≥–∏–∫–∞:**
```python
# –°—Ç—Ä–æ–∫–∞ 465: P0 —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ cycle
cycle.update({
    'active': True,
    'active_step': 0,
    'last_buy_price': buy_price,
    'start_price': buy_price,  # ‚úÖ P0 —Ñ–∏–∫—Å–∏—Ä—É–µ–º –∫–∞–∫ —Ü–µ–Ω—É –ø–æ–∫—É–ø–∫–∏
    'total_invested_usd': invest,
    'base_volume': filled
})

# –°—Ç—Ä–æ–∫–∏ 472-473: P0 —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ state_manager
current_params = self.state_manager.get_breakeven_params(base)
current_params['start_price'] = buy_price  # ‚úÖ P0 –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
self.state_manager.update_breakeven_params(base, current_params)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ P0 –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–µ

---

### 2Ô∏è‚É£ –î–æ–∫—É–ø–∫–∞/—É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ (`_try_rebuy`)

**–§–∞–π–ª:** `autotrader.py`, —Å—Ç—Ä–æ–∫–∏ 491-555

**–õ–æ–≥–∏–∫–∞:**
```python
# –°—Ç—Ä–æ–∫–∏ 546-549: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ cycle –ø–æ—Å–ª–µ –¥–æ–∫—É–ø–∫–∏
cycle['active_step'] = next_step           # ‚úÖ –®–∞–≥ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
cycle['last_buy_price'] = level_price      # ‚úÖ –ü–æ—Å–ª–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
cycle['total_invested_usd'] += invest      # ‚úÖ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è
cycle['base_volume'] += filled             # ‚úÖ –û–±—ä—ë–º —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è

# ‚ùó start_price –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ P0 –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –¥–æ–∫—É–ø–∫–∞—Ö

---

### 3Ô∏è‚É£ –ü–µ—Ä–µ—Å—á—ë—Ç —Ç–∞–±–ª–∏—Ü—ã (`_recalc_table_if_needed`)

**–§–∞–π–ª:** `autotrader.py`, —Å—Ç—Ä–æ–∫–∏ 220-227

**–õ–æ–≥–∏–∫–∞:**
```python
# –°—Ç—Ä–æ–∫–∞ 226: P0 –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
if not cycle.get('table') or params.get('start_price', 0) == 0:
    table = calculate_breakeven_table(params, current_price)
    cycle['table'] = table
    cycle['start_price'] = table[0]['rate']  # ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è P0
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ P0 –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–∞—Å—á—ë—Ç–µ —Ç–∞–±–ª–∏—Ü—ã

---

### 4Ô∏è‚É£ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ BE –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ

**–§–∞–π–ª—ã:** 
- `mTrade.py`, —Å—Ç—Ä–æ–∫–∏ 1630-1680 (—Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å)
- `static/app.js`, —Å—Ç—Ä–æ–∫–∏ 145-180 (–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å)
- `templates/index.html`, —Å—Ç—Ä–æ–∫–∞ 130 (HTML)

**–õ–æ–≥–∏–∫–∞:**

**–°–µ—Ä–≤–µ—Ä (mTrade.py):**
```python
# –°—Ç—Ä–æ–∫–∏ 1633-1639: P0 –±–µ—Ä—ë—Ç—Å—è –∏–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
if cycle:
    autotrade_levels['start_price'] = cycle.get('start_price') or None
else:
    autotrade_levels['start_price'] = table[0].get('rate') if table else None

# –°—Ç—Ä–æ–∫–∏ 1654-1655: BE –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ autotrade_levels
autotrade_levels['breakeven_price'] = row.get('breakeven_price')
```

**–ö–ª–∏–µ–Ω—Ç (app.js):**
```javascript
// –°—Ç—Ä–æ–∫–∏ 153-154: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π ID –¥–ª—è BE
const elementId = key === 'be' ? 'indBE' : 'ind' + key.charAt(0).toUpperCase() + key.slice(1);
```

**HTML (index.html):**
```html
<!-- –°—Ç—Ä–æ–∫–∞ 130: –≠–ª–µ–º–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è BE -->
<div class="label" style="color:#00bfff;">BE:</div>
<div class="value" id="indBE" style="color:#00bfff;">-</div>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ BE –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π –≤—ã–≤–æ–¥

### –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è P0 —Ä–∞–±–æ—Ç–∞–µ—Ç –ü–†–ê–í–ò–õ–¨–ù–û:

| –î–µ–π—Å—Ç–≤–∏–µ | P0 –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è? | –ö–æ–¥ |
|----------|----------------|-----|
| **–°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞** | ‚úÖ –î–ê | `_try_start_cycle()`, —Å—Ç—Ä–æ–∫–∞ 465, 473 |
| **–î–æ–∫—É–ø–∫–∞/—É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ** | ‚ùå –ù–ï–¢ | `_try_rebuy()`, —Å—Ç—Ä–æ–∫–∏ 546-549 |
| **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** | ‚úÖ –î–ê | `_recalc_table_if_needed()`, —Å—Ç—Ä–æ–∫–∞ 226 |

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ BE —Ä–∞–±–æ—Ç–∞–µ—Ç –ü–†–ê–í–ò–õ–¨–ù–û:

- ‚úÖ BE –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞ (`mTrade.py`)
- ‚úÖ BE –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ JS (`app.js`)
- ‚úÖ BE –≤–∏–¥–µ–Ω –≤ —Ñ—É—Ç–µ—Ä–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ (`index.html`)

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –¢–µ—Å—Ç —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–∏–Ω–≥
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏ (–ø–µ—Ä–≤—ã–π —à–∞–≥)
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** P0 –≤ —Ç–∞–±–ª–∏—Ü–µ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ = —Ü–µ–Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** P0 –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ (Start)
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** BE –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ (—Å–∏–Ω–∏–π —Ü–≤–µ—Ç)

### 2. –¢–µ—Å—Ç –¥–æ–∫—É–ø–∫–∏/—É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è

- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –ø–∞–¥–µ–Ω–∏—è —Ü–µ–Ω—ã
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –¥–æ–∫—É–ø–∫–∏ (—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥)
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** P0 –≤ —Ç–∞–±–ª–∏—Ü–µ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** Last Buy –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –Ω–∞ –Ω–æ–≤—É—é —Ü–µ–Ω—É
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** BE –æ–±–Ω–æ–≤–∏–ª—Å—è –¥–ª—è –Ω–æ–≤–æ–≥–æ —à–∞–≥–∞
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** P0 –æ—Å—Ç–∞–ª–æ—Å—å –ø—Ä–µ–∂–Ω–∏–º –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ (Start)

### 3. –¢–µ—Å—Ç –ø—Ä–æ–¥–∞–∂–∏ –∏ –Ω–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞

- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è —Ä–æ—Å—Ç–∞ —Ü–µ–Ω—ã
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –ø—Ä–æ–¥–∞–∂–∏ (–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–∏–∫–ª–∞)
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –Ω–æ–≤–æ–π —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** P0 –æ–±–Ω–æ–≤–∏–ª–æ—Å—å –Ω–∞ —Ü–µ–Ω—É –Ω–æ–≤–æ–π —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–ª–∞—Å—å —Å –Ω–æ–≤—ã–º P0

---

## üõ†Ô∏è –ß—Ç–æ –ù–ï –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ (–ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)

- ‚ùå –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è P0 **–ù–ï –±—ã–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∞**
- ‚ùå –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á—ë—Ç–∞ —Ç–∞–±–ª–∏—Ü—ã **–ù–ï –±—ã–ª –∏–∑–º–µ–Ω—ë–Ω**
- ‚ùå –õ–æ–≥–∏–∫–∞ –¥–æ–∫—É–ø–æ–∫ **–ù–ï –±—ã–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∞**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ –±–∞–≥ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º BE –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ (ID —ç–ª–µ–º–µ–Ω—Ç–∞)

---

## üìù –§–∞–π–ª—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–≤–µ—Ä—è–ª–∞—Å—å –ª–æ–≥–∏–∫–∞

1. `autotrader.py` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–∏–Ω–≥–∞
2. `mTrade.py` - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å, –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö
3. `breakeven_calculator.py` - —Ä–∞—Å—á—ë—Ç —Ç–∞–±–ª–∏—Ü—ã –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏
4. `static/app.js` - –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
5. `templates/index.html` - HTML –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —á–µ–∫–ª–∏—Å—Ç—É
2. ‚è≥ –£–¥–∞–ª–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
3. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å CHANGELOG.md
4. ‚è≥ –ó–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
**–ê–≤—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏:** GitHub Copilot  
**–î–∞—Ç–∞:** 2025-01-XX
