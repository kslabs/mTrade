# ‚úÖ –ê—É–¥–∏—Ç –ª–æ–≥–∏–∫–∏ –ø—Ä–æ–¥–∞–∂ - –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

**–î–∞—Ç–∞:** 2025-12-08  
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–≤–æ–¥—ã

### ‚úÖ –ê–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä (autotrader_v2.py ‚Üí _try_sell)
**–°–¢–ê–¢–£–°: –û–¢–õ–ò–ß–ù–û ‚úÖ**

**–ó–∞—â–∏—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
- ‚úÖ –î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–Ω—ã (–¥–æ –∏ –ø–æ—Å–ª–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
- ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º MARKET SELL –æ—Ä–¥–µ—Ä–∞
- ‚úÖ –§–æ—Ä–º—É–ª–∞ —Ü–µ–ª–µ–≤–æ–π —Ü–µ–Ω—ã: `target_sell_price = rate * (1 + target_delta_pct / 100)`
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ–¥–∞–∂–∏ –Ω–∏–∂–µ breakeven_price
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

**–ö–æ–¥:**
```python
# –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Å—Ç—Ä–æ–∫–∞ 838)
if price < target_sell_price:
    return  # –û—Ç–º–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏

# –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Å—Ç—Ä–æ–∫–∞ 893)
current_price_before_sell = self._get_market_price(base, quote)
if current_price_before_sell < target_sell_price:
    print("[SKIP] ‚ö†Ô∏è –¶–µ–Ω–∞ —É–ø–∞–ª–∞ –Ω–∏–∂–µ —Ü–µ–ª–µ–≤–æ–π –≤–æ –≤—Ä–µ–º—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏!")
    return  # –û—Ç–º–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏

# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ (—Å—Ç—Ä–æ–∫–∞ 910)
order = api_client.create_spot_order(side='sell', order_type='market', ...)
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ù–ï —Ç—Ä–µ–±—É—é—Ç—Å—è.**

---

### ‚ö†Ô∏è –†—É—á–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ (handlers/quick_trades.py ‚Üí quick_sell)
**–°–¢–ê–¢–£–°: –†–ê–ë–û–¢–ê–ï–¢, –ù–û –ú–û–ñ–ù–û –£–õ–£–ß–®–ò–¢–¨ ‚ö†Ô∏è**

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –ü—Ä–æ–¥–∞—ë—Ç –ø–æ —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–µ (best_bid –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞)
- ‚ùå –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∞–±–ª–∏—Ü–µ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏
- ‚ùå –ú–æ–∂–µ—Ç –ø—Ä–æ–¥–∞—Ç—å –Ω–∏–∂–µ —Ü–µ–ª–µ–≤–æ–π —Ü–µ–Ω—ã –∏–∑ —Ç–∞–±–ª–∏—Ü—ã

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
```
–¢–∞–±–ª–∏—Ü–∞: target_sell_price = 0.00123456 (‚ÜëŒî% = +2.5%)
–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞: 0.00120000 (–≤—ã—à–µ –ø–æ–∫—É–ø–∫–∏, –Ω–æ –Ω–∏–∂–µ —Ü–µ–ª–µ–≤–æ–π)
–î–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–ü—Ä–æ–¥–∞—Ç—å –≤—Å—ë"
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–æ–¥–∞–∂–∞ –ø–æ 0.00120000 ‚ùå (–Ω–∏–∂–µ —Ü–µ–ª–µ–≤–æ–π!)
```

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–µ–≤—É—é —Ü–µ–Ω—É –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∂–µ–π
2. –ï—Å–ª–∏ —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ < —Ü–µ–ª–µ–≤–æ–π ‚Üí –≤–µ—Ä–Ω—É—Ç—å `warning` –≤ JSON
3. –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ —Ä–∏—Å–∫–µ
- ‚úÖ –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —ç–∫—Å—Ç—Ä–µ–Ω–Ω—É—é –ø—Ä–æ–¥–∞–∂—É
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞

**–ö–æ–¥ (backend):**
```python
# –í quick_sell() –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –æ—Ä–¥–µ—Ä–∞
warning = None
if cycle.is_active():
    target_sell_price = rate * (1 + target_delta_pct / 100)
    if best_bid < target_sell_price:
        warning = {
            'message': '–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –Ω–∏–∂–µ —Ü–µ–ª–µ–≤–æ–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã',
            'current_price': best_bid,
            'target_price': target_sell_price
        }

return jsonify({'success': True, 'warning': warning, ...})
```

**–ö–æ–¥ (frontend):**
```javascript
if (data.success && data.warning) {
    alert(`‚ö†Ô∏è ${data.warning.message}\n` +
          `–¢–µ–∫—É—â–∞—è: ${data.warning.current_price}\n` +
          `–¶–µ–ª–µ–≤–∞—è: ${data.warning.target_price}`);
}
```

**–ó–∞—Ç—Ä–∞—Ç—ã:** 1-2 —á–∞—Å–∞  
**–†–∏—Å–∫–∏:** –ù–∏–∑–∫–∏–µ

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥–∞–∂—É (—Å—Ç—Ä–æ–≥–∞—è –∑–∞—â–∏—Ç–∞)

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É, –µ—Å–ª–∏ —Ü–µ–Ω–∞ < —Ü–µ–ª–µ–≤–æ–π
2. –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–¥–∞—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ" —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏–∫–µ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç —ç–∫—Å—Ç—Ä–µ–Ω–Ω—É—é –ø—Ä–æ–¥–∞–∂—É
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º override

**–ó–∞—Ç—Ä–∞—Ç—ã:** 3-4 —á–∞—Å–∞  
**–†–∏—Å–∫–∏:** –°—Ä–µ–¥–Ω–∏–µ

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –§—É–Ω–∫—Ü–∏—è | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã | –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ | –°—Ç–∞—Ç—É—Å |
|---------|------------------|-------------------|--------|
| **autotrader_v2._try_sell()** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ **–ó–ê–©–ò–©–ï–ù–ê** |
| **quick_trades.quick_sell()** | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚ö†Ô∏è **–ú–û–ñ–ù–û –£–õ–£–ß–®–ò–¢–¨** |

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
- ‚úÖ –ê—É–¥–∏—Ç –∑–∞–≤–µ—Ä—à—ë–Ω, –ø—Ä–æ–±–ª–µ–º –≤ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–µ—Ä–µ –ù–ï –Ω–∞–π–¥–µ–Ω–æ

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
1. ‚≠ê –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ quick_sell() (–í–∞—Ä–∏–∞–Ω—Ç 1)
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É
3. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üìÑ –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç

–ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:  
**‚Üí –°–º. —Ñ–∞–π–ª:** `–ê–£–î–ò–¢_–õ–û–ì–ò–ö–ò_–ü–†–û–î–ê–ñ.md`

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 2025-12-08  
**–í–µ—Ä—Å–∏—è:** 1.0
