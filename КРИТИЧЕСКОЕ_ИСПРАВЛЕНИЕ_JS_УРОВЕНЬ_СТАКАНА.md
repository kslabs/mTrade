# ‚úÖ –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–∫–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω

## üî¥ –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**JavaScript –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–ª –∑–Ω–∞—á–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å—Ç–∞–∫–∞–Ω–∞** –ø–æ —Å—Ç–∞—Ä–æ–π —Ñ–æ—Ä–º—É–ª–µ `(step √ó base) + 1`, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –±—Ä–∞—Ç—å –µ–≥–æ **–Ω–∞–ø—Ä—è–º—É—é –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã**!

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:

1. **Backend (`breakeven_calculator.py`)** –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª —Ç–∞–±–ª–∏—Ü—É —Å —Ñ–æ—Ä–º—É–ª–æ–π:
   ```python
   orderbook_level = round(step * base_orderbook_level)
   ```
   - –ü—Ä–∏ `base_orderbook_level = 0`: —à–∞–≥ 0 ‚Üí —É—Ä–æ–≤–µ–Ω—å 0
   - –ü—Ä–∏ `base_orderbook_level = 1`: —à–∞–≥ 0 ‚Üí —É—Ä–æ–≤–µ–Ω—å 0, —à–∞–≥ 1 ‚Üí —É—Ä–æ–≤–µ–Ω—å 1

2. **Frontend (`app.js`)** –ò–ì–ù–û–†–ò–†–û–í–ê–õ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–ª –ø–æ —Å—Ç–∞—Ä–æ–π —Ñ–æ—Ä–º—É–ª–µ:
   ```javascript
   orderbookLevelForStep = Math.round((stepNum * orderbookLevel) + 1);
   ```
   - –ü—Ä–∏ `orderbook_level = 0`: —à–∞–≥ 0 ‚Üí `(0 √ó 0) + 1 = 1` ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
   - –ü—Ä–∏ `orderbook_level = 1`: —à–∞–≥ 0 ‚Üí `(0 √ó 1) + 1 = 1` ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í UI –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å "–°—Ç. 1" –¥–ª—è —à–∞–≥–∞ 0, –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–æ `orderbook_level = 0`

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω—ë–Ω —Ñ–∞–π–ª `static/app.js` (—Å—Ç—Ä–æ–∫–∞ 1245)

**–ë–´–õ–û:**
```javascript
// –†–∞—Å—á—ë—Ç —É—Ä–æ–≤–Ω—è —Å—Ç–∞–∫–∞–Ω–∞ –¥–ª—è –ø–æ–∫—É–ø–∫–∏: (# * –°—Ç–∞–∫–∞–Ω) + 1, –æ–∫—Ä—É–≥–ª—è–µ–º –¥–æ —Ü–µ–ª–æ–≥–æ
const orderbookLevelForStep = Math.round((stepNum * orderbookLevel) + 1);
```

**–°–¢–ê–õ–û:**
```javascript
// –£—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–∫–∞–Ω–∞ –±–µ—Ä—ë–º –ù–ê–ü–†–Ø–ú–£–Æ –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã (–±–µ–∑ –ø–µ—Ä–µ—Å—á—ë—Ç–∞!)
// –ó–Ω–∞—á–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω–¥–µ–∫—Å—É –º–∞—Å—Å–∏–≤–∞: 0 = bids[0], 1 = bids[1], –∏ —Ç.–¥.
const orderbookLevelForStep = row.orderbook_level !== undefined ? row.orderbook_level : 0;
```

### –û–±–Ω–æ–≤–ª—ë–Ω tooltip (—Å—Ç—Ä–æ–∫–∞ 1267)

**–ë–´–õ–û:**
```javascript
title='–£—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–∫–∞–Ω–∞: (${stepNum} √ó ${orderbookLevel}) + 1 = ${orderbookLevelForStep}'
```

**–°–¢–ê–õ–û:**
```javascript
title='–£—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–∫–∞–Ω–∞ (–∏–Ω–¥–µ–∫—Å –º–∞—Å—Å–∏–≤–∞): ${orderbookLevelForStep} ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç bids[${orderbookLevelForStep}] –∏–ª–∏ asks[${orderbookLevelForStep}]'
```

---

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å

### –ü—Ä–∏–º–µ—Ä 1: `orderbook_level = 0` (–≤—Å–µ–≥–¥–∞ –ª—É—á—à–∞—è —Ü–µ–Ω–∞)

**Backend –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É:**
```
–®–∞–≥ 0: orderbook_level = 0 √ó 0 = 0
–®–∞–≥ 1: orderbook_level = 1 √ó 0 = 0
–®–∞–≥ 2: orderbook_level = 2 √ó 0 = 0
```

**Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
```
–®–∞–≥ 0: "–°—Ç. 0" ‚úÖ
–®–∞–≥ 1: "–°—Ç. 0" ‚úÖ
–®–∞–≥ 2: "–°—Ç. 0" ‚úÖ
```

**–ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:**
```
bids[0] –¥–ª—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ ‚úÖ
```

---

### –ü—Ä–∏–º–µ—Ä 2: `orderbook_level = 1` (–ª–∏–Ω–µ–π–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ)

**Backend –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É:**
```
–®–∞–≥ 0: orderbook_level = 0 √ó 1 = 0
–®–∞–≥ 1: orderbook_level = 1 √ó 1 = 1
–®–∞–≥ 2: orderbook_level = 2 √ó 1 = 2
```

**Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
```
–®–∞–≥ 0: "–°—Ç. 0" ‚úÖ
–®–∞–≥ 1: "–°—Ç. 1" ‚úÖ
–®–∞–≥ 2: "–°—Ç. 2" ‚úÖ
```

**–ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:**
```
–®–∞–≥ 0: bids[0] ‚úÖ
–®–∞–≥ 1: bids[1] ‚úÖ
–®–∞–≥ 2: bids[2] ‚úÖ
```

---

### –ü—Ä–∏–º–µ—Ä 3: `orderbook_level = 2` (–±—ã—Å—Ç—Ä–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ)

**Backend –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É:**
```
–®–∞–≥ 0: orderbook_level = 0 √ó 2 = 0
–®–∞–≥ 1: orderbook_level = 1 √ó 2 = 2
–®–∞–≥ 2: orderbook_level = 2 √ó 2 = 4
```

**Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
```
–®–∞–≥ 0: "–°—Ç. 0" ‚úÖ
–®–∞–≥ 1: "–°—Ç. 2" ‚úÖ
–®–∞–≥ 2: "–°—Ç. 4" ‚úÖ
```

**–ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:**
```
–®–∞–≥ 0: bids[0] ‚úÖ
–®–∞–≥ 1: bids[2] ‚úÖ
–®–∞–≥ 2: bids[4] ‚úÖ
```

---

## üìä –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

| –§–∞–π–ª | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –§–æ—Ä–º—É–ª–∞/–õ–æ–≥–∏–∫–∞ |
|------|------------|----------------|
| `breakeven_calculator.py` | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É | `orderbook_level = step √ó base_orderbook_level` |
| `mTrade.py` (API) | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ |
| `app.js` (Frontend) | –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É | **–ò–°–ü–†–ê–í–õ–ï–ù–û:** `row.orderbook_level` (–Ω–∞–ø—Ä—è–º—É—é –∏–∑ –¥–∞–Ω–Ω—ã—Ö) |
| `autotrader_v2.py` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ | `orderbook_level` –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Ç–∞–±–ª–∏—Ü—ã ‚Üí `bids[orderbook_level]` |
| `mTrade.py` (–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã) | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ | `orderbook_level` –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Ç–∞–±–ª–∏—Ü—ã ‚Üí `bids[orderbook_level]` |

---

## üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

### 1Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

```powershell
python mTrade.py
```

### 2Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä (Ctrl+F5)

**–í–ê–ñ–ù–û:** –ù—É–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å –∫–µ—à JavaScript, –∏–Ω–∞—á–µ —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏

**–ü—Ä–∏ `orderbook_level = 0` (–¥–µ—Ñ–æ–ª—Ç):**
- –°—Ç–æ–ª–±–µ—Ü "–°—Ç." –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å **"0"** –¥–ª—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ ‚úÖ

**–ü—Ä–∏ `orderbook_level = 1`:**
- –®–∞–≥ 0: "–°—Ç. 0" ‚úÖ
- –®–∞–≥ 1: "–°—Ç. 1" ‚úÖ
- –®–∞–≥ 2: "–°—Ç. 2" ‚úÖ

### 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–ª–æ–∫ "üìà –£—Ä–æ–≤–Ω–∏ —Ü–µ–Ω"

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞ —Ç–∞–±–ª–∏—Ü—ã:
```
–£—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–∫–∞–Ω–∞: 0   (–¥–ª—è —à–∞–≥–∞ 0 –ø—Ä–∏ –ª—é–±–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–µ)
```

### 5Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

```
[XRP] –£—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–∫–∞–Ω–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã: 0 (–∏—Å–ø–æ–ª—å–∑—É–µ–º bids[0])
[XRP] –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–µ–Ω—É –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ bids[0] = 2.5432
```

---

## ‚úÖ –†–ï–®–ï–ù–û!

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå Backend: `orderbook_level = 0`
- ‚ùå Frontend: –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç "–°—Ç. 1" (–ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ —Å—Ç–∞—Ä–æ–π —Ñ–æ—Ä–º—É–ª–µ!)
- ‚ùå –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ!

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ Backend: `orderbook_level = 0`
- ‚úÖ Frontend: –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç "–°—Ç. 0" (–±–µ—Ä—ë—Ç –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã!)
- ‚úÖ –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: `bids[0]`
- ‚úÖ **–ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ!**

---

## üìÇ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- ‚úÖ `static/app.js` ‚Äî —Å—Ç—Ä–æ–∫–∞ 1245 (—á—Ç–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –¥–∞–Ω–Ω—ã—Ö) + —Å—Ç—Ä–æ–∫–∞ 1267 (tooltip)

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-12-10  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û - –¢–†–ï–ë–£–ï–¢–°–Ø –ü–ï–†–ï–ó–ê–ü–£–°–ö –°–ï–†–í–ï–†–ê –ò –û–ë–ù–û–í–õ–ï–ù–ò–ï –ë–†–ê–£–ó–ï–†–ê (Ctrl+F5)
